(function(e){function t(t){for(var i,a,s=t[0],c=t[1],u=t[2],d=0,h=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&h.push(o[a][0]),o[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);l&&l(t);while(h.length)h.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},o={app:0},r=[];function a(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-9475eac2":"4f1219b0"}[e]+".js"}function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,i){n=o[e]=[t,i]}));t.push(n[2]=i);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=a(e);var u=new Error;r=function(t){c.onerror=c.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+i+": "+r+")",u.name="ChunkLoadError",u.type=i,u.request=r,n[1](u)}o[e]=void 0}};var d=setTimeout((function(){r({type:"timeout",target:c})}),12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var l=u;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1747:function(e,t,n){"use strict";n("ea0a")},"234b":function(e,t,n){"use strict";n("fd76")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e.isWebGLEnabled?e._e():n("div",[e._m(0)]),e.isWebGLEnabled?n("div",[n("transition",{attrs:{name:"fade"}},[e.progressMessage?n("div",{staticClass:"progress"},[e._v(e._s(e.progressMessage))]):e._e()]),n("transition",{attrs:{name:"fade"}},[e.subgraphName&&!e.isStreetViewMode?n("div",{staticClass:"progress subgraph"},[e._v(" Only "),n("a",{staticClass:"accent",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onSubgraphRootClick(t)}}},[e._v("/r/"+e._s(e.subgraphName))]),e._v(" related subreddits are shown. "),n("a",{staticClass:"accent",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onExitSubgraph(t)}}},[e._v("view all")])]):e._e()]),n("transition",{attrs:{name:"fade"}},[e.isStreetViewMode&&!e.isStreetViewInProgress?n("div",{staticClass:"progress subgraph"},[n("a",{staticClass:"accent",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onExitStreetView(t)}}},[e._v("exit street view")])]):e._e()]),e.subreddit?n("subreddit",{staticClass:"preview",attrs:{name:e.subreddit,sort:e.defaultSort,time:e.defaultTime},on:{declineAge:e.onDeclineAge}},[n("template",{slot:"after-title"},[n("div",[e.graphLoaded?n("a",{staticClass:"subreddit-action",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showRelated(t)}}},[e._v("Show related")]):e._e(),e.streetViewEnabled&&e.graphLoaded&&!e.isSubgraphLayoutInProgress?n("a",{staticClass:"subreddit-action",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showStreetView(t)}}},[e._v("Street view")]):e._e(),e.graphLoaded?e._e():n("span",{staticClass:"subreddit-action"},[e._v("the map is still loading...")])])])],2):e._e(),n("form",{staticClass:"search-box",on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("typeahead",{attrs:{placeholder:"Find subreddit",showClearButton:e.subreddit,query:e.appState.query},on:{menuClicked:function(t){e.sidebarVisible=!0},selected:e.findSubreddit,beforeClear:e.closeSubredditOnSmallScreen,cleared:e.closeSubredditViewer,inputChanged:e.onTypeAheadInput}})],1),n("a",{staticClass:"accent improve",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onImproveClick(t)}}},[e._v("Improve this map")]),n("transition",{attrs:{name:"slide-bottom"}},[e.smallPreview?n("small-preview",{staticClass:"small-preview",attrs:{name:e.smallPreview}}):e._e()],1),n("transition",{attrs:{name:"slide-top"}},[e.improveVisible?n("improve-window",{staticClass:"improve-window",on:{close:function(t){e.improveVisible=!1}}}):e._e()],1),e.tooltip?n("tooltip",{staticClass:"tooltip",style:{left:e.tooltip.x+"px",top:e.tooltip.y+"px"},attrs:{data:e.tooltip}}):e._e(),n("transition",{attrs:{name:"fade"}},[e.sidebarVisible||e.improveVisible?n("div",{staticClass:"backdrop",on:{click:e.onBackdropClick}}):e._e()]),n("transition",{attrs:{name:"slide-left"}},[e.sidebarVisible?n("sidebar",{on:{close:function(t){e.sidebarVisible=!1}}}):e._e()],1)],1):e._e()])},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"absolute no-webgl"},[n("h4",[e._v("WebGL is not enabled :(")]),n("p",[e._v("This website needs "),n("a",{staticClass:"accent",attrs:{href:"https://en.wikipedia.org/wiki/WebGL"}},[e._v("WebGL")]),e._v(" to render a map of reddit. ")]),e._v(" "),n("p",[e._v(" You can try another browser. If the problem persists - very likely your video card isn't supported. ")])])}],a=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("b0c0"),n("e6b8"),n("3835")),s=n("5530"),c=(n("159b"),n("6062"),n("a630"),n("4de4"),n("d81d"),n("1276"),n("ac1f"),n("c35a"),n("a9e3"),n("466d"),n("f00c"),n("9aeb")),u=(n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("ace4"),n("fb6a"),n("2b3d"),n("25f0"),n("00c7")),d=n.n(u),l=n("148d"),h=n.n(l),f=n("1a2d"),v=d()({}),p=v;function m(e){v.fire("progress",e())}n("5319");function g(e,t,n){var i,o=new Date;return function(){var r=new Date,a=r-o;clearTimeout(i),a>t?e.apply(n,arguments):(o=r,i=setTimeout(e,t,arguments))}}function w(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function b(e){var t=!1,n=h()(),i=Object(f["createStreamingSVGParser"])(s,c,!0),o=d()({load:a,dispose:r,getGraph:function(){return n}});return o;function r(){t=!0}function a(){var r=window.performance.now();function a(){return{message:"Loaded "+w(n.getLinkCount())+" relationship records"}}function s(t){if(e.indexOf("http")<0)return t;var n=new URL(e);return n.pathname=n.pathname.substr(0,n.pathname.lastIndexOf("/")+1)+t,n.toString()}return fetch(e,{mode:"cors"}).then((function(e){var n=e.body.getReader(),o=new TextDecoder;return n.read().then(r);function r(e){if(!t){var a=void 0!==e.value&&o.decode(e.value,{stream:!e.done})||"";return i(a).then((function(){if(!e.done)return n.read().then(r)}))}}})).then((function(){return console.log("Elapsed: ",window.performance.now()-r),m((function(){return{message:"Loading links..."}})),fetch(s("node-ids.txt"),{mode:"cors"}).then((function(e){return e.text()})).then((function(e){var t=e.split("\n");return t.forEach((function(e){return n.addNode(e)})),t}))})).then((function(e){var i,o,r,c;return fetch(s("links.bin"),{mode:"cors"}).then((function(e){return o=e.body.getReader(),o.read().then(u)}));function u(s){if(!t){var d=s.value;if(!d&&r)throw new Error("Incomplete response");if(!d)return m((function(){return{mapLoaded:!0}})),n;if(r){var l=new Uint8Array(r.byteLength+d.byteLength);l.set(new Uint8Array(r),0),l.set(new Uint8Array(d),r.byteLength),d=l,r=null}var h=4*Math.floor(d.byteLength/4);d.byteLength%4!==0&&(r=d.slice(h));for(var f=new DataView(d.buffer),v=0;v<h;v+=4){var p=f.getInt32(v,!0);if(p<0)i=-p-1,c=1,n.addNode(e[i]);else{var g=p-1;n.addLink(e[i],e[g],c),c+=1}}return s.done?(m((function(){return{mapLoaded:!0}})),n):(m(a),o.read().then(u))}}})),o}function s(e){o.fire("element-start",e)}function c(e){o.fire("element-end",e)}}var y=n("d4ec"),x=n("bee2"),C=n("262e"),_=n("2caf"),S=function(e){Object(C["a"])(n,e);var t=Object(_["a"])(n);function n(e){var i;Object(y["a"])(this,n);var o=Object(c["h"])({gl:e,vertex:"\n  uniform mat4 modelViewProjection;\n  uniform float opacity;\n  uniform float cameraDistance;\n\n  attribute float size;\n  attribute vec3 position;\n  attribute vec4 color;\n\n  attribute vec2 point; // instanced\n\n  varying vec4 vColor;\n  varying vec2 vPoint;\n  void main() {\n    gl_Position = modelViewProjection * vec4(position + vec3(point * size, 0.), 1.0);\n    vColor = color.abgr;\n    vColor[3] *= opacity *  (1. - smoothstep(0.0, 1., cameraDistance / (3000. * size)));\n    vPoint = point;\n  }",fragment:"\n  precision highp float;\n  varying vec4 vColor;\n  varying vec2 vPoint;\n  void main() {\n    float dist = length(vPoint);\n    if (dist >= 0.5) {discard;}\n    gl_FragColor = vColor;\n  }",attributes:{color:new c["a"]},instanced:{point:new c["e"]([-.5,-.5,-.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5])},preDrawHook:function(){return"gl.enable(gl.DEPTH_TEST);\n        gl.depthFunc(gl.LEQUAL);"},postDrawHook:function(){return"gl.disable(gl.DEPTH_TEST);"}});return i=t.call(this,o),i.opacity=1,i.hidden=!1,i}return Object(x["a"])(n,[{key:"hide",value:function(){this.hidden=!0}},{key:"show",value:function(){this.hidden=!1}},{key:"draw",value:function(e,t){this.hidden||(this.uniforms||(this.uniforms={modelViewProjection:this.modelViewProjection,opacity:this.opacity}),this.uniforms.opacity=this.opacity,this.uniforms.cameraDistance=t.view.position[2],this.program.draw(this.uniforms))}},{key:"clear",value:function(){this.program.setCount(0)}}]),n}(c["d"]),k=(n("0481"),n("5664")),E=n.n(k),P=function(e){Object(C["a"])(n,e);var t=Object(_["a"])(n);function n(e){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(y["a"])(this,n);var r=Object(c["h"])({gl:e,debug:o.debug,vertex:"\n  uniform mat4 modelViewProjection;\n  uniform float opacity;\n\n  attribute vec2 point;\n  attribute vec4 color;\n  varying vec4 vColor;\n\n  void main() {\n    gl_Position = modelViewProjection * vec4(point, -1.0, 1.0);\n    vColor = color.abgr;\n    vColor[3] *= opacity;\n  }",fragment:"\n  precision highp float;\n\n  varying vec4 vColor;\n\n  void main() {\n    gl_FragColor = vColor;\n  }",attributes:{color:new c["a"]}});return i=t.call(this,r),i.opacity=void 0===o.opacity?1:o.opacity,i.color=o.color||255,i}return Object(x["a"])(n,[{key:"draw",value:function(){this.uniforms||(this.uniforms={modelViewProjection:this.modelViewProjection,opacity:this.opacity}),this.uniforms.opacity=this.opacity,this.program.draw(this.uniforms)}},{key:"clear",value:function(){this.program.setCount(0)}},{key:"addPolygon",value:function(e){var t=e.polygon,n=e.color;t=t.flat();for(var i=E()(t),o=0;o<i.length;o++){var r=2*i[o];this.add({point:[t[r],t[r+1]],color:n||this.color})}for(var a=0;a<3;++a)this.add({point:[0,0],color:0})}}]),n}(c["d"]),T=n("b85c"),I=function(e){Object(C["a"])(n,e);var t=Object(_["a"])(n);function n(e){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(y["a"])(this,n),e.getExtension("OES_standard_derivatives"),i=t.call(this,L(e,o));var r=i.msdfImage=new Image;r.crossOrigin="Anonymous",i.isReady=!1,i.queue=[],i.fontSize=o.fontSize||2,i.opacity=void 0!==o.opacity?o.opacity:1,i.fontInfo=null;var a="fonts";return fetch("".concat(a,"/Roboto.json"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){i.fontInfo=e,i.alphabet=new Map,e.chars.forEach((function(e){var t=String.fromCharCode(e.id);i.alphabet.set(t,e)})),i.msdfImage.onload=function(){i._sdfTextureChanged=!0,i.program.setTextureCanvas("msdf",i.msdfImage),i.isReady=!0,i.sdfTextureWidth=r.width,i.sdfTextureHeight=r.height,i.queue.forEach((function(e){return i.addText(e)})),i.queue=[]},i.msdfImage.src="".concat(a,"/Roboto0.png")})),i}return Object(x["a"])(n,[{key:"clear",value:function(){this.program.setCount(0)}},{key:"draw",value:function(e,t){this.uniforms||(this.uniforms={modelViewProjection:this.modelViewProjection,color:[.9,.9,.9,1],bias:.5,opacity:this.opacity}),this.uniforms.cameraDistance=t.view.position[2],this.uniforms.opacity=this.opacity,this.uniforms.color[0]=.2,this.uniforms.color[1]=.4,this.uniforms.color[2]=.8,this.uniforms.color[3]=.8,this.uniforms.bias=.35,this.program.draw(this.uniforms),this.uniforms.color[0]=.9,this.uniforms.color[1]=.9,this.uniforms.color[2]=.9,this.uniforms.color[3]=1,this.uniforms.bias=.5,this.program.draw(this.uniforms)}},{key:"addText",value:function(e){if(this.isReady){var t=e.text,n=e.x,i=void 0===n?0:n,o=e.y,r=void 0===o?0:o,a=e.z,s=void 0===a?0:a;if(void 0===t)throw new Error("Text is not defined in "+e);var c=0,u=e.fontSize||this.fontSize;if(void 0!==e.limit){var d,l=0,h=Object(T["a"])(t);try{for(h.s();!(d=h.n()).done;){var f=d.value,v=this.alphabet.get(f);v&&(l+=v.xadvance)}}catch(k){h.e(k)}finally{h.f()}u=e.limit*this.fontInfo.info.size/l}var p=u/this.fontInfo.info.size;if(void 0!==e.cx){var m,g=0,w=Object(T["a"])(t);try{for(w.s();!(m=w.n()).done;){var b=m.value,y=this.alphabet.get(b);y&&(g+=y.xadvance)}}catch(k){w.e(k)}finally{w.f()}c-=g*e.cx*p}void 0!==e.cy&&(r+=u*e.cy);var x,C=Object(T["a"])(t);try{for(C.s();!(x=C.n()).done;){var _=x.value,S=this.alphabet.get(_);S?(this.add({position:[i+c,r-S.yoffset*p,s],charSize:[u*S.width/42,-u*S.height/42,u],texturePosition:[S.x/this.sdfTextureWidth,1-S.y/this.sdfTextureHeight,S.width/this.sdfTextureWidth,-S.height/this.sdfTextureHeight]}),c+=S.xadvance*p):console.error(_+" is missing in the font")}}catch(k){C.e(k)}finally{C.f()}this.scene&&this.scene.renderFrame()}else this.queue.push(e)}}]),n}(c["d"]);function L(e,t){return Object(c["h"])({capacity:t.capacity||1,buffer:t.buffer,debug:t.debug,gl:e,vertex:"\n  uniform mat4 modelViewProjection;\n  uniform vec4 color;\n  uniform float cameraDistance;\n\n  // Position of the text character:\n  attribute vec3 position;\n  // Instanced quad coordinate:\n  attribute vec2 point;\n  attribute vec3 charSize;\n  // [x, y, w, h] - of the character in the msdf texture;\n  attribute vec4 texturePosition;\n\n  varying vec4 vColor;\n  varying vec2 vPoint;\n\n  void main() {\n    gl_Position = modelViewProjection * vec4(position + vec3(vec2(point.x, point.y) * charSize.xy, position.z), 1.);\n    vPoint = texturePosition.xy + point * texturePosition.zw;\n    vColor = color;\n    vColor[3] *= (1. - smoothstep(0.0, 1., cameraDistance / (5000. * charSize.z)));\n  }",fragment:"\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n  precision highp float;\n  varying vec2 vPoint;\n  varying vec4 vColor;\n\n  uniform float bias;\n  uniform float opacity;\n  uniform float cameraDistance;\n  uniform sampler2D msdf;\n\n  float median(float r, float g, float b) {\n    return max(min(r, g), min(max(r, g), b));\n  }\n\n  void main() {\n    vec3 sample = texture2D(msdf, vPoint).rgb;\n    float sigDist = median(sample.r, sample.g, sample.b) - bias;\n    float alpha = clamp(sigDist / fwidth(sigDist) + bias, 0.0, 1.0);\n    gl_FragColor = vec4(vColor.rgb, vColor.a * alpha * opacity);\n  }",instanced:{point:new c["e"]([0,0,1,0,1,1,1,1,0,0,0,1])}})}var j=function(e){Object(C["a"])(n,e);var t=Object(_["a"])(n);function n(e){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(y["a"])(this,n),e.getExtension("OES_standard_derivatives"),i=t.call(this,O(e,o));var r=i.msdfImage=new Image;r.crossOrigin="Anonymous",i.isReady=!1,i.queue=[],i.fontSize=o.fontSize||2,i.opacity=void 0!==o.opacity?o.opacity:1,i.fontInfo=null;var a="fonts";return fetch("".concat(a,"/Roboto.json"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){i.fontInfo=e,i.alphabet=new Map,e.chars.forEach((function(e){var t=String.fromCharCode(e.id);i.alphabet.set(t,e)})),i.msdfImage.onload=function(){i._sdfTextureChanged=!0,i.program.setTextureCanvas("msdf",i.msdfImage),i.isReady=!0,i.sdfTextureWidth=r.width,i.sdfTextureHeight=r.height,i.queue.forEach((function(e){return i.addText(e)})),i.queue=[]},i.msdfImage.src="".concat(a,"/Roboto0.png")})),i}return Object(x["a"])(n,[{key:"clear",value:function(){this.program.setCount(0)}},{key:"draw",value:function(e,t){this.uniforms||(this.uniforms={modelViewProjection:this.modelViewProjection,bias:.5,opacity:this.opacity}),this.uniforms.opacity=this.opacity,this.uniforms.cameraDistance=t.view.position[2],this.uniforms.bias=.5,this.program.draw(this.uniforms)}},{key:"addText",value:function(e){if(this.isReady){var t=e.text,n=e.x,i=void 0===n?0:n,o=e.y,r=void 0===o?0:o,a=e.z,s=void 0===a?0:a;if(void 0===t)throw new Error("Text is not defined in "+e);var c=0,u=e.fontSize||this.fontSize;if(void 0!==e.limit){var d,l=0,h=Object(T["a"])(t);try{for(h.s();!(d=h.n()).done;){var f=d.value,v=this.alphabet.get(f);v&&(l+=v.xadvance)}}catch(k){h.e(k)}finally{h.f()}u=e.limit*this.fontInfo.info.size/l}var p=u/this.fontInfo.info.size;if(void 0!==e.cx){var m,g=0,w=Object(T["a"])(t);try{for(w.s();!(m=w.n()).done;){var b=m.value,y=this.alphabet.get(b);y&&(g+=y.xadvance)}}catch(k){w.e(k)}finally{w.f()}c-=g*e.cx*p}void 0!==e.cy&&(r+=u*e.cy);var x,C=Object(T["a"])(t);try{for(C.s();!(x=C.n()).done;){var _=x.value,S=this.alphabet.get(_);S?(this.add({position:[i+c,r-S.yoffset*p,s],color:e.color,charSize:[u*S.width/42,-u*S.height/42,u],texturePosition:[S.x/this.sdfTextureWidth,1-S.y/this.sdfTextureHeight,S.width/this.sdfTextureWidth,-S.height/this.sdfTextureHeight]}),c+=S.xadvance*p):console.error(_+" is missing in the font")}}catch(k){C.e(k)}finally{C.f()}this.scene&&this.scene.renderFrame()}else this.queue.push(e)}}]),n}(c["d"]);function O(e,t){return Object(c["h"])({capacity:t.capacity||1,buffer:t.buffer,debug:t.debug,gl:e,vertex:"\n  uniform mat4 modelViewProjection;\n  uniform float cameraDistance;\n\n  attribute vec4 color;\n\n  // Position of the text character:\n  attribute vec3 position;\n  // Instanced quad coordinate:\n  attribute vec2 point;\n  attribute vec3 charSize;\n  // [x, y, w, h] - of the character in the msdf texture;\n  attribute vec4 texturePosition;\n\n  varying vec2 vPoint;\n  varying vec4 vColor;\n\n  void main() {\n    gl_Position = modelViewProjection * vec4(\n      position + vec3(vec2(point.x, point.y) * charSize.xy, position.z), 1.);\n    vPoint = texturePosition.xy + point * texturePosition.zw;\n    vColor = color.abgr;\n    vColor[3] = smoothstep(0.2, 0.8, cameraDistance / (50. * charSize.z) );\n  }",fragment:"\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n  precision highp float;\n  varying vec2 vPoint;\n  varying vec4 vColor;\n\n  uniform float bias;\n  uniform float opacity;\n  uniform sampler2D msdf;\n\n  float median(float r, float g, float b) {\n    return max(min(r, g), min(max(r, g), b));\n  }\n\n  void main() {\n    vec3 sample = texture2D(msdf, vPoint).rgb;\n    float sigDist = median(sample.r, sample.g, sample.b) - bias;\n    float alpha = clamp(sigDist / fwidth(sigDist) + bias, 0.0, 1.0);\n    gl_FragColor = vec4(vColor.rgb, vColor.a * alpha * opacity);\n  }",attributes:{color:new c["a"]},instanced:{point:new c["e"]([0,0,1,0,1,1,1,1,0,0,0,1])}})}var F=n("bbd6");function N(){var e,t=[],n={addWord:i,find:o};return n;function i(e){t.push(e)}function o(n){return e&&e.cancel(),e=F.goAsync(n,t,{limit:10}),e.then((function(e){return e.map((function(e){return{html:F.highlight(e,"<b>","</b>"),text:e.target}}))}))}}var M,D=n("9cf4"),G=D.instance({},{useSearch:!0}),V={query:G.get("q")||"",userTypedSomething:!1,getFilePath:function(){return G.get("graph")||"https://anvaka.github.io/map-of-reddit-data/graph.svg"},saveQuery:function(e){e?G.set({q:e}):G.unset("q")},getQueryState:function(){return G},getCameraPosition:function(){var e=["x","y","z"].map((function(e){var t=Number.parseFloat(G.get(e));if(Number.isFinite(t))return t})).filter((function(e){return void 0!==e}));if(3===e.length)return e},saveScenePosition:function(e){M&&(clearTimeout(M),M=0),M=setTimeout((function(){M=0;var t=e.getDrawContext(),n=Object(a["a"])(t.view.position,3),i=n[0],o=n[1],r=n[2],s={x:i,y:o,z:r};G.set(s)}),300)}},z=(n("99af"),{PRIMARY_HIGHLIGHT_COLOR:3206640383,SECONDARY_HIGHLIGHT_COLOR:3849038591,TERNARY_COLOR:3705462015,TERNARY_LINK:2290649156}),R={Polygons:0,Edges:5,HighlightedEdges:7,Nodes:10,Labels:12,Text:15},H={MainGraph:"main-graph-view"},A=(n("4057"),n("25a5")),q=n.n(A),B=n("471e"),$=n.n(B),Q=function(e){Object(C["a"])(n,e);var t=Object(_["a"])(n);function n(e,i){var o;Object(y["a"])(this,n);var r=Object(c["h"])({gl:e,vertex:"\nuniform mat4 modelViewProjection;\nuniform float width;\n\nattribute vec3 from, to;\nattribute vec2 point;\nattribute vec4 color;\nvarying vec2 vPoint;\nvarying vec4 vColor;\n\nvoid main() {\n  vec2 xBasis = normalize(to - from).xy;\n  vec2 yBasis = vec2(-xBasis.y, xBasis.x);\n  vec4 clip0 = modelViewProjection * vec4(from.xy + width * yBasis * point.x, from.z, 1.0);\n  vec4 clip1 = modelViewProjection * vec4(to.xy + width * yBasis * point.x, to.z, 1.0);\n  gl_Position = mix(clip0, clip1, point.y);\n  vColor = color;\n}",fragment:"\n    precision highp float;\n    varying vec4 vColor;\n\n    void main() {\n      gl_FragColor = vColor.abgr;\n    }",attributes:{color:new c["a"]},instanced:{point:new c["e"]([-.5,0,-.5,1,.5,1,-.5,0,.5,1,.5,0])}});return o=t.call(this,r),o.width=i&&i.width||1,o}return Object(x["a"])(n,[{key:"draw",value:function(){this.uniforms||(this.uniforms={modelViewProjection:this.modelViewProjection,width:this.width}),this.uniforms.width=this.width,this.program.draw(this.uniforms)}},{key:"clear",value:function(){this.program.setCount(0)}}]),n}(c["d"]);function U(e,t){var n=new q.a,i=!1,o=!1,r=e.getScene();r.on("click",m),r.on("mousemove",w),r.on("transform",d);var s=new S(r.getGL()),c=new Q(r.getGL(),{width:60}),u=new Q(r.getGL(),{width:20});return e.addToLayer(u,R.Edges),e.addToLayer(c,R.HighlightedEdges),e.addToLayer(s,R.Nodes),t.elementsGroupName&&(e.addToNamedGroup(c,t.elementsGroupName),e.addToNamedGroup(u,t.elementsGroupName),e.addToNamedGroup(s,t.elementsGroupName)),{addNode:f,clearHighlights:l,focusUI:h,dispose:v,setPaused:g,getIndex:function(){return n}};function d(e){var n=e.drawContext.view.position[2],o=Math.min(n,8e3);c.width=Math.max(1,60*o/8e3),u.width=Math.max(1,20*o/8e3),i=!0,t&&t.onTransform&&t.onTransform()}function l(){c.clear(),u.clear(),s.clear()}function h(e){void 0!==e&&p.fire("show-subreddit",e.name);var n=t&&t.getGraph&&t.getGraph();e||i||!n||(l(),p.fire("show-subreddit",null),r.renderFrame()),i=!1,e&&(l(),t.getHighlightedLinks(e).forEach((function(e){var t=e.isFirstLevel?c:u;t.add(e)})),t.getHighlightedNodes(e).forEach((function(e){return s.add(e)})),r.renderFrame())}function f(e){var t=e.position,i=e.size/2;n.insert({minX:t[0]-i,minY:t[1]-i,maxX:t[0]+i,maxY:t[1]+i,ui:e})}function v(){r.removeChild(c),r.removeChild(u),r.removeChild(s),r.off("click",m),r.off("mousemove",w),r.off("transform",d)}function m(e){var t=b(e.x,e.y);h(t)}function g(e){o=e}function w(e){if(!o){var t=b(e.x,e.y);void 0===t?p.fire("show-tooltip",null):p.fire("show-tooltip",{x:e.originalEvent.clientX,y:e.originalEvent.clientY,data:t.name})}}function b(e,t){var i=$()(n,e,t,1),o=i[0];if(void 0!==o){var r=o.ui,s=Object(a["a"])(r.position,2),c=s[0],u=s[1],d=Math.hypot(e-c,t-u);return d<r.size/2?r:void 0}}}function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:170,i=e>>24&255,o=e>>16&255,r=e>>8&255,s=Y(i,o,r),c=Object(a["a"])(s,3),u=c[0],d=c[1],l=c[2];l>.5&&(t=.8);var h=K(u,d,Math.min(1,l*t)),f=Object(a["a"])(h,3),v=f[0],p=f[1],m=f[2];return v<<24|p<<16|m<<8|n}function Y(e,t,n){e/=255,t/=255,n/=255;var i,o,r=Math.max(e,t,n),a=Math.min(e,t,n),s=(r+a)/2;if(r==a)i=o=0;else{var c=r-a;switch(o=s>.5?c/(2-r-a):c/(r+a),r){case e:i=(t-n)/c+(t<n?6:0);break;case t:i=(n-e)/c+2;break;case n:i=(e-t)/c+4;break}i/=6}return[i,o,s]}function K(e,t,n){var i,o,r;if(0==t)i=o=r=n;else{var a=n<.5?n*(1+t):n+t-n*t,s=2*n-a;i=Z(s,a,e+1/3),o=Z(s,a,e),r=Z(s,a,e-1/3)}return[Math.round(255*i),Math.round(255*o),Math.round(255*r)]}function Z(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var X=n("2b44"),J=1450227455,ee=W(1450227455),te={easeInQuart:function(e){return e*e*e*e}};function ne(e,t,i,o){var r,a,c=400,u=0,d=new Map,l=i.getScene(),h=new S(l.getGL()),f=new I(l.getGL()),v=new P(l.getGL(),{color:306283172,opacity:1}),g=ie(i,12,t);i.addToLayer(v,R.Polygons),i.addToLayer(h,R.Nodes),i.addToLayer(f,R.Text);var w=U(i,{getGraph:function(){return u<c&&e},getHighlightedLinks:x,getHighlightedNodes:y});return p.on("subgraph-focus-node",b),{dispose:C,getPointerEvents:function(){return w},getNameToUI:function(){return d},run:_};function b(e){w.focusUI(d.get(e))}function y(t){var n=Object(s["a"])({},d.get(t.name));n.color=z.PRIMARY_HIGHLIGHT_COLOR;var i=[n];return e.forEachLinkedNode(t.name,(function(e){var t=Object(s["a"])({},d.get(e.id));t.color=z.SECONDARY_HIGHLIGHT_COLOR,i.push(t)})),i}function x(t){var n=[];return e.forEachLink((function(e){var i=e.fromId===t.name||e.toId===t.name;n.push({from:d.get(e.fromId).position,to:d.get(e.toId).position,color:i?4294967295:ee,isFirstLevel:i})})),n}function C(e){cancelAnimationFrame(a),p.off("subgraph-focus-node",b),f.parent.removeChild(f),f.dispose(),w.dispose(),g.startSceneRestoration((function(){v.parent.removeChild(v),h.parent.removeChild(h),h.dispose(),e&&e()}),d,o,h,void 0===e),a=null,l.renderFrame()}function _(){g.startFadeOut(),k()}function k(){r=X(e,{timeStep:80,springLength:5e3,springCoefficient:1e-5,gravity:-120,nodeMass:function(e){var t=o.get(e);return t.size*Math.sqrt(t.size)}}),F(),a=requestAnimationFrame(E)}function E(){for(var e=0;e<10;++e)r.step();O(),u++<c?(a=requestAnimationFrame(E),u%10===0&&m((function(){return{message:"Layout step ".concat(u," of ").concat(c,". Please wait...")}}))):L(),l.setViewBox(j()),l.renderFrame()}function T(){var t=null;if(e.forEachNode((function(e){if(e.data&&e.data.isRoot)return t=e.id,!0})),!t)throw new Error("Root node is missing in the subgraph");return t}function L(){var t=[];e.forEachNode((function(e){var n=r.getNodePosition(e.id),i=n.x,o=n.y;t.push([i,o]);var a=d.get(e.id);w.addNode(a),f.addText({x:i,y:o-.75*a.size,text:a.name,limit:2*a.size,cx:.5})}));var i=T();w.focusUI(d.get(i)),m((function(){return{subgraphDone:!0,subgraphName:i}})),n.e("chunk-9475eac2").then(n.t.bind(null,"a230",7)).then((function(e){var n=e.default(t);v.addPolygon({polygon:n,color:J}),l.renderFrame()}))}function j(){var t={left:1/0,right:-1/0,top:1/0,bottom:-1/0};return e.forEachNode((function(e){var n=r.getNodePosition(e.id),i=n.x,o=n.y;i<t.left&&(t.left=i),i>t.right&&(t.right=i),o<t.top&&(t.top=o),o>t.bottom&&(t.bottom=o)})),t}function O(){e.forEachNode((function(e){var t=r.getNodePosition(e.id),n=d.get(e.id);n.position[0]=t.x,n.position[1]=t.y,h.update(n.id,n)}))}function F(){e.forEachNode((function(e){var t=o.get(e.id);if(!t)throw new Error("Missing ui for node: "+e.id);var n=oe(t.position),i=z.TERNARY_COLOR,a={position:n,color:i,size:t.size,id:d.size,name:t.name};d.set(t.name,a),h.add(a),r.setNodePosition(e.id,n[0],n[1])}))}}function ie(e,t,n){var i,o,r,a,s,c,u,d,l=0,h=e.getScene();return{startZoomOut:f,startZoomIn:v,startFadeOut:m,startSceneRestoration:g,dispose:function(){cancelAnimationFrame(i)}};function f(e){l=0,r=p();var t=n.width,c=n.height,u=n.top,d=n.left;a={top:u,left:d,right:d+t,bottom:u+c},o=b,s=function(){m(),e()},cancelAnimationFrame(i),i=requestAnimationFrame(w)}function v(e,t){o=b,l=0,r=p(),a=e,cancelAnimationFrame(i),i=requestAnimationFrame(w),s=null,t&&(s=t)}function p(){var e=h.getDrawContext(),t=e.view.position,n=t[2]*Math.tan(e.fov/2)/e.pixelRatio;return{left:t[0]-n,right:t[0]+n,top:t[1]-n,bottom:t[1]+n}}function m(){e.getNamedGroup(H.MainGraph).elements.forEach((function(e){e.opacity=0})),e.hideNamedGroup(H.MainGraph)}function g(t,n,r,a,s){if(s)return e.restoreNamedGroup(H.MainGraph),e.getNamedGroup(H.MainGraph).elements.forEach((function(e){e.opacity=1})),void t();l=0,o=x,cancelAnimationFrame(i),i=requestAnimationFrame(w),c=t,d=a,u=[],n.forEach((function(e,t){u.push({ui:e,from:oe(e.position),to:r.get(t).position})}))}function w(){if(l>=t)return l=t,void o(1);i=requestAnimationFrame(w),o(l/t),l+=1}function b(e){if(1===e)return s&&s(),void(s=null);h.setViewBox({top:y(r.top,a.top,e),left:y(r.left,a.left,e),right:y(r.right,a.right,e),bottom:y(r.bottom,a.bottom,e)}),h.renderFrame()}function y(e,t,n){return t*n+e*(1-n)}function x(t){0===t&&e.restoreNamedGroup(H.MainGraph);var n=te.easeInQuart(t);e.getNamedGroup(H.MainGraph).elements.forEach((function(e){e.opacity=n})),u.forEach((function(e){var n=e.ui;n.position[0]=y(e.from[0],e.to[0],t),n.position[1]=y(e.from[1],e.to[1],t),d.update(n.id,n)})),e.getScene().renderFrame(),1===t&&c&&c()}}function oe(e){return[e[0],e[1],e[2]]}function re(e){var t=new Map;return{addToLayer:r,addToNamedGroup:i,hideNamedGroup:o,restoreNamedGroup:n,getNamedGroup:function(e){return t.get(e)},getScene:function(){return e}};function n(e){var n=t.get(e);if(void 0===n)throw new Error("No such group: "+e);n.isHidden&&(n.isHidden=!1,n.elements.forEach((function(e){r(e,e.layer)})))}function i(e,n){var i=t.get(n);void 0===i&&(i={elements:[],isHidden:!1},t.set(n,i)),i.elements.push(e)}function o(e){var n=t.get(e);if(!n)throw new Error("No group with such name: "+e);n.isHidden||(n.isHidden=!0,n.elements.forEach((function(e){e.parent&&e.parent.removeChild(e)})))}function r(t,n){t.layer=n;var i=e.getRoot(),o=null;i.children.forEach((function(e){var t=e.layer;void 0===t&&(console.warn("Scene element without layer index",t),t=0),t<=n&&(o=e)})),o?i.insertChildAfter(t,o):i.appendChild(t,!0)}}n("9129");var ae=[[0,0],[1,0],[1,1],[1,1],[0,1],[0,0]],se=function(e){Object(C["a"])(n,e);var t=Object(_["a"])(n);function n(e,i){var o;Object(y["a"])(this,n);var r=Object(c["h"])({gl:e,capacity:i.capacity,vertex:"\n  uniform mat4 modelViewProjection;\n  attribute vec3 point;\n  attribute vec2 texCoordinate;\n  attribute vec4 color;\n  varying vec3 vPoint;\n  varying vec2 vTex;\n  varying vec4 vColor;\n\n  void main() {\n    vec4 pos = modelViewProjection * vec4(point, 1.0);\n    gl_Position = pos;\n    vPoint = point;\n    vTex = texCoordinate;\n    vColor = color.abgr;\n  }",fragment:"\n      precision highp float;\n      uniform vec3 camera;\n      varying vec3 vPoint;\n      varying vec2 vTex;\n      varying vec4 vColor;\n\n      void main() {\n        vec4 col = vec4(0);\n        col += length(smoothstep(0.48, 0.5, abs(vTex - 0.5)));\n        col += vColor;\n        col[3] = 0.7;\n        gl_FragColor = col;\n      }",attributes:{color:new c["a"]},preDrawHook:function(){return"\n          // gl.disable(gl.BLEND);\n          gl.enable(gl.DEPTH_TEST);\n          gl.depthFunc(gl.LEQUAL);\n          "},postDrawHook:function(){return"\n          //gl.enable(gl.BLEND);\n           gl.disable(gl.DEPTH_TEST);\n           "}});return o=t.call(this,r),o.uiIDToUI=new Map,o}return Object(x["a"])(n,[{key:"draw",value:function(e,t){this.uniforms||(this.uniforms={modelViewProjection:this.modelViewProjection,camera:t.view.position}),this.uniforms.opacity=this.opacity,this.program.draw(this.uniforms)}},{key:"setColor",value:function(e,t){this.setFaceColor(e.front,t),this.setFaceColor(e.left,t),this.setFaceColor(e.right,t),this.setFaceColor(e.back,t)}},{key:"setFaceColor",value:function(e,t){var n=this;e.forEach((function(e){e.color=t,n.update(e.uiId,e)}))}},{key:"addBox",value:function(e){var t,n,i,o,r,a=this.getFace(e.width,e.height);this.rotateFace(a,Math.PI/2,"x"),this.translateFace(a,[0,0,e.height/2]),this.rotateFace(a,Math.PI/2,"z"),this.translateFace(a,[e.x+e.width/2,e.y,0]),t=this.addFace(a),t.name="front";var s=this.getFace(e.width,e.height);this.rotateFace(s,Math.PI/2,"x"),this.translateFace(s,[0,0,e.height/2]),this.translateFace(s,[0,-e.width/2,0]),this.translateFace(s,[e.x,e.y,0]),n=this.addFace(s),n.name="left";var c=this.getFace(e.width,e.height);this.rotateFace(c,Math.PI/2,"x"),this.translateFace(c,[0,0,e.height/2]),this.rotateFace(c,Math.PI,"z"),this.translateFace(c,[0,e.width/2,0]),this.translateFace(c,[e.x,e.y,0]),i=this.addFace(c),i.name="right";var u=this.getFace(e.width,e.height);this.rotateFace(u,Math.PI/2,"x"),this.translateFace(u,[0,0,e.height/2]),this.rotateFace(u,-Math.PI/2,"z"),this.translateFace(u,[-e.width/2,0,0]),this.translateFace(u,[e.x,e.y,0]),o=this.addFace(u),o.name="back";var d=this.getFace(e.width,e.width);return this.translateFace(d,[e.x,e.y,e.height]),r=this.addFace(d),{front:t,left:n,right:i,back:o,top:r}}},{key:"removeBox",value:function(e){this.removeFace(e.front),this.removeFace(e.left),this.removeFace(e.right),this.removeFace(e.back)}},{key:"translateFace",value:function(e,t){e.forEach((function(e){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}))}},{key:"rotateFace",value:function(e,t,n){var i=Math.cos(t),o=Math.sin(t);e.forEach((function(e){var t,r,s,c=Object(a["a"])(e,3),u=c[0],d=c[1],l=c[2];if("z"===n)t=i*u-o*d,r=o*u+i*d,s=l;else if("y"===n)t=u*i+l*o,r=d,s=-u*o+l*i;else{if("x"!==n)throw new Error("Not supported axis "+n);t=u,r=d*i-l*o,s=d*o+l*i}e[0]=t,e[1]=r,e[2]=s}))}},{key:"getFace",value:function(e,t){return[[-e/2,-t/2,0],[+e/2,-t/2,0],[+e/2,+t/2,0],[+e/2,+t/2,0],[-e/2,+t/2,0],[-e/2,-t/2,0]]}},{key:"addFace",value:function(e){var t=this;return e.map((function(e,n){var i={point:e,uiId:-1,color:690762751,texCoordinate:ae[n]};return i.uiId=t.add(i),t.uiIDToUI.set(i.uiId,i),i}))}},{key:"removeFace",value:function(e){var t=this;e.forEach((function(e){var n=e.uiId,i=t.remove(n),o=t.uiIDToUI.get(i);if(!o)throw new Error("Missing ui element");t.uiIDToUI.delete(i),i!==n&&(o.uiId=n,t.uiIDToUI.set(n,o))}))}},{key:"clear",value:function(){throw new Error("Not implemented")}}]),n}(c["d"]),ce=n("82e0");function ue(e,t,n,i){var o,r,s,u,d={enter:C,exit:k,dispose:x,lookAt:y},l=new Set,h=0,f=new Map,v=new Map,g=0,b=new c["b"]({seeThrough:!0});return d;function y(t){var i=n.get(t);if(i){var o=Object(a["a"])(i.position,2),r=o[0],s=o[1],c=i.size||10,u=Math.tan(e.getDrawContext().fov/2),d=e.getCameraController();d.lookAt([r,s-2*c/u,4],[r,s,c])}}function x(){cancelAnimationFrame(u),u=0,clearTimeout(h),e.removeChild(r),e.removeChild(b)}function C(){var n=e.setCameraController(c["i"]);y(i),n.setMoveSpeed(10).setScrollSpeed(100).setFlySpeed(2).enableMouseCapture(!0),o=Object(c["f"])(document.body,n),s=t.all(),r=new se(e.getGL(),{capacity:5*s.length*6}),e.appendChild(r),e.appendChild(b),_(i),I()}function _(e){var i=n.get(e);if(i){var o=Object(a["a"])(i.position,2),s=o[0],c=o[1],u=$()(t,s,c,60);u.forEach((function(e){var t=e.ui,n=Object(a["a"])(t.position,2),i=n[0],o=n[1],s=r.addBox({x:i,y:o,width:t.size,height:2*t.size});f.set(t,s)})),S()}}function S(){var t=0;function n(){var i=0;while(t<s.length&&i<1e3){var o=s[t],c=o.ui;if(t+=1,!f.has(c)){var d=Object(a["a"])(c.position,2),l=d[0],h=d[1],v=r.addBox({x:l,y:h,width:c.size,height:2*c.size});f.set(c,v),i+=1}}e.renderFrame(),t<s.length?(m((function(){return{message:"Initializing street view: "+w(t)+"/"+w(s.length)}})),u=requestAnimationFrame(n)):(m((function(){return{streetViewDone:!0}})),e.on("transform",T),u=0)}u=requestAnimationFrame(n)}function k(){v.forEach((function(e,t){return P(t)})),o.dispose(),e.off("transform",T),e.setCameraController(c["k"]),e.removeChild(r)}function E(e,t){var n=v.get(t);if(!n||e!==n.face){n&&n.face&&b.removeChild(n.dom);var i=e[0].point,o=e[1].point,r=e[2].point,a=o[0]-i[0],s=o[1]-i[1],u=Math.sqrt(a*a+s*s),d=new c["c"]({width:"400px",height:"800px"}),l=u/400,h=(i[0]+o[0])/2,f=(i[1]+o[1])/2,m=(i[2]+r[2])/2,g=ce["c"].cross([],[o[0]-i[0],o[1]-i[1],o[2]-i[2]],[r[0]-i[0],r[1]-i[1],r[2]-i[2]]);le(g,g);var w=ce["b"].rotationTo([],[0,0,1],g);"back"===e.name?ce["b"].rotateZ(w,w,-Math.PI/2):"front"===e.name?ce["b"].rotateZ(w,w,Math.PI/2):"right"===e.name&&ce["b"].rotateZ(w,w,Math.PI),ce["a"].fromRotationTranslationScale(d.model,w,[h,f,m],[l,l,l]),d.worldTransformNeedsUpdate=!0,p.fire("append-dom",{name:t,dom:d.el}),b.appendChild(d),v.set(t,{face:e,dom:d})}}function P(e){var t=v.get(e);t&&(p.fire("remove-dom",{name:e,dom:t.dom.el}),b.removeChild(t.dom),v.delete(e))}function T(t){var n=t.drawContext,i=n.view.position[2];i<10&&(n.view.position[2]=10,t.updated=!0);var o=3+14*de(0,3e3,i);e.getCameraController().setMoveSpeed(o),I()}function I(){clearTimeout(h);var e=window.performance.now(),t=e-g;t<500?h=setTimeout(L,t):L()}function L(){g=window.performance.now();var t=e.getDrawContext(),n=t.view.position,i=t.view.center,o=j(n,i),r=O(n,o,10,35);if(r=r.map((function(e){var t=e.ui.position[0]-n[0],i=e.ui.position[1]-n[1],o=t*t+i*i;return{ui:e.ui,size:e.ui.size,dist:o}})).sort((function(e,t){return t.size/t.dist-e.size/e.dist})).slice(0,4),r.length){var s=new Set;r.forEach((function(e){f.has(e.ui)&&s.add(e.ui)})),l.forEach((function(e){s.has(e)||P(e.name)}));var c=[];s.forEach((function(e){var t=f.get(e);if(!t)throw new Error("missing ui");var n=1/0,i=t.front;n=h(t,t.front);var o=h(t,t.back);o<n&&(n=o,i=t.back),o=h(t,t.left),o<n&&(n=o,i=t.left),o=h(t,t.right),o<n&&(n=o,i=t.right),Number.isFinite(n)&&c.push({t:n,face:i,name:e.name})})),l=s,c.sort((function(e,t){return e.t-t.t}));for(var u=Math.min(10,c.length),d=0;d<u;++d)E(c[d].face,c[d].name);e.renderFrame()}function h(e,t){var i=t[0].point,o=t[1].point;return v(n,i,o)}function v(e,t,n){var i=Object(a["a"])(e,2),o=i[0],r=i[1],s=Object(a["a"])(t,2),c=s[0],u=s[1],d=n[0]-t[0],l=n[1]-t[1],h=c+.5*d,f=u+.5*l,v=j(e,[h,f]),p=Object(a["a"])(v,2),m=p[0],g=p[1],w=(m*(u-r)+g*(o-c))/(d*g-l*m),b=(c+d*w-o)/m;return Number.isNaN(b)?0:(b<0&&(b=1/0),b)}}function j(e,t){var n=[t[0]-e[0],t[1]-e[1]],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(!(i<.001))return n[0]/=i,n[1]/=i,n}function O(e,n,i,o){return n?$()(t,e[0],e[1],i,r):[];function r(t){var i=(t.minX+t.maxX)/2,r=(t.minY+t.maxY)/2,a=j(e,[i,r]);if(!a)return!1;var s=n[0]*a[0]+n[1]*a[1],c=Math.acos(s);return c<o*Math.PI/180}}}function de(e,t,n){var i=Math.max(0,Math.min(1,(n-e)/(t-e)));return i*i*(3-2*i)}function le(e,t){var n=t[0],i=t[1],o=t[2],r=n*n+i*i+o*o;return r>0&&(r=1/Math.sqrt(r)),e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function he(e){var t,n,i,o=!1,r=!1,u=we(),d=N();window.fuzzySearcher=d;var l,v,y,x=V.query,C=new S(u.getGL()),_=new P(u.getGL(),{color:306283172,opacity:1}),k=new I(u.getGL()),E=new j(u.getGL()),T=fe(),L=[],O=new Map,F=new Map,M=new Map,D=new Map,G=g(m,100,window),A=re(u);A.addToLayer(_,R.Polygons),A.addToLayer(C,R.Nodes),A.addToLayer(k,R.Text),A.addToLayer(E,R.Labels),A.addToNamedGroup(_,H.MainGraph),A.addToNamedGroup(C,H.MainGraph),A.addToNamedGroup(k,H.MainGraph),A.addToNamedGroup(E,H.MainGraph);var q=U(A,{elementsGroupName:H.MainGraph,onTransform:function(){y||V.saveScenePosition(u)},getGraph:function(){return l&&l.getGraph()},getHighlightedNodes:B,getHighlightedLinks:$});return p.on("focus-node",J),p.on("unfocus",ee),p.on("exit-subgraph",te),{loadSVG:ie,focus:function(){e.focus()},isStreetViewMode:function(){return r},dispose:X,showRelated:Z,showStreetView:Q,exitStreetView:Y,getScene:function(){return u}};function B(e){var t=l&&l.getGraph();if(!t)return[];var n=F.get(e.componentId),i=Object(s["a"])({},O.get(e.name));i.color=z.PRIMARY_HIGHLIGHT_COLOR;var o=[i];return t.forEachLinkedNode(e.name,(function(e){var t=Object(s["a"])({},O.get(e.id));t.color=z.SECONDARY_HIGHLIGHT_COLOR,o.push(t),n.has(e.id)})),o}function $(e){var t=l&&l.getGraph();if(!t)return[];var n,i=10,o=F.get(e.componentId),r=M.get(e.componentId),a=[];return o.forEach((function(s){n=0,t.forEachLinkedNode(s,(function(t){if(o.has(t.id)){var c=s===e.name||t.id===e.name;n>i&&!c||(a.push({from:O.get(s).position,to:O.get(t.id).position,color:c?4294967295:r,isFirstLevel:c}),n+=1)}}))})),a}function Q(e){r=!0;var n=y?y.getPointerEvents():q;if(!i){var o=y?y.getNameToUI():O;i=ue(u,n.getIndex(),o,e)}C.hide(),n.setPaused(!0),t=u.getDrawContext().view.position[2],i.enter()}function Y(){C.show(),i.exit(),i.dispose(),i=null,u.getDrawContext().view.position[2]=t,u.getCameraController().setViewBox();var e=y?y.getPointerEvents():q;e.setPaused(!1),r=!1,n&&n.focus()}function K(e){if(!r){var t=O.get(e);if(!t)return;var n=Object(a["a"])(t.position,2),o=n[0],s=n[1],c=t.size||10;return c*=2,u.setViewBox({left:o-c,top:s-c,right:o+c,bottom:s+c}),t}i.lookAt(e)}function Z(e){var t=h()();t.addNode(e,{isRoot:!0});var n=l.getGraph(),i=new Set;function o(e,t){n.forEachLinkedNode(e,(function(e){t.add(e.id)}))}function r(){y=ne(t,v,A,O),y.run()}o(e,i),Array.from(i).forEach((function(e){o(e,i)})),i.forEach((function(o){var r=t.getNode(o);if(!r||!r.data){var a=n.hasLink(o,e)||n.hasLink(t,o);t.addNode(o,{isFirstChild:a})}n.forEachLinkedNode(o,(function(n,o){if(i.has(n.id)&&!t.hasLink(o.fromId,o.toId)){var r=o.fromId===e||o.toId===e;t.addLink(o.fromId,o.toId,{isRootLevel:r})}}))})),q.setPaused(!0),y&&(y.dispose(),y=null),r()}function X(){l&&l.dispose(),p.off("focus-node",J),p.off("unfocus",ee),p.off("exit-subgraph",te),q.dispose(),u.dispose()}function J(e){var t=K(e);t&&(y&&(y.dispose((function(){q.setPaused(!1)})),y=null),q.focusUI(t),u.renderFrame(),n&&n.focus())}function ee(){q.clearHighlights(),u.renderFrame()}function te(){y&&(y.dispose((function(){q.setPaused(!1)})),y=null,n&&n.focus())}function ie(e){l&&l.dispose(),l=b(e).on("element-start",oe).on("element-end",ae).load()}function oe(e){if("svg"===e.tagName){var t=(e.attributes.get("viewBox")||"0 0 1024 1024").split(" ").map((function(e){return Number.parseFloat(e)})).filter(ve);if(4!==t.length)throw new Error("Unknown viewBox definition: "+e.attributes.get("viewBox"));v={left:t[0],top:t[1],width:t[2],height:t[3]},o||u.setViewBox({left:v.left,top:v.top,right:v.left+v.width,bottom:v.top+v.height})}else if("path"===e.tagName)he(e);else if("circle"===e.tagName)ce(e);else{var n=e.attributes.get("transform");n&&T.pushTransform(n)}}function ae(e){var t=e.attributes.get("transform");t&&T.popTransform(t),"text"===e.tagName&&e.innerText&&se(e)}function se(e){var t=pe(e,"font-size"),n=Math.floor(255*(e.attributes.has("fill-opacity")?pe(e,"fill-opacity"):.2)),i=0;e.attributes.has("fill")&&(i=ge(Object(f["getElementFillColor"])(e))),i=4294967040&i|n,E.addText({x:pe(e,"x"),y:le(pe(e,"y")-t),color:i,text:e.innerText,fontSize:t})}function ce(e){var t=pe(e,"cx"),n=le(pe(e,"cy")),i=pe(e,"r"),o=me(e,"id");if("_"===o[0]&&(o=o.substr(1)),O.has(o))throw new Error("Duplicate node name "+o);var r=me(e.parent,"id"),a=F.get(r);a||(a=new Set,F.set(r,a)),a.add(o);var s=T.transform(t,n),c={componentId:r,position:s,color:3705462015,size:2*i,id:L.length,name:o};O.set(o,c),L.push(c),q.addNode(c),C.add(c),k.addText({x:s[0],y:s[1]-i,text:o,limit:3.14*i,cx:.5}),d.addWord(o),G(de),u.renderFrame(),x&&o===x&&V.query===x&&!V.userTypedSomething&&p.fire("show-subreddit",o)}function de(){return{message:"Loaded "+w(O.size)+" subreddits..."}}function le(e){return v.height+v.top-e}function he(e){var t=be(e),n=t.points,i=t.color;_.addPolygon({polygon:n,color:i});var o=e.attributes.get("id"),r=o&&o.substr(1)||"";D.set(r,i),M.set(r,W(i)),u.renderFrame()}function we(){n=document.querySelector("#events-input");var t=Object(c["g"])(e,{allowPinchRotation:!1,inputTarget:n,near:10,maxZoom:15e5,minZoom:50,useDeviceOrientation:!1});t.setClearColor(15/255,15/255,15/255,0);var i=V.getCameraPosition();if(i){var r=t.getDrawContext().view.position;r[0]=i[0],r[1]=i[1],r[2]=i[2],t.getCameraController().setViewBox(),o=!0}else{var a=500;t.setViewBox({left:-a,top:-a,right:a,bottom:a})}return t}function be(e){var t=Object(f["getPointsFromPathData"])(e.attributes.get("d")).map((function(e){var t=Object(a["a"])(e,2),n=t[0],i=t[1],o=T.transform(n,le(i)),r=Object(a["a"])(o,2),s=r[0],c=r[1];return[s,c]})),n=ge(Object(f["getElementFillColor"])(e));return{points:t,color:n}}}function fe(){var e=!1,t=0,n=0,i=[];return{pushTransform:o,popTransform:r,transform:s};function o(t){e=!0,i.push(a(t))}function r(){if(0===i.length)throw new Error("Nothing to pop");i.pop(),e=!0}function a(e){var t=e.match(/matrix\((.+)\)$/i);if(!t)throw new Error("Unknown transformation record: "+e);var n=t[1].split(",").map((function(e){return Number.parseFloat(e)})).filter(ve);if(6!==n.length)throw new Error("Only matrix(a,b,c,d,e,f) is supported at the moment");return n}function s(e,i){return c(),[e+t,i-n,0]}function c(){e&&(t=0,n=0,i.forEach((function(e){t+=e[4],n+=e[5]})),e=!1)}}function ve(e){return Number.isFinite(e)}function pe(e,t){var n=Number.parseFloat(e.attributes.get(t));if(!Number.isFinite(n))throw new Error("Element "+e.tagName+" does not have a finite numeric attribute "+t);return n}function me(e,t){return e.attributes.get(t)||""}function ge(e){return e[0]<<24|e[1]<<16|e[2]<<8|255}var we,be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" "+e._s(e.data.data)+" ")])},ye=[],xe={props:["data"],data:function(){return{}},methods:{}},Ce=xe,_e=n("2877"),Se=Object(_e["a"])(Ce,be,ye,!1,null,null,null),ke=Se.exports,Ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hideSuggestions,expression:"hideSuggestions"}],staticClass:"ak-typeahead"},[n("a",{staticClass:"menu-opener",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.menuClicked(t)}}},[n("svg",{staticClass:"feather feather-info",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[n("circle",{attrs:{cx:"12",cy:"12",r:"10"}}),n("line",{attrs:{x1:"12",y1:"16",x2:"12",y2:"12"}}),n("line",{attrs:{x1:"12",y1:"8",x2:"12.01",y2:"8"}})])]),n("input",{ref:"input",attrs:{autofocus:"",type:"text",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",placeholder:e.placeholder},domProps:{value:e.currentQuery},on:{input:e.handleInput,keydown:e.cycleTheList}}),e.currentQuery||e.showClearButton?n("a",{staticClass:"search-submit",attrs:{type:"submit",href:"#"},on:{click:function(t){return t.preventDefault(),e.clearSearch(t)}}},[n("svg",{staticClass:"feather feather-x-circle",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[n("circle",{attrs:{cx:"12",cy:"12",r:"10"}}),n("line",{attrs:{x1:"15",y1:"9",x2:"9",y2:"15"}}),n("line",{attrs:{x1:"9",y1:"9",x2:"15",y2:"15"}})])]):e._e(),e.showSuggestions?n("ul",{staticClass:"suggestions"},e._l(e.suggestions,(function(t,i){return n("li",{key:i},[n("a",{staticClass:"suggestion",class:{selected:t.selected},attrs:{href:"#"},domProps:{innerHTML:e._s(t.html)},on:{click:function(n){return n.preventDefault(),e.pickSuggestion(t)}}})])})),0):e._e(),e.showLoading?n("ul",{staticClass:"suggestions"},[n("li",{staticClass:"searching"},[e.loadingError?e._e():n("span",[e._v("Searching...")]),e.loadingError?n("div",{staticClass:"loading-error"},[n("div",[e._v("Failed to get reddit completions:")]),n("pre",[e._v(e._s(e.loadingError))])]):e._e()])]):e._e()])},Pe=[],Te=(n("7db0"),n("a434"),[]),Ie="@@clickoutsideContext",Le=0;function je(e,t,n){return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n&&n.context&&i.target&&o.target&&!e.contains(i.target)&&!e.contains(o.target)&&e!==i.target&&(!n.context.popperElm||!n.context.popperElm.contains(i.target)&&!n.context.popperElm.contains(o.target))){var r=e[Ie].methodName;t.expression&&r&&n.context[r]?n.context[r]():e[Ie].bindingFn&&e[Ie].bindingFn()}}}document.addEventListener("mousedown",(function(e){return we=e})),document.addEventListener("mouseup",(function(e){Te.forEach((function(t){return t[Ie].documentHandler(e,we)}))})),document.addEventListener("touchstart",(function(e){we=e})),document.addEventListener("touchend",(function(e){Te.forEach((function(t){return t[Ie].documentHandler(e,we)}))}));var Oe={bind:function(e,t,n){Te.push(e);var i=Le++;e[Ie]={id:i,documentHandler:je(e,t,n),methodName:t.expression,bindingFn:t.value}},update:function(e,t,n){e[Ie].documentHandler=je(e,t,n),e[Ie].methodName=t.expression,e[Ie].bindingFn=t.value},unbind:function(e){for(var t=Te.length,n=0;n<t;n++)if(Te[n][Ie].id===e[Ie].id){Te.splice(n,1);break}delete e[Ie]}},Fe={directives:{ClickOutside:Oe},props:{placeholder:{default:"Type here"},showClearButton:{default:!1},query:{default:""},delay:{default:80}},data:function(){return{currentSelected:-1,showSuggestions:!1,showLoading:!1,loadingError:null,suggestions:[],currentQuery:this.query}},watch:{query:function(e){this.currentQuery=e}},methods:{refresh:function(){this.showSuggestions&&this.getSuggestionsInternal()},menuClicked:function(){this.$emit("menuClicked")},hideSuggestions:function(){this.showSuggestions=!1,this.showLoading=!1,this.pendingKeyToShow=!0},showIfNeeded:function(e){this.pendingKeyToShow||(this.showSuggestions=e)},focus:function(){this.$refs.input.focus()},pickSuggestion:function(e){this.currentQuery=e.text,this.hideSuggestions(),this.$emit("selected",this.currentQuery)},clearSearch:function(){var e={shouldProceed:!0};this.$emit("beforeClear",e),e.shouldProceed&&(this.currentQuery="",this.getSuggestionsInternal(),this.$emit("cleared"))},handleInput:function(e){this.currentQuery=e.target.value,this.$emit("inputChanged"),this.getSuggestionsInternal()},getSuggestionsInternal:function(){var e=this;e.previous&&(window.clearTimeout(e.previous),e.previous=null),e.currentQuery?e.previous=window.setTimeout((function(){var t=window.fuzzySearcher.find(e.currentQuery);if(Array.isArray(t))e.suggestions=t.map((function(e){return{selected:!1,text:e.text,html:e.html}})),e.currentSelected=-1,e.showIfNeeded(t&&t.length>0);else{if(!t)throw new Error("Could not parse suggestions response");e.loadingError=null,t.then((function(t){e.showLoading=!1,t=t||[],e.suggestions=t.map((function(e){return{selected:!1,text:e.text,html:e.html}})),e.currentSelected=-1,e.showIfNeeded(t&&t.length>0)}),(function(t){e.loadingError=t}))}}),e.delay):this.showSuggestions=!1},cycleTheList:function(e){var t,n=this.suggestions,i=this.currentSelected;if(this.pendingKeyToShow=!1,38===e.which)t=-1;else if(40===e.which)t=1;else{if(13===e.which)return n[i]?this.pickSuggestion(n[i]):this.pickSuggestion({text:this.currentQuery}),void e.preventDefault();27===e.which&&this.hideSuggestions()}t&&0!==n.length&&(e.preventDefault(),i>=0&&(this.suggestions[i].selected=!1),i+=t,i<0&&(i=n.length-1),i>=n.length&&(i=0),this.suggestions[i].selected=!0,this.currentSelected=i)}}},Ne=Fe,Me=(n("234b"),Object(_e["a"])(Ne,Ee,Pe,!1,null,null,null)),De=Me.exports,Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sidebar"},[n("div",{staticClass:"row"},[n("h3",[e._v("Map of Reddit")]),n("a",{staticClass:"close-btn",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onClose(t)}}},[n("svg",{staticClass:"feather feather-x-circle",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[n("circle",{attrs:{cx:"12",cy:"12",r:"10"}}),n("line",{attrs:{x1:"15",y1:"9",x2:"9",y2:"15"}}),n("line",{attrs:{x1:"9",y1:"9",x2:"15",y2:"15"}})])])]),e._m(0)])},Ve=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("p",[e._v(" Each dot is a subreddit. Two dots within the same cluster are usually close to each other if multiple users frequently leave comments on both subreddits. ")]),n("p",[e._v(" If you find something missing, please feel free to "),n("a",{staticClass:"accent",attrs:{href:"https://github.com/anvaka/map-of-reddit-data#how-to-add-a-new-subreddit",target:"_blank"}},[e._v("edit the map")]),e._v(". ")]),n("p",[e._v(" I spent last couple years developing this website as a hobby project. If you enjoy this work please support it "),n("a",{staticClass:"accent",attrs:{href:"https://www.patreon.com/anvaka"}},[e._v("on Patreon")]),e._v(" or "),n("a",{staticClass:"accent",attrs:{href:"https://github.com/sponsors/anvaka"}},[e._v("GitHub")]),e._v(" and I promise to not disappoint you with new features :). ")]),n("p",[e._v(" Please follow me on Twitter to stay in touch: "),n("a",{staticClass:"accent",attrs:{href:"https://twitter.com/anvaka"}},[e._v("https://twitter.com/anvaka")]),e._v(". ")]),n("p",[e._v(" Thank you for your interest and support! ")])])}],ze={mounted:function(){window.addEventListener("keydown",this.handleKeyDown)},beforeDestroy:function(){window.removeEventListener("keydown",this.handleKeyDown)},methods:{onClose:function(){this.$emit("close")},handleKeyDown:function(e){27===e.which&&this.onClose()}}},Re=ze,He=Object(_e["a"])(Re,Ge,Ve,!1,null,null,null),Ae=He.exports,qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h3",[e._v("Improve this map")]),n("a",{staticClass:"close-btn",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onClose(t)}}},[n("svg",{staticClass:"feather feather-x-circle",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[n("circle",{attrs:{cx:"12",cy:"12",r:"10"}}),n("line",{attrs:{x1:"15",y1:"9",x2:"9",y2:"15"}}),n("line",{attrs:{x1:"9",y1:"9",x2:"15",y2:"15"}})])]),n("p",[e._v("The entire website is open source. You can contribute in multiple ways:")]),e._m(0),e._v(" Thank you for your support! "),n("br"),e._v(" ♥️ Anvaka ")])},Be=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[e._v(" Discuss this product on our own subreddit: "),n("a",{staticClass:"accent",attrs:{href:"https://www.reddit.com/r/MofR/"}},[e._v("/r/MofR")])]),n("li",[e._v("Support this work "),n("a",{staticClass:"accent",attrs:{href:"https://www.patreon.com/anvaka"}},[e._v("on Patreon")]),e._v(" or "),n("a",{staticClass:"accent",attrs:{href:"https://github.com/sponsors/anvaka"}},[e._v("GitHub")]),e._v(". There is a lot of things I'd love to improve about this project, but without your support I wouldn't know if I'm moving in the right direction. ")]),n("li",[e._v(" Add new subreddits or update positions of existing ones if you found an issue. Please follow instructions "),n("a",{staticClass:"accent",attrs:{href:"https://github.com/anvaka/map-of-reddit-data#how-to-add-a-new-subreddit",target:"_blank"}},[e._v("here")]),e._v(". ")]),n("li",[e._v("If you found a rendering bug - consider reporting it or fixing it "),n("a",{staticClass:"accent",attrs:{href:"https://github.com/anvaka/map-of-reddit",target:"_blank"}},[e._v("here")]),e._v(". ")]),n("li",[e._v(" Share your suggestions and follow me on Twitter. My direct messages are open: "),n("a",{staticClass:"accent",attrs:{href:"https://twitter.com/anvaka"}},[e._v("https://twitter.com/anvaka")])])])}],$e={mounted:function(){window.addEventListener("keydown",this.handleKeyDown)},beforeDestroy:function(){window.removeEventListener("keydown",this.handleKeyDown)},methods:{onClose:function(){this.$emit("close")},handleKeyDown:function(e){27===e.which&&this.onClose()}}},Qe=$e,Ue=Object(_e["a"])(Qe,qe,Be,!1,null,null,null),We=Ue.exports,Ye=n("8417"),Ke=n.n(Ye),Ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{staticClass:"small-preview-container",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showFullPreview(t)}}},[n("div",{staticClass:"header"},[n("span",[e._v("r/"+e._s(e.name))]),e.details?n("span",{staticClass:"subscribers-count"},[e._v(e._s(e.details.subscribers)+" members · "+e._s(e.details.active)+" active")]):e._e()]),e.loading?n("loading-icon"):e._e(),e.details&&e.details.image?n("img",{staticClass:"community-icon",attrs:{src:e.details.image.icon}}):e._e(),e.details?n("div",{staticClass:"info"},[e._v(e._s(e.details.description))]):e._e()],1)},Xe=[],Je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"loader",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:"28",height:"28",fill:"white"}},[n("path",{attrs:{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}}),n("path",{attrs:{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"}},[n("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"0.8s",repeatCount:"indefinite"}})],1)])},et=[],tt={},nt=Object(_e["a"])(tt,Je,et,!1,null,null,null),it=nt.exports,ot={name:"SmallPreview",props:["name"],components:{LoadingIcon:it},data:function(){return{loading:!0,details:null}},watch:{name:function(){this.getSubredditInfo()}},mounted:function(){this.getSubredditInfo()},methods:{showFullPreview:function(){p.fire("show-subreddit",this.name,!0)},getSubredditInfo:function(){var e=this,t=this.name;this.details=null,this.loading=!0,fetch("https://www.reddit.com/r/"+t+"/about.json",{mode:"cors"}).then((function(e){return e.json()})).then((function(n){if(e.name===t){var i=n.data,o=i.public_description,r=i.display_name_prefixed,a=w(i.subscribers),s=w(i.accounts_active);e.loading=!1;var c=null,u=i.icon_img||i.community_icon;if(u){var d=i.banner_img||i.banner_background_image;c={icon:u.split("?")[0],banner:d?d.split("?")[0]:null}}i.over18&&!window.ageConfirmed&&(c=null),e.details={description:o,displayName:r,subscribers:a,active:s,image:c}}}))}}},rt=ot,at=(n("1747"),Object(_e["a"])(rt,Ze,Xe,!1,null,null,null)),st=at.exports;function ct(e){window.addEventListener("mousedown",n,!0),window.addEventListener("wheel",n,!0),window.addEventListener("touchstart",n,!0),window.addEventListener("keydown",n,!0);var t=!1;return i;function n(){t||(t=!0,e())}function i(){window.removeEventListener("mousedown",n,!0),window.removeEventListener("wheel",n,!0),window.removeEventListener("touchstart",n,!0),window.removeEventListener("keydown",n,!0)}}var ut=i["a"].extend(Ke.a),dt=new Map,lt={components:{Tooltip:ke,Typeahead:De,Subreddit:Ke.a,Sidebar:Ae,ImproveWindow:We,SmallPreview:st},name:"app",methods:{showRelated:function(){this.scene.showRelated(this.subreddit),this.isSubgraphLayoutInProgress=!0,ht()&&(this.smallPreview=this.subreddit,this.subreddit=null)},showStreetView:function(){this.scene.showStreetView(this.subreddit),this.subreddit=null,this.tooltip=null,this.isStreetViewMode=!0,this.isStreetViewInProgress=!0},onExitStreetView:function(){this.isStreetViewInProgress=!1,this.scene.exitStreetView(),this.isStreetViewMode=!1},findSubreddit:function(e){V.query=e,this.onSubmit()},closeSubredditOnSmallScreen:function(e){V.userTypedSomething=!0,ht()&&this.subreddit&&(e.shouldProceed=!1,this.subreddit=null,this.scene.focus())},onTypeAheadInput:function(){this.typeaheadChanged=!0,V.userTypedSomething=!0},onDeclineAge:function(e){e.preventDefault(),this.closeSubredditViewer()},onBackdropClick:function(){this.sidebarVisible=!1,this.improveVisible=!1},onImproveClick:function(){this.improveVisible=!0},closeSubredditViewer:function(){this.subreddit=null,this.smallPreview=null,V.query="",V.saveQuery(V.query),p.fire("unfocus")},showTooltip:function(e){this.tooltip=e||null},onSubmit:function(){p.fire("focus-node",V.query),V.saveQuery(V.query),this.subgraphName=null},onSubgraphRootClick:function(){p.fire("subgraph-focus-node",this.subgraphName)},onExitSubgraph:function(){p.fire("exit-subgraph"),this.subgraphName=null,this.isSubgraphLayoutInProgress=!1},showSubreddit:function(e,t){this.scene.isStreetViewMode()||(ht()&&!t?this.smallPreview=e:(this.smallPreview=null,this.subreddit=e)),V.query=e,this.tooltip=null,V.saveQuery(V.query)},setProgress:function(e){var t=this;e&&e.mapLoaded?(this.typeaheadChanged||(this.progressMessage=e.error?"Something is likely not right...":"Map is ready to use. Please enjoy"),this.graphLoaded=!0,this.disposeFirstListener=ct((function(){setTimeout((function(){return t.progressMessage=null}),3e3)}))):e&&e.subgraphDone?(this.progressMessage=null,this.subgraphName=e.subgraphName,this.isSubgraphLayoutInProgress=!1):e&&e.streetViewDone?(this.progressMessage=null,this.isStreetViewInProgress=!1):e&&(this.progressMessage=e.message,this.subgraphVisualized=null)},appendDom:function(e){var t=this,n=dt.get(e.name);n&&n.$destroy();var i=document.createElement("div"),o=new ut({propsData:{name:e.name,showFirst:5,sort:this.defaultSort||"hot",time:this.defaultTime||"day"}});o.$on("sortChanged",(function(e){return t.defaultSort=e})),o.$on("timeChanged",(function(e){t.defaultTime=e})),e.dom.appendChild(i);var r=o.$mount(i);dt.set(e.name,r)},removeDom:function(e){var t=dt.get(e.name);t&&(t.$destroy(),dt.delete(e.name))}},data:function(){return{improveVisible:!1,isWebGLEnabled:!1,isStreetViewMode:!1,isSubgraphLayoutInProgress:!1,isStreetViewInProgress:!1,typeaheadChanged:!1,tooltip:null,subgraphName:null,subreddit:null,scene:null,smallPreview:null,sidebarVisible:!1,progressMessage:"",graphLoaded:!1,streetViewEnabled:!1!==V.getQueryState().get("sv"),defaultSort:"hot",defaultTime:"day",appState:V}},mounted:function(){var e=document.getElementById("cnv");if(dt=new Map,this.isWebGLEnabled=Object(c["j"])(e),this.isWebGLEnabled){var t=he(e),n=V.getFilePath();t.loadSVG(n),this.scene=t,p.on("show-tooltip",this.showTooltip),p.on("show-subreddit",this.showSubreddit),p.on("progress",this.setProgress),p.on("append-dom",this.appendDom),p.on("remove-dom",this.removeDom)}},beforeDestroy:function(){this.scene&&this.scene.dispose(),this.disposeFirstListener&&this.disposeFirstListener(),p.off("show-tooltip",this.showTooltip),p.off("show-subreddit",this.showSubreddit),p.off("progress",this.setProgress),p.off("append-dom",this.appendDom),p.off("remove-dom",this.removeDom)}};function ht(){return window.innerWidth<550}var ft=lt,vt=(n("7faf"),Object(_e["a"])(ft,o,r,!1,null,null,null)),pt=vt.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(pt)}}).$mount("#app")},"7faf":function(e,t,n){"use strict";n("b8ff")},b8ff:function(e,t,n){},ea0a:function(e,t,n){},fd76:function(e,t,n){}});
//# sourceMappingURL=app.cc065b2f.js.map