{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/SmallPreview.vue?ffd4","webpack:///./src/components/Typeahead.vue?b7d0","webpack:///./src/App.vue?e4dc","webpack:///./src/lib/bus.js","webpack:///./src/lib/utils.js","webpack:///./src/lib/createSVGLoader.js","webpack:///./src/lib/PointCollection.js","webpack:///./src/lib/PolyLineCollection.js","webpack:///./src/lib/MSDFTextCollection.js","webpack:///./src/lib/ColoredTextCollection.js","webpack:///./src/lib/createFuzzySearcher.js","webpack:///./src/appState.js","webpack:///./src/lib/constants.js","webpack:///./src/lib/LineCollection.js","webpack:///./src/lib/createPointerEventsHandler.js","webpack:///./src/lib/getComplimentaryColor.js","webpack:///./src/lib/createSubgraphVisualizer.js","webpack:///./src/lib/createSceneLayerManager.js","webpack:///./src/lib/BoxCollection.js","webpack:///./src/lib/createStreetView.js","webpack:///./src/lib/createStreamingSVGRenderer.js","webpack:///./src/Tooltip.vue?0307","webpack:///./src/lib/clickOutside.js","webpack:///src/Tooltip.vue","webpack:///./src/Tooltip.vue?d781","webpack:///./src/Tooltip.vue","webpack:///./src/components/Typeahead.vue?793b","webpack:///src/components/Typeahead.vue","webpack:///./src/components/Typeahead.vue?673d","webpack:///./src/components/Typeahead.vue","webpack:///./src/components/Sidebar.vue?f74f","webpack:///src/components/Sidebar.vue","webpack:///./src/components/Sidebar.vue?6485","webpack:///./src/components/Sidebar.vue","webpack:///./src/components/ImproveWindow.vue?d270","webpack:///src/components/ImproveWindow.vue","webpack:///./src/components/ImproveWindow.vue?4cda","webpack:///./src/components/ImproveWindow.vue","webpack:///./src/SmallPreview.vue?1205","webpack:///./src/LoadingIcon.vue?f00f","webpack:///./src/LoadingIcon.vue","webpack:///src/SmallPreview.vue","webpack:///./src/SmallPreview.vue?9cf5","webpack:///./src/SmallPreview.vue","webpack:///./src/lib/createFirstInteractionListener.js","webpack:///src/App.vue","webpack:///./src/App.vue?c53a","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/App.vue?995e"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","jsonpScriptSrc","p","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","isWebGLEnabled","_e","_m","staticClass","_v","_s","progressMessage","subgraphName","isStreetViewMode","on","$event","preventDefault","onSubgraphRootClick","onExitSubgraph","isStreetViewInProgress","onExitStreetView","subreddit","defaultSort","defaultTime","onDeclineAge","slot","showRelated","streetViewEnabled","graphLoaded","isSubgraphLayoutInProgress","showStreetView","onSubmit","appState","query","sidebarVisible","findSubreddit","closeSubredditOnSmallScreen","closeSubredditViewer","onTypeAheadInput","onImproveClick","smallPreview","improveVisible","style","left","tooltip","x","top","y","onBackdropClick","staticRenderFns","bus","eventify","setProgress","msg","fire","debounce","cb","ms","self","handle","lastCall","Date","time","elapsed","arguments","formatNumber","toString","replace","createSVGLoader","url","disposed","graph","createGraph","parseSVGAsync","createStreamingSVGParser","notifyTagOpen","notifyTagClose","api","load","dispose","getGraph","start","performance","now","getLinksCount","getLinkCount","getPathTo","indexOf","baseUrl","URL","pathname","substr","lastIndexOf","fetch","then","response","fetchReader","body","getReader","decoder","TextDecoder","read","processData","progress","decode","stream","done","log","text","txt","labels","split","forEach","label","addNode","fromId","prevBuffer","weight","mapLoaded","tmp","Uint8Array","byteLength","set","lastAvailableByte","Math","floor","view","DataView","buffer","linkId","getInt32","toId","addLink","element","PointCollection","gl","program","defineProgram","vertex","fragment","attributes","color","ColorAttribute","instanced","point","InstancedAttribute","preDrawHook","postDrawHook","opacity","hidden","drawContext","uniforms","modelViewProjection","cameraDistance","position","draw","setCount","GLCollection","PolyLineCollection","options","debug","polygon","flat","triangles","earcut","index","add","MSDFTextCollection","getExtension","getTextProgram","img","msdfImage","Image","crossOrigin","isReady","queue","fontSize","fontInfo","fontPath","json","alphabet","Map","chars","char","charValue","String","fromCharCode","id","_sdfTextureChanged","setTextureCanvas","sdfTextureWidth","width","sdfTextureHeight","height","q","addText","bias","textInfo","z","dx","limit","w","sdfPos","xadvance","info","size","scale","cx","cy","yoffset","charSize","texturePosition","scene","renderFrame","capacity","ColoredTextCollection","fuzzysort","require","createFuzzySearcher","lastPromise","words","addWord","find","word","cancel","goAsync","results","map","html","highlight","pendingSave","qs","state","instance","useSearch","userTypedSomething","getFilePath","saveQuery","newQuery","unset","getQueryState","getCameraPosition","coordinates","v","Number","parseFloat","isFinite","filter","saveScenePosition","dc","getDrawContext","Colors","PRIMARY_HIGHLIGHT_COLOR","SECONDARY_HIGHLIGHT_COLOR","TERNARY_COLOR","TERNARY_LINK","LayerLevels","Polygons","Edges","HighlightedEdges","Nodes","Labels","Text","NamedGroups","MainGraph","LineCollection","createPointerEventsHandler","sceneLayerManager","spatialIndex","RBush","moved","isPaused","getScene","handleClick","handleMove","handleTransform","highlightedNodes","getGL","firstLevelArrows","secondLevelArrows","addToLayer","elementsGroupName","addToNamedGroup","clearHighlights","focusUI","setPaused","getIndex","cameraZPosition","min","max","onTransform","clear","ui","getHighlightedLinks","linkUI","links","isFirstLevel","getHighlightedNodes","nodeUI","insert","minX","minY","maxX","maxY","removeChild","off","findNearest","newIsPaused","originalEvent","clientX","clientY","neighborIds","knn","neighbor","uiX","uiY","dist","hypot","getComplimentaryColor","lightningFactor","alpha","g","b","rgbToHsl","h","hslToRgb","r0","g0","b0","hue2rgb","round","createLayout","FLOOR_COLOR","EDGE_COLOR","Easing","easeInQuart","createSubgraphVisualizer","subgraph","viewBox","nodeNameToUI","layout","raf","MAX_FRAMES","renderCount","ourNodeNameToUI","points","TextCollection","boundariesFill","transitionAnimator","createTransitionAnimator","pointerEvents","focusSubgraphNode","getPointerEvents","getNameToUI","run","hlNode","nodeUIs","forEachLinkedNode","other","linkUIs","forEachLink","link","from","to","onSceneIsBack","cancelAnimationFrame","parent","startSceneRestoration","startFadeOut","beginLayout","timeStep","springLength","springCoefficient","gravity","nodeMass","nodeId","sqrt","rememberAndSetOriginalPositions","requestAnimationFrame","frame","step","updateNodePositions","finishRendering","setViewBox","getBoundingRect","getRootNodeId","root","forEachNode","node","isRoot","getNodePosition","rootNode","subgraphDone","concaveman","default","addPolygon","boundingRect","Infinity","right","bottom","pos","update","copyPosition","ourUI","setNodePosition","durationInFrames","zoomOutViewBox","currentStep","zoomStart","zoomEnd","changeRectangleFinishedCallback","doneCallback","positions","startZoomOut","startZoomIn","getCurrentBoundingRectangle","changeRectangle","side","tan","fov","pixelRatio","getNamedGroup","elements","el","hideNamedGroup","current","nodeCollections","immediate","restoreNamedGroup","fadeIn","lerp","createSceneLayerManager","namedGroups","groupName","group","isHidden","layer","layerIndex","rootElement","getRoot","lastElementWithLowerLayerIndex","children","warn","insertChildAfter","tex","BoxCollection","uiIDToUI","camera","box","setFaceColor","front","back","face","uiId","frontUI","leftUI","rightUI","backUI","topUI","getFace","rotateFace","PI","translateFace","addFace","removeFace","angle","axis","cos","sin","x0","y0","z0","quadPoints","texCoordinate","quadUI","oldId","newId","remove","movedUI","delete","createStreetView","nameToUI","fpsUI","boxes","items","asyncRender","enter","exit","lookAt","visibleBoxes","Set","visibilityUpdate","uiToBox","visibleElements","lastVisibilityUpdate","domContainer","DomContainer","seeThrough","a","cameraController","getCameraController","setCameraController","fpsControls","setMoveSpeed","setScrollSpeed","setFlySpeed","enableMouseCapture","createFPSControlsUI","renderFirstBatch","scheduleVisibilityUpdate","neighbors","item","addBox","renderTheRest","processNext","localCount","has","streetViewDone","hideElement","mapControls","showElement","dom","dy","DomElement","ox","oy","oz","vec3","cross","normalize","quat","rotationTo","rotateZ","mat4","fromRotationTranslationScale","model","worldTransformNeedsUpdate","updated","moveSpeed","smoothStep","updateVisibility","eye","center","lookDirection","getDirection","getMostVisibleNeighbors","sort","nowVisible","intersections","minT","minFace","checkFaceIntersection","count","castRay","r_px","r_py","s_px","s_py","s_dx","s_dy","r_dx","r_dy","t2","ta","isNaN","dir","maxCount","maxAngle","checkAngle","candidate","candidateDirection","dot","acos","out","len","createStreamingSVGRenderer","canvas","preStreetViewCameraPosition","inputTarget","streetView","ignoreSVGViewBox","isStreetView","initScene","fuzzySearcher","loader","subgraphVisualizer","persistedName","nodes","labelsText","currentTransform","createTransformParser","nodesByComponent","complimentaryColor","clusterColors","setProgressDebounced","focusNode","unfocus","exitSubgraphMode","loadSVG","focus","exitStreetView","componentId","idx","maxLinks","secondaryLinkColor","neighborId","currentPointerEvents","hide","show","lookAtNode","subgraphNodes","addNeighbors","neighborsSet","otherNode","runSubGraphVisualizer","Array","addedNode","getNode","isFirstChild","hasLink","isRootLevel","nodeName","path","handleElementStart","handleElementEnd","tagName","viewBoxArr","finiteNumber","addBorder","transform","pushTransform","popTransform","innerText","appendTextLabel","getNumericAttribute","hexColor","getElementFillColor","transformY","getTextAttribute","getLoadedSubreddits","parseBorder","clusterId","querySelector","createScene","allowPinchRotation","near","maxZoom","minZoom","useDeviceOrientation","setClearColor","cameraPosition","initialSceneSize","getPointsFromPathData","isDirty","tx","ty","transformStack","transformStr","parseTransform","pop","str","transformNumbers","match","coefficients","updateTransform","record","rgbArray","startClick","props","methods","component","directives","rawName","expression","menuClicked","ref","placeholder","domProps","currentQuery","handleInput","cycleTheList","showClearButton","clearSearch","_l","suggestion","class","selected","pickSuggestion","loadingError","nodeList","ctx","seed","createDocumentHandler","binding","vnode","mouseup","mousedown","context","contains","popperElm","methodName","bindingFn","addEventListener","documentHandler","unbind","delay","currentSelected","showSuggestions","showLoading","suggestions","watch","refresh","getSuggestionsInternal","$emit","hideSuggestions","pendingKeyToShow","showIfNeeded","visible","$refs","input","payload","shouldProceed","previous","isArray","which","onClose","mounted","handleKeyDown","beforeDestroy","removeEventListener","showFullPreview","details","subscribers","active","image","icon","description","components","LoadingIcon","loading","getSubredditInfo","fetchedName","createFirstInteractionListener","callback","handleFirstEvent","called","Tooltip","Typeahead","Subreddit","Sidebar","ImproveWindow","SmallPreview","isSmallScreen","typeaheadChanged","showTooltip","showSubreddit","forceFullView","disposeFirstListener","subgraphVisualized","appendDom","oldInstance","$destroy","viewer","$on","div","nameToInstance","removeDom","svgRenderer","innerWidth","Vue","config","productionTip","render","App","$mount"],"mappings":"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","file":"js/app.cc065b2f.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-9475eac2\":\"4f1219b0\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SmallPreview.vue?vue&type=style&index=0&lang=stylus&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Typeahead.vue?vue&type=style&index=0&lang=stylus&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[(!_vm.isWebGLEnabled)?_c('div',[_vm._m(0)]):_vm._e(),(_vm.isWebGLEnabled)?_c('div',[_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.progressMessage)?_c('div',{staticClass:\"progress\"},[_vm._v(_vm._s(_vm.progressMessage))]):_vm._e()]),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.subgraphName && !_vm.isStreetViewMode)?_c('div',{staticClass:\"progress subgraph\"},[_vm._v(\" Only \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onSubgraphRootClick($event)}}},[_vm._v(\"/r/\"+_vm._s(_vm.subgraphName))]),_vm._v(\" related subreddits are shown. \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onExitSubgraph($event)}}},[_vm._v(\"view all\")])]):_vm._e()]),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.isStreetViewMode && !_vm.isStreetViewInProgress)?_c('div',{staticClass:\"progress subgraph\"},[_c('a',{staticClass:\"accent\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onExitStreetView($event)}}},[_vm._v(\"exit street view\")])]):_vm._e()]),(_vm.subreddit)?_c('subreddit',{staticClass:\"preview\",attrs:{\"name\":_vm.subreddit,\"sort\":_vm.defaultSort,\"time\":_vm.defaultTime},on:{\"declineAge\":_vm.onDeclineAge}},[_c('template',{slot:\"after-title\"},[_c('div',[(_vm.graphLoaded)?_c('a',{staticClass:\"subreddit-action\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.showRelated($event)}}},[_vm._v(\"Show related\")]):_vm._e(),(_vm.streetViewEnabled && _vm.graphLoaded && !_vm.isSubgraphLayoutInProgress)?_c('a',{staticClass:\"subreddit-action\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.showStreetView($event)}}},[_vm._v(\"Street view\")]):_vm._e(),(!_vm.graphLoaded)?_c('span',{staticClass:\"subreddit-action\"},[_vm._v(\"the map is still loading...\")]):_vm._e()])])],2):_vm._e(),_c('form',{staticClass:\"search-box\",on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('typeahead',{attrs:{\"placeholder\":\"Find subreddit\",\"showClearButton\":_vm.subreddit,\"query\":_vm.appState.query},on:{\"menuClicked\":function($event){_vm.sidebarVisible = true},\"selected\":_vm.findSubreddit,\"beforeClear\":_vm.closeSubredditOnSmallScreen,\"cleared\":_vm.closeSubredditViewer,\"inputChanged\":_vm.onTypeAheadInput}})],1),_c('a',{staticClass:\"accent improve\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onImproveClick($event)}}},[_vm._v(\"Improve this map\")]),_c('transition',{attrs:{\"name\":\"slide-bottom\"}},[(_vm.smallPreview)?_c('small-preview',{staticClass:\"small-preview\",attrs:{\"name\":_vm.smallPreview}}):_vm._e()],1),_c('transition',{attrs:{\"name\":\"slide-top\"}},[(_vm.improveVisible)?_c('improve-window',{staticClass:\"improve-window\",on:{\"close\":function($event){_vm.improveVisible = false}}}):_vm._e()],1),(_vm.tooltip)?_c('tooltip',{staticClass:\"tooltip\",style:({\n    left: _vm.tooltip.x + 'px',\n    top: _vm.tooltip.y + 'px'\n  }),attrs:{\"data\":_vm.tooltip}}):_vm._e(),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.sidebarVisible || _vm.improveVisible)?_c('div',{staticClass:\"backdrop\",on:{\"click\":_vm.onBackdropClick}}):_vm._e()]),_c('transition',{attrs:{\"name\":\"slide-left\"}},[(_vm.sidebarVisible)?_c('sidebar',{on:{\"close\":function($event){_vm.sidebarVisible = false}}}):_vm._e()],1)],1):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"absolute no-webgl\"},[_c('h4',[_vm._v(\"WebGL is not enabled :(\")]),_c('p',[_vm._v(\"This website needs \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://en.wikipedia.org/wiki/WebGL\"}},[_vm._v(\"WebGL\")]),_vm._v(\" to render a map of reddit. \")]),_vm._v(\" \"),_c('p',[_vm._v(\" You can try another browser. If the problem persists - very likely your video card isn't supported. \")])])}]\n\nexport { render, staticRenderFns }","import eventify from 'ngraph.events';\n\nconst bus = eventify({});\n\nexport default bus;\n\nexport function setProgress(msg) {\n    bus.fire('progress', msg());\n}","\nexport function debounce(cb, ms, self) {\n  let lastCall = new Date();\n  let handle;\n\n  return function() {\n    let time = new Date();\n    let elapsed = time - lastCall;\n    clearTimeout(handle);\n    if (elapsed > ms) {\n      cb.apply(self, arguments)\n    } else {\n      lastCall = time;\n      handle = setTimeout(cb, ms, arguments)\n    }\n  }\n}\n\nexport function formatNumber(x) {\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}","import eventify from 'ngraph.events';\nimport createGraph from 'ngraph.graph';\nimport {createStreamingSVGParser} from 'streaming-svg-parser';\nimport {setProgress} from './bus';\nimport {formatNumber} from './utils';\n\nexport default function createSVGLoader(url) {\n  let disposed = false;\n  let graph = createGraph();\n  let parseSVGAsync = createStreamingSVGParser(notifyTagOpen, notifyTagClose, true)\n\n  let api = eventify({load, dispose, getGraph() { return graph; }});\n  return api;\n\n  function dispose() {\n    disposed = true;\n  }\n\n  function load() {\n    let start = window.performance.now();\n    fetch(url, {mode: 'cors'}).then(response => {\n      let fetchReader = response.body.getReader();\n      let decoder = new TextDecoder();\n\n      return fetchReader.read().then(processData);\n\n      function processData(progress) {\n        if (disposed) return;\n\n        let chunk = (progress.value !== undefined && decoder.decode(progress.value, {stream: !progress.done})) || '';\n        return parseSVGAsync(chunk).then(() => {\n          if(progress.done) {\n            return;\n          }\n          return fetchReader.read().then(processData);\n        });\n      }\n    }).then(() => {\n      console.log('Elapsed: ', window.performance.now() - start);\n      setProgress(() => ({\n        message: 'Loading links...'\n      }));\n      // now the svg file is loaded. Let's load secondary information\n      return fetch(getPathTo('node-ids.txt'), {mode: 'cors'}).then(response => response.text()).then(txt => {\n        let labels = txt.split('\\n');\n        labels.forEach(label => graph.addNode(label));\n        return labels;\n      });\n    }).then((labels) => {\n      // now load the edges:\n      let fromId, fetchReader, prevBuffer, weight;\n      return fetch(getPathTo('links.bin'), {mode: 'cors'})\n      .then(response => {\n        fetchReader = response.body.getReader();\n        return fetchReader.read().then(processData);\n      });\n\n      function processData(progress) {\n        if (disposed) return;\n\n        let chunk = progress.value;\n        if (!chunk && prevBuffer) {\n          throw new Error('Incomplete response');\n        }\n        if (!chunk) {\n          setProgress(() => ({\n            mapLoaded: true,\n          }));\n          return graph;\n        }\n\n        if (prevBuffer) {\n          let tmp = new Uint8Array(prevBuffer.byteLength + chunk.byteLength);\n          tmp.set(new Uint8Array(prevBuffer), 0);\n          tmp.set(new Uint8Array(chunk), prevBuffer.byteLength);\n          chunk = tmp;\n          prevBuffer = null;\n        }\n        let lastAvailableByte = Math.floor(chunk.byteLength / 4) * 4;\n        if (chunk.byteLength % 4 !== 0) {\n          prevBuffer = chunk.slice(lastAvailableByte);\n        }\n        const view = new DataView(chunk.buffer);\n        for (let i = 0; i < lastAvailableByte; i += 4) {\n          let linkId = view.getInt32(i, /* little endian = */ true);\n          if (linkId < 0) {\n            fromId = -linkId - 1;\n            weight = 1;\n            graph.addNode(labels[fromId]);\n          } else {\n            let toId = linkId - 1;\n            graph.addLink(labels[fromId], labels[toId], weight)\n            weight += 1;\n          }\n        }\n\n        if (progress.done) {\n          setProgress(() => ({\n            mapLoaded: true\n          }));\n          return graph;\n        }\n        setProgress(getLinksCount);\n        return fetchReader.read().then(processData);\n      }\n    });\n\n    function getLinksCount() {\n      return {\n        message: 'Loaded ' + formatNumber(graph.getLinkCount()) + ' relationship records'\n      }\n    }\n\n    function getPathTo(name) {\n      if (url.indexOf('http') < 0) return name;\n      let baseUrl = new URL(url);\n      baseUrl.pathname = baseUrl.pathname.substr(0, baseUrl.pathname.lastIndexOf('/') + 1) + name;\n      return baseUrl.toString();\n    }\n\n    return api;\n  }\n\n  function notifyTagOpen(element) {\n    api.fire('element-start', element);\n  }\n\n  function notifyTagClose(element) {\n    api.fire('element-end', element)\n  }\n\n}","\nimport {GLCollection, defineProgram, ColorAttribute, InstancedAttribute} from 'w-gl';\n\nexport default class PointCollection extends GLCollection {\n  constructor(gl) {\n    let program = defineProgram({\n      gl,\n      vertex: `\n  uniform mat4 modelViewProjection;\n  uniform float opacity;\n  uniform float cameraDistance;\n\n  attribute float size;\n  attribute vec3 position;\n  attribute vec4 color;\n\n  attribute vec2 point; // instanced\n\n  varying vec4 vColor;\n  varying vec2 vPoint;\n  void main() {\n    gl_Position = modelViewProjection * vec4(position + vec3(point * size, 0.), 1.0);\n    vColor = color.abgr;\n    vColor[3] *= opacity *  (1. - smoothstep(0.0, 1., cameraDistance / (3000. * size)));\n    vPoint = point;\n  }`,\n\n      fragment: `\n  precision highp float;\n  varying vec4 vColor;\n  varying vec2 vPoint;\n  void main() {\n    float dist = length(vPoint);\n    if (dist >= 0.5) {discard;}\n    gl_FragColor = vColor;\n  }`,\n      // These are just overrides:\n      attributes: {\n        color: new ColorAttribute(),\n      },\n      instanced: {\n        point: new InstancedAttribute([\n          -0.5, -0.5, -0.5,  0.5, 0.5,  0.5,\n          0.5,  0.5, 0.5, -0.5, -0.5, -0.5,\n        ])\n      },\n\n      preDrawHook(/* programInfo */) {\n        return `gl.enable(gl.DEPTH_TEST);\n        gl.depthFunc(gl.LEQUAL);`;\n      },\n      postDrawHook() {\n        return 'gl.disable(gl.DEPTH_TEST);';\n      },\n    });\n\n    super(program);\n    this.opacity = 1;\n    this.hidden = false;\n  }\n  hide() {\n    this.hidden = true;\n  }\n  show() {\n    this.hidden = false;\n  }\n  draw(gl, drawContext) {\n    if (this.hidden) return;\n    if (!this.uniforms) {\n      this.uniforms = {\n        modelViewProjection: this.modelViewProjection,\n        opacity: this.opacity\n      };\n    }\n    this.uniforms.opacity = this.opacity;\n    this.uniforms.cameraDistance = drawContext.view.position[2];\n    this.program.draw(this.uniforms);\n  }\n\n  clear() {\n    this.program.setCount(0);\n  }\n}","import earcut from 'earcut';\nimport {defineProgram, ColorAttribute, GLCollection} from 'w-gl';\n\nexport default class PolyLineCollection extends GLCollection {\n  constructor(gl, options = {}) {\n    let program = defineProgram({\n      gl,\n      debug: options.debug,\n      vertex: `\n  uniform mat4 modelViewProjection;\n  uniform float opacity;\n\n  attribute vec2 point;\n  attribute vec4 color;\n  varying vec4 vColor;\n\n  void main() {\n    gl_Position = modelViewProjection * vec4(point, -1.0, 1.0);\n    vColor = color.abgr;\n    vColor[3] *= opacity;\n  }`,\n\n      fragment: `\n  precision highp float;\n\n  varying vec4 vColor;\n\n  void main() {\n    gl_FragColor = vColor;\n  }`,\n      attributes: {\n        color: new ColorAttribute(),\n      },\n    });\n    super(program);\n    this.opacity = options.opacity === undefined ? 1 : options.opacity;\n    this.color = options.color || 0x000000ff;\n  }\n\n  draw() {\n    if (!this.uniforms) {\n      this.uniforms = {\n        modelViewProjection: this.modelViewProjection,\n        opacity: this.opacity\n      };\n    }\n    this.uniforms.opacity = this.opacity;\n    this.program.draw(this.uniforms);\n  }\n\n  clear() {\n    this.program.setCount(0);\n  }\n\n  addPolygon({ polygon, color }) {\n    polygon = polygon.flat();\n    let triangles = earcut(polygon);\n    for (let i = 0; i < triangles.length; i++) {\n      let index = triangles[i] * 2;\n      this.add({\n        point: [polygon[index], polygon[index + 1]],\n        color: color || this.color,\n      });\n    }\n\n    for (let i = 0; i < 3; ++i) {\n      this.add({\n        point: [0, 0],\n        color: 0x0,\n      });\n    }\n  }\n}\n","import { defineProgram, InstancedAttribute, GLCollection } from 'w-gl';\n\nexport default class MSDFTextCollection extends GLCollection {\n  constructor(gl, options = {}) {\n    gl.getExtension('OES_standard_derivatives');\n\n    super(getTextProgram(gl, options));\n\n    let img = (this.msdfImage = new Image());\n    img.crossOrigin = 'Anonymous';\n    this.isReady = false;\n    this.queue = [];\n    this.fontSize = options.fontSize || 2;\n    this.opacity = options.opacity !== undefined ? options.opacity : 1;\n    this.fontInfo = null;\n\n    let fontPath = 'fonts';\n    fetch(`${fontPath}/Roboto.json`, { mode: 'cors' })\n      .then((x) => x.json())\n      .then((fontInfo) => {\n        this.fontInfo = fontInfo;\n        this.alphabet = new Map();\n        fontInfo.chars.forEach((char) => {\n          let charValue = String.fromCharCode(char.id);\n          this.alphabet.set(charValue, char);\n        });\n\n        this.msdfImage.onload = () => {\n          this._sdfTextureChanged = true;\n          this.program.setTextureCanvas('msdf', this.msdfImage);\n          this.isReady = true;\n          this.sdfTextureWidth = img.width;\n          this.sdfTextureHeight = img.height;\n\n          this.queue.forEach((q) => this.addText(q));\n          this.queue = [];\n        };\n        this.msdfImage.src = `${fontPath}/Roboto0.png`;\n      });\n  }\n\n  clear() {\n    this.program.setCount(0);\n  }\n\n  draw(gl, drawContext) {\n    if (!this.uniforms) {\n      this.uniforms = {\n        modelViewProjection: this.modelViewProjection,\n        color: [0.9, 0.9, 0.9, 1.0],\n        bias: 0.5,\n        opacity: this.opacity\n      };\n    }\n\n    this.uniforms.cameraDistance = drawContext.view.position[2];\n    this.uniforms.opacity = this.opacity;\n\n    // This draws text outline. TODO: Can I get rid of this call?\n    this.uniforms.color[0] = 0.2;\n    this.uniforms.color[1] = 0.4;\n    this.uniforms.color[2] = 0.8;\n    this.uniforms.color[3] = 0.8;\n    this.uniforms.bias = 0.35;\n    this.program.draw(this.uniforms);\n\n    // This draws text itself\n    this.uniforms.color[0] = 0.9;\n    this.uniforms.color[1] = 0.9;\n    this.uniforms.color[2] = 0.9;\n    this.uniforms.color[3] = 1;\n    this.uniforms.bias = 0.5;\n    this.program.draw(this.uniforms);\n  }\n\n  addText(textInfo) {\n    if (!this.isReady) {\n      this.queue.push(textInfo);\n      return;\n    }\n    let { text, x = 0, y = 0, z = 0 } = textInfo;\n    if (text === undefined) {\n      throw new Error('Text is not defined in ' + textInfo);\n    }\n    let dx = 0;\n    let fontSize = textInfo.fontSize || this.fontSize;\n    if (textInfo.limit !== undefined) {\n      let w = 0;\n      for (let char of text) {\n        let sdfPos = this.alphabet.get(char);\n        if (!sdfPos) continue;\n        w += sdfPos.xadvance;\n      }\n      fontSize = (textInfo.limit * this.fontInfo.info.size) / w;\n    }\n\n    let scale = fontSize / this.fontInfo.info.size;\n    if (textInfo.cx !== undefined) {\n      let w = 0;\n      for (let char of text) {\n        let sdfPos = this.alphabet.get(char);\n        if (!sdfPos) continue;\n\n        w += sdfPos.xadvance;\n      }\n      dx -= w * textInfo.cx * scale;\n    }\n    if (textInfo.cy !== undefined) {\n      y += fontSize * textInfo.cy;\n    }\n\n    for (let char of text) {\n      let sdfPos = this.alphabet.get(char);\n      if (!sdfPos) {\n        console.error(char + ' is missing in the font');\n        continue;\n      }\n\n      this.add({\n        position: [x + dx, y - sdfPos.yoffset * scale, z],\n        charSize: [\n          (fontSize * sdfPos.width) / 42,\n          (-fontSize * sdfPos.height) / 42,\n          fontSize,\n        ],\n        texturePosition: [\n          sdfPos.x / this.sdfTextureWidth,\n          1 - sdfPos.y / this.sdfTextureHeight,\n          sdfPos.width / this.sdfTextureWidth,\n          -sdfPos.height / this.sdfTextureHeight,\n        ],\n      });\n      dx += sdfPos.xadvance * scale;\n    }\n    if (this.scene) this.scene.renderFrame();\n  }\n}\n\nfunction getTextProgram(gl, options) {\n  return defineProgram({\n    capacity: options.capacity || 1,\n    buffer: options.buffer,\n    debug: options.debug,\n    gl,\n    vertex: `\n  uniform mat4 modelViewProjection;\n  uniform vec4 color;\n  uniform float cameraDistance;\n\n  // Position of the text character:\n  attribute vec3 position;\n  // Instanced quad coordinate:\n  attribute vec2 point;\n  attribute vec3 charSize;\n  // [x, y, w, h] - of the character in the msdf texture;\n  attribute vec4 texturePosition;\n\n  varying vec4 vColor;\n  varying vec2 vPoint;\n\n  void main() {\n    gl_Position = modelViewProjection * vec4(position + vec3(vec2(point.x, point.y) * charSize.xy, position.z), 1.);\n    vPoint = texturePosition.xy + point * texturePosition.zw;\n    vColor = color;\n    vColor[3] *= (1. - smoothstep(0.0, 1., cameraDistance / (5000. * charSize.z)));\n  }`,\n\n    fragment: `\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n  precision highp float;\n  varying vec2 vPoint;\n  varying vec4 vColor;\n\n  uniform float bias;\n  uniform float opacity;\n  uniform float cameraDistance;\n  uniform sampler2D msdf;\n\n  float median(float r, float g, float b) {\n    return max(min(r, g), min(max(r, g), b));\n  }\n\n  void main() {\n    vec3 sample = texture2D(msdf, vPoint).rgb;\n    float sigDist = median(sample.r, sample.g, sample.b) - bias;\n    float alpha = clamp(sigDist / fwidth(sigDist) + bias, 0.0, 1.0);\n    gl_FragColor = vec4(vColor.rgb, vColor.a * alpha * opacity);\n  }`,\n    instanced: {\n      point: new InstancedAttribute([\n        0, 0, \n        1, 0, \n        1, 1, \n\n        1, 1, \n        0, 0, \n        0, 1]),\n    },\n  });\n}\n","import { defineProgram, ColorAttribute, InstancedAttribute, GLCollection } from 'w-gl';\n\nexport default class ColoredTextCollection extends GLCollection {\n  constructor(gl, options = {}) {\n    gl.getExtension('OES_standard_derivatives');\n\n    super(getTextProgram(gl, options));\n\n    // TODO: this duplicates MSDFTextCollection. DRY it.\n    let img = (this.msdfImage = new Image());\n    img.crossOrigin = 'Anonymous';\n    this.isReady = false;\n    this.queue = [];\n    this.fontSize = options.fontSize || 2;\n    this.opacity = options.opacity !== undefined ? options.opacity : 1;\n    this.fontInfo = null;\n\n    let fontPath = 'fonts';\n    fetch(`${fontPath}/Roboto.json`, { mode: 'cors' })\n      .then((x) => x.json())\n      .then((fontInfo) => {\n        this.fontInfo = fontInfo;\n        this.alphabet = new Map();\n        fontInfo.chars.forEach((char) => {\n          let charValue = String.fromCharCode(char.id);\n          this.alphabet.set(charValue, char);\n        });\n\n        this.msdfImage.onload = () => {\n          this._sdfTextureChanged = true;\n          this.program.setTextureCanvas('msdf', this.msdfImage);\n          this.isReady = true;\n          this.sdfTextureWidth = img.width;\n          this.sdfTextureHeight = img.height;\n\n          this.queue.forEach((q) => this.addText(q));\n          this.queue = [];\n        };\n        this.msdfImage.src = `${fontPath}/Roboto0.png`;\n      });\n  }\n\n  clear() {\n    this.program.setCount(0);\n  }\n\n  draw(gl, drawContext) {\n    if (!this.uniforms) {\n      this.uniforms = {\n        modelViewProjection: this.modelViewProjection,\n        bias: 0.5,\n        opacity: this.opacity\n      };\n    }\n    this.uniforms.opacity = this.opacity;\n    this.uniforms.cameraDistance = drawContext.view.position[2];\n\n    this.uniforms.bias = 0.5;\n    this.program.draw(this.uniforms);\n  }\n\n  addText(textInfo) {\n    if (!this.isReady) {\n      this.queue.push(textInfo);\n      return;\n    }\n    let { text, x = 0, y = 0, z = 0 } = textInfo;\n    if (text === undefined) {\n      throw new Error('Text is not defined in ' + textInfo);\n    }\n    let dx = 0;\n    let fontSize = textInfo.fontSize || this.fontSize;\n    if (textInfo.limit !== undefined) {\n      let w = 0;\n      for (let char of text) {\n        let sdfPos = this.alphabet.get(char);\n        if (!sdfPos) continue;\n        w += sdfPos.xadvance;\n      }\n      fontSize = (textInfo.limit * this.fontInfo.info.size) / w;\n    }\n\n    let scale = fontSize / this.fontInfo.info.size;\n    if (textInfo.cx !== undefined) {\n      let w = 0;\n      for (let char of text) {\n        let sdfPos = this.alphabet.get(char);\n        if (!sdfPos) continue;\n\n        w += sdfPos.xadvance;\n      }\n      dx -= w * textInfo.cx * scale;\n    }\n    if (textInfo.cy !== undefined) {\n      y += fontSize * textInfo.cy;\n    }\n\n    for (let char of text) {\n      let sdfPos = this.alphabet.get(char);\n      if (!sdfPos) {\n        console.error(char + ' is missing in the font');\n        continue;\n      }\n\n      this.add({\n        position: [x + dx, y - sdfPos.yoffset * scale, z],\n        color: textInfo.color,\n        charSize: [\n          (fontSize * sdfPos.width) / 42,\n          (-fontSize * sdfPos.height) / 42,\n          fontSize\n        ],\n        texturePosition: [\n          sdfPos.x / this.sdfTextureWidth,\n          1 - sdfPos.y / this.sdfTextureHeight,\n          sdfPos.width / this.sdfTextureWidth,\n          -sdfPos.height / this.sdfTextureHeight,\n        ],\n      });\n      dx += sdfPos.xadvance * scale;\n    }\n    if (this.scene) this.scene.renderFrame();\n  }\n}\n\nfunction getTextProgram(gl, options) {\n  return defineProgram({\n    capacity: options.capacity || 1,\n    buffer: options.buffer,\n    debug: options.debug,\n    gl,\n    vertex: `\n  uniform mat4 modelViewProjection;\n  uniform float cameraDistance;\n\n  attribute vec4 color;\n\n  // Position of the text character:\n  attribute vec3 position;\n  // Instanced quad coordinate:\n  attribute vec2 point;\n  attribute vec3 charSize;\n  // [x, y, w, h] - of the character in the msdf texture;\n  attribute vec4 texturePosition;\n\n  varying vec2 vPoint;\n  varying vec4 vColor;\n\n  void main() {\n    gl_Position = modelViewProjection * vec4(\n      position + vec3(vec2(point.x, point.y) * charSize.xy, position.z), 1.);\n    vPoint = texturePosition.xy + point * texturePosition.zw;\n    vColor = color.abgr;\n    vColor[3] = smoothstep(0.2, 0.8, cameraDistance / (50. * charSize.z) );\n  }`,\n\n    fragment: `\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n  precision highp float;\n  varying vec2 vPoint;\n  varying vec4 vColor;\n\n  uniform float bias;\n  uniform float opacity;\n  uniform sampler2D msdf;\n\n  float median(float r, float g, float b) {\n    return max(min(r, g), min(max(r, g), b));\n  }\n\n  void main() {\n    vec3 sample = texture2D(msdf, vPoint).rgb;\n    float sigDist = median(sample.r, sample.g, sample.b) - bias;\n    float alpha = clamp(sigDist / fwidth(sigDist) + bias, 0.0, 1.0);\n    gl_FragColor = vec4(vColor.rgb, vColor.a * alpha * opacity);\n  }`,\n    attributes: {\n      color: new ColorAttribute(),\n    },\n    instanced: {\n      point: new InstancedAttribute([0, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 1]),\n    },\n  });\n}\n","const fuzzysort = require('fuzzysort')\n\nexport default function createFuzzySearcher() {\n  let words = [];\n  let lastPromise;\n  let api = {\n    addWord,\n    find\n  }\n\n  return api;\n\n  function addWord(word) {\n    words.push(word);\n  }\n\n  function find(query) {\n    if (lastPromise) {\n      lastPromise.cancel();\n    }\n    lastPromise = fuzzysort.goAsync(query, words, {limit: 10})\n\n    return lastPromise.then(results => {\n      return results.map(x => ({\n        html: fuzzysort.highlight(x, '<b>', '</b>'),\n        text: x.target\n      }));\n    }); \n    // if(invalidated) promise.cancel()\n  }\n}","let qs = require('query-state')\nlet state = qs.instance({}, {useSearch: true})\nlet pendingSave;\n\nexport default {\n  query: state.get('q') || '',\n  userTypedSomething: false,\n\n  getFilePath() {\n    return state.get('graph') || 'https://anvaka.github.io/map-of-reddit-data/graph.svg';\n  },\n  saveQuery(newQuery) {\n    if (newQuery) {\n      state.set({q: newQuery});\n    } else {\n      state.unset('q');\n    }\n  },\n  getQueryState() {\n    return state;\n  },\n  getCameraPosition() {\n    let coordinates = ['x', 'y', 'z'].map(name => {\n      let v = Number.parseFloat(state.get(name));\n      if (Number.isFinite(v)) return v;\n    }).filter(x => x !== undefined);\n    if (coordinates.length === 3) return coordinates;\n  },\n  saveScenePosition(scene) {\n    if (pendingSave) {\n      clearTimeout(pendingSave);\n      pendingSave = 0;\n    }\n\n    pendingSave = setTimeout(() => {\n      pendingSave = 0;\n      let dc = scene.getDrawContext();\n      let [x, y, z] = dc.view.position;\n      let position = {x, y, z}\n      state.set(position);\n    }, 300);\n  }\n}","export const Colors = {\n  PRIMARY_HIGHLIGHT_COLOR: 0xBF2172ff,\n  SECONDARY_HIGHLIGHT_COLOR: 0xE56BAAff,\n  TERNARY_COLOR: 0xdcdcdcff,\n  TERNARY_LINK: 0x88888844\n};\n\nexport const LayerLevels = {\n  Polygons: 0,\n  Edges: 5,\n  HighlightedEdges: 7,\n  Nodes: 10,\n  Labels: 12,\n  Text: 15\n}\n\nexport const NamedGroups = {\n  MainGraph: 'main-graph-view'\n}","import {GLCollection, defineProgram, InstancedAttribute, ColorAttribute} from 'w-gl';\n\n// Note: the shader has a bug with z coordinate of the arrow. I'm still keeping it and maybe will get back\n// to it later\nexport default class LineCollection extends GLCollection {\n    constructor(gl, options) {\n      let program = defineProgram({\n        gl,\n        vertex: `\nuniform mat4 modelViewProjection;\nuniform float width;\n\nattribute vec3 from, to;\nattribute vec2 point;\nattribute vec4 color;\nvarying vec2 vPoint;\nvarying vec4 vColor;\n\nvoid main() {\n  vec2 xBasis = normalize(to - from).xy;\n  vec2 yBasis = vec2(-xBasis.y, xBasis.x);\n  vec4 clip0 = modelViewProjection * vec4(from.xy + width * yBasis * point.x, from.z, 1.0);\n  vec4 clip1 = modelViewProjection * vec4(to.xy + width * yBasis * point.x, to.z, 1.0);\n  gl_Position = mix(clip0, clip1, point.y);\n  vColor = color;\n}`,\n\n        fragment: `\n    precision highp float;\n    varying vec4 vColor;\n\n    void main() {\n      gl_FragColor = vColor.abgr;\n    }`,\n      attributes: {\n        color: new ColorAttribute(),\n      },\n      instanced: {\n          point: new InstancedAttribute([\n            -0.5, 0, -0.5, 1, 0.5, 1, // First 2D triangle of the quad\n            -0.5, 0, 0.5, 1, 0.5, 0   // Second 2D triangle of the quad\n          ])\n        }\n      });\n      super(program);\n      this.width = (options && options.width) || 1;\n    }\n\n    draw() {\n      if (!this.uniforms) {\n        this.uniforms = {\n          modelViewProjection: this.modelViewProjection,\n          width: this.width,\n        }\n      }\n      this.uniforms.width = this.width;\n      this.program.draw(this.uniforms);\n    }\n    // add(line) {\n    //   if (line.width === undefined) line.width = this.width;\n    //   super.add(line);\n    // }\n\n    clear() {\n      this.program.setCount(0);\n    }\n  }","/**\n * This class is responsible for finding nodes under cursor\n */\nimport RBush from 'rbush';\nimport knn from 'rbush-knn';\nimport bus from './bus';\nimport LineCollection from './LineCollection';\nimport PointCollection from './PointCollection';\nimport {LayerLevels} from './constants';\n\nexport default function createPointerEventsHandler(sceneLayerManager, options) {\n  const spatialIndex = new RBush();\n  let moved = false;\n  let isPaused = false;\n  const scene = sceneLayerManager.getScene();\n\n  scene.on('click', handleClick);\n  scene.on('mousemove', handleMove);\n  scene.on('transform', handleTransform);\n\n  const highlightedNodes = new PointCollection(scene.getGL());\n  const firstLevelArrows = new LineCollection(scene.getGL(), {width: 60});\n  const secondLevelArrows = new LineCollection(scene.getGL(), {width: 20});\n\n  sceneLayerManager.addToLayer(secondLevelArrows, LayerLevels.Edges);\n  sceneLayerManager.addToLayer(firstLevelArrows, LayerLevels.HighlightedEdges);\n  sceneLayerManager.addToLayer(highlightedNodes, LayerLevels.Nodes);\n\n  if (options.elementsGroupName) {\n    sceneLayerManager.addToNamedGroup(firstLevelArrows, options.elementsGroupName);\n    sceneLayerManager.addToNamedGroup(secondLevelArrows, options.elementsGroupName);\n    sceneLayerManager.addToNamedGroup(highlightedNodes, options.elementsGroupName);\n  }\n\n  return {\n    addNode,\n    clearHighlights,\n    focusUI,\n    dispose,\n    setPaused,\n    getIndex() {\n      return spatialIndex;\n    }\n  }\n\n  function handleTransform(e) {\n    let cameraZPosition = e.drawContext.view.position[2];\n    let z = Math.min(cameraZPosition, 8000);\n    firstLevelArrows.width = Math.max(1, 60 * z / 8000);\n    secondLevelArrows.width = Math.max(1, 20 * z / 8000);\n    moved = true;\n    if (options && options.onTransform) options.onTransform();\n  }\n\n  function clearHighlights() {\n    firstLevelArrows.clear();\n    secondLevelArrows.clear();\n    highlightedNodes.clear();\n  }\n\n  function focusUI(ui) {\n    if (ui !== undefined) {\n      bus.fire('show-subreddit', ui.name);\n    }\n    let graph = options && options.getGraph && options.getGraph();\n    if (!ui && !moved && graph) {\n      clearHighlights();\n      bus.fire('show-subreddit', null);\n      scene.renderFrame();\n    }\n\n    moved = false;\n\n    if (ui) {\n      clearHighlights();\n\n      options.getHighlightedLinks(ui).forEach(linkUI => {\n        let links = linkUI.isFirstLevel ? firstLevelArrows : secondLevelArrows;\n        links.add(linkUI);\n      });\n      options.getHighlightedNodes(ui).forEach(nodeUI => highlightedNodes.add(nodeUI));\n\n      scene.renderFrame();\n    } \n  }\n\n  function addNode(ui) {\n    let position = ui.position;\n    let r = ui.size / 2;\n\n    spatialIndex.insert({\n      minX: position[0] - r,\n      minY: position[1] - r,\n      maxX: position[0] + r,\n      maxY: position[1] + r,\n      ui,\n    });\n  }\n\n  function dispose() {\n    scene.removeChild(firstLevelArrows);\n    scene.removeChild(secondLevelArrows);\n    scene.removeChild(highlightedNodes);\n\n    scene.off('click', handleClick);\n    scene.off('mousemove', handleMove);\n    scene.off('transform', handleTransform);\n  }\n\n  function handleClick(e) {\n    let ui = findNearest(e.x, e.y);\n    focusUI(ui);\n  }\n\n  function setPaused(newIsPaused) {\n    isPaused = newIsPaused;\n  }\n\n  function handleMove(e) {\n    if (isPaused) return;\n\n    let ui = findNearest(e.x, e.y);\n    if (ui !== undefined) {\n      bus.fire('show-tooltip', {\n        x: e.originalEvent.clientX,\n        y: e.originalEvent.clientY,\n        data: ui.name,\n      });\n      return;\n    }\n\n    bus.fire('show-tooltip', null);\n  }\n\n  function findNearest(x, y) {\n    const neighborIds = knn(spatialIndex, x, y, 1);\n    let neighbor = neighborIds[0];\n    if (neighbor === undefined) return;\n    let ui = neighbor.ui;\n\n    let [uiX, uiY] = ui.position;\n    let dist = Math.hypot(x - uiX, y - uiY);\n    if (dist < ui.size / 2) return ui;\n  }\n}","export default function getComplimentaryColor(color, lightningFactor = 1.4, alpha = 0xaa) {\n  let r = (color >> 24) & 0xff;\n  let g = (color >> 16) & 0xff;\n  let b = (color >> 8) & 0xff;\n  let [h, s, l] = rgbToHsl(r, g, b);\n  if (l > 0.5) lightningFactor = .8;\n  let [r0, g0, b0] = hslToRgb(h, s, Math.min(1, l * lightningFactor));\n  return (r0 << 24) | (g0 << 16) | (b0 << 8) | alpha;\n}\n\nfunction rgbToHsl(r, g, b) {\n  r /= 255, g /= 255, b /= 255;\n\n  var max = Math.max(r, g, b), min = Math.min(r, g, b);\n  var h, s, l = (max + min) / 2;\n\n  if (max == min) {\n    h = s = 0; // achromatic\n  } else {\n    var d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\n    switch (max) {\n      case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n      case g: h = (b - r) / d + 2; break;\n      case b: h = (r - g) / d + 4; break;\n    }\n\n    h /= 6;\n  }\n\n  return [ h, s, l ];\n}\n\nfunction hslToRgb(h, s, l) {\n  var r, g, b;\n\n  if (s == 0) {\n    r = g = b = l; // achromatic\n  } else {\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n\n    r = hue2rgb(p, q, h + 1/3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1/3);\n  }\n\n  return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n}\n\nfunction hue2rgb(p, q, t) {\n  if (t < 0) t += 1;\n  if (t > 1) t -= 1;\n  if (t < 1/6) return p + (q - p) * 6 * t;\n  if (t < 1/2) return q;\n  if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n  return p;\n}","import PointCollection from './PointCollection';\nimport TextCollection from './MSDFTextCollection';\nimport PolyLineCollection from './PolyLineCollection';\nimport {Colors, LayerLevels, NamedGroups} from './constants';\nimport createPointerEventsHandler from './createPointerEventsHandler';\nimport bus, {setProgress} from './bus';\nimport getComplimentaryColor from './getComplimentaryColor';\n\nconst createLayout = require('ngraph.forcelayout');\nconst FLOOR_COLOR = 0x5670B6ff;\nconst EDGE_COLOR = getComplimentaryColor(0x5670B6ff);\n\nconst Easing = {\n  easeInQuart(x) {\n    return x * x * x * x;\n  }\n}\n\nexport default function createSubgraphVisualizer(subgraph, viewBox, sceneLayerManager, nodeNameToUI) {\n  let layout;\n  let raf;\n  let MAX_FRAMES = 400;\n  let renderCount = 0;\n\n  const ourNodeNameToUI = new Map();\n  const scene = sceneLayerManager.getScene();\n  const points = new PointCollection(scene.getGL());\n  const text = new TextCollection(scene.getGL());\n  const boundariesFill = new PolyLineCollection(scene.getGL(), {color: 0x124182a4, opacity: 1.0});\n  const transitionAnimator = createTransitionAnimator(sceneLayerManager, 60 * 0.2, viewBox);\n\n  // order is important. Pointer events should go after main elements\n  sceneLayerManager.addToLayer(boundariesFill, LayerLevels.Polygons);\n  sceneLayerManager.addToLayer(points, LayerLevels.Nodes);\n  sceneLayerManager.addToLayer(text, LayerLevels.Text);\n\n  // Now we are going to listen to events from the subgraph:\n  let pointerEvents = createPointerEventsHandler(sceneLayerManager, {\n    getGraph: () => renderCount < MAX_FRAMES && subgraph,\n    getHighlightedLinks,\n    getHighlightedNodes\n  });\n  bus.on('subgraph-focus-node', focusSubgraphNode);\n\n  return {\n    dispose,\n    getPointerEvents() {\n      return pointerEvents\n    },\n    getNameToUI() {\n      return ourNodeNameToUI\n    },\n    run\n  };\n\n\n  function focusSubgraphNode(name) {\n    pointerEvents.focusUI(ourNodeNameToUI.get(name));\n  }\n\n  function getHighlightedNodes(ui) {\n    const hlNode = {...ourNodeNameToUI.get(ui.name)};\n    hlNode.color = Colors.PRIMARY_HIGHLIGHT_COLOR ;\n    let nodeUIs = [hlNode];\n    subgraph.forEachLinkedNode(ui.name, (other) => {\n      const hlNode = {...ourNodeNameToUI.get(other.id)};\n      hlNode.color = Colors.SECONDARY_HIGHLIGHT_COLOR;\n      nodeUIs.push(hlNode);\n    });\n\n    return nodeUIs;\n  }\n\n  function getHighlightedLinks(ui) {\n    let linkUIs = [];\n\n    subgraph.forEachLink(link => {\n      let isFirstLevel = (link.fromId === ui.name || link.toId === ui.name);\n      linkUIs.push({\n        from: ourNodeNameToUI.get(link.fromId).position,\n        to: ourNodeNameToUI.get(link.toId).position,\n        color: isFirstLevel ? 0xffffffff : EDGE_COLOR, \n        isFirstLevel\n      });\n    });\n\n    return linkUIs;\n  }\n\n  function dispose(onSceneIsBack) {\n    cancelAnimationFrame(raf);\n    bus.off('subgraph-focus-node', focusSubgraphNode);\n\n    text.parent.removeChild(text);\n    text.dispose();\n\n    pointerEvents.dispose();\n\n    transitionAnimator.startSceneRestoration(() => {\n      boundariesFill.parent.removeChild(boundariesFill);\n      points.parent.removeChild(points);\n      points.dispose();\n      if (onSceneIsBack) onSceneIsBack();\n    }, ourNodeNameToUI, nodeNameToUI, points, onSceneIsBack === undefined);\n    raf = null;\n    scene.renderFrame();\n  }\n\n  function run() {\n    transitionAnimator.startFadeOut();\n    beginLayout();\n    // transitionAnimator.startZoomOut(beginLayout);\n  }\n\n  function beginLayout() {\n    layout = createLayout(subgraph, {\n      timeStep: 80,\n      springLength: 5000,\n      springCoefficient: 1e-5,\n      gravity: -120,\n      nodeMass(nodeId) {\n        let ui = nodeNameToUI.get(nodeId);\n        return ui.size * Math.sqrt(ui.size);\n      }\n    });\n\n    rememberAndSetOriginalPositions();\n    // transitionAnimator.startZoomIn(getBoundingRect(), () => {\n    // });\n    raf = requestAnimationFrame(frame);\n  }\n\n  function frame() {\n    for (let i = 0; i < 10; ++i) layout.step();\n\n    updateNodePositions();\n\n    if (renderCount++ < MAX_FRAMES) {\n      raf = requestAnimationFrame(frame);\n      if (renderCount % 10 === 0) {\n        setProgress(() => ({\n          message: `Layout step ${renderCount} of ${MAX_FRAMES}. Please wait...`\n        }));\n      }\n    } else {\n      finishRendering();\n    }\n\n    scene.setViewBox(getBoundingRect());\n\n    scene.renderFrame();\n  }\n\n  function getRootNodeId() {\n    let root = null;\n    subgraph.forEachNode(node => {\n      if (node.data && node.data.isRoot) {\n        root = node.id;\n        return true;\n      }\n    });\n    if (!root) {\n      throw new Error('Root node is missing in the subgraph');\n    }\n    return root;\n  }\n\n  function finishRendering() {\n    let points = [];\n    subgraph.forEachNode(node => {\n      let {x, y} = layout.getNodePosition(node.id);\n      points.push([x, y]);\n      let ui = ourNodeNameToUI.get(node.id);\n      pointerEvents.addNode(ui);\n      text.addText({\n        x,\n        y: y - ui.size * 0.75,\n        text: ui.name,\n        limit: 2. * ui.size,\n        cx: 0.5,\n      });\n    });\n\n    let rootNode = getRootNodeId();\n    pointerEvents.focusUI(ourNodeNameToUI.get(rootNode));\n    setProgress(() => ({\n      subgraphDone: true,\n      subgraphName: rootNode\n    }));\n    import('concaveman').then(concaveman => {\n      var polygon = concaveman.default(points);\n      boundariesFill.addPolygon({polygon, color: FLOOR_COLOR})\n      scene.renderFrame();\n    })\n  }\n\n  function getBoundingRect() {\n    let boundingRect = {\n      left: Infinity,\n      right: -Infinity,\n      top: Infinity,\n      bottom: -Infinity\n    }\n    subgraph.forEachNode(node => {\n      let {x, y} = layout.getNodePosition(node.id);\n      if (x < boundingRect.left) boundingRect.left = x;\n      if (x > boundingRect.right) boundingRect.right = x;\n      if (y < boundingRect.top) boundingRect.top = y;\n      if (y > boundingRect.bottom) boundingRect.bottom = y;\n    });\n    return boundingRect;\n  }\n\n  function updateNodePositions() {\n    subgraph.forEachNode(node => {\n      let pos = layout.getNodePosition(node.id);\n      let ui = ourNodeNameToUI.get(node.id);\n      ui.position[0] = pos.x;\n      ui.position[1] = pos.y;\n      points.update(ui.id, ui);\n    });\n  }\n\n  function rememberAndSetOriginalPositions() {\n    subgraph.forEachNode(node => {\n      let ui = nodeNameToUI.get(node.id);\n      if (!ui) throw new Error('Missing ui for node: ' + node.id);\n      // let isRoot = node.data && node.data.isRoot;\n      let pos = copyPosition(ui.position);\n      let color = Colors.TERNARY_COLOR;\n      // if (isRoot) color = Colors.PRIMARY_HIGHLIGHT_COLOR;\n      // else if (node.data && node.data.isFirstChild) color = Colors.SECONDARY_HIGHLIGHT_COLOR;\n\n      let ourUI = {\n        position: pos,\n        color,\n        size: ui.size,\n        id: ourNodeNameToUI.size,\n        name: ui.name,\n      };\n      ourNodeNameToUI.set(ui.name, ourUI);\n      points.add(ourUI);\n      layout.setNodePosition(node.id, pos[0], pos[1])\n    });\n  }\n\n}\n\nfunction createTransitionAnimator(sceneLayerManager, durationInFrames, zoomOutViewBox) {\n  let elapsed = 0;\n  let raf;\n  let currentStep;\n  let zoomStart, zoomEnd, changeRectangleFinishedCallback;\n  let doneCallback;\n  let positions, nodeUIs;\n  const scene = sceneLayerManager.getScene();\n\n  return {\n    startZoomOut,\n    startZoomIn,\n    startFadeOut,\n    startSceneRestoration,\n    dispose() {\n      cancelAnimationFrame(raf);\n    }\n  }\n\n  function startZoomOut(cb) {\n    elapsed = 0;\n    zoomStart = getCurrentBoundingRectangle();\n    let {width, height, top, left} = zoomOutViewBox;\n    zoomEnd = {\n      top, \n      left,\n      right: left + width,\n      bottom: top + height\n    };\n\n    currentStep = changeRectangle;\n    changeRectangleFinishedCallback = () => {\n      startFadeOut();\n      cb();\n    };\n\n    cancelAnimationFrame(raf);\n    raf = requestAnimationFrame(frame);\n  }\n\n  function startZoomIn(boundingRect, doneCallback) {\n    currentStep = changeRectangle;\n    elapsed = 0;\n    zoomStart = getCurrentBoundingRectangle();\n    zoomEnd = boundingRect;\n    cancelAnimationFrame(raf);\n    raf = requestAnimationFrame(frame);\n    changeRectangleFinishedCallback = null;\n    if (doneCallback) {\n      changeRectangleFinishedCallback = doneCallback;\n    }\n  }\n\n  function getCurrentBoundingRectangle() {\n    let dc = scene.getDrawContext();\n    const {position} = dc.view;\n    let side = position[2] * Math.tan(dc.fov / 2) / dc.pixelRatio;\n    return {\n      left: position[0] - side, \n      right: position[0] + side, \n      top: position[1] - side, \n      bottom: position[1] + side\n    };\n  }\n\n  function startFadeOut() {\n    sceneLayerManager.getNamedGroup(NamedGroups.MainGraph).elements.forEach(el => {\n      el.opacity = 0;\n    });\n    sceneLayerManager.hideNamedGroup(NamedGroups.MainGraph);\n  }\n\n  function startSceneRestoration(done, current, target, nodeCollections, immediate) {\n    if (immediate) {\n      // TODO: this is ugly. Please refactor.\n      sceneLayerManager.restoreNamedGroup(NamedGroups.MainGraph);\n      sceneLayerManager.getNamedGroup(NamedGroups.MainGraph).elements.forEach(el => {\n        el.opacity = 1;\n      });\n      done();\n      return;\n    }\n    elapsed = 0;\n    currentStep = fadeIn;\n    cancelAnimationFrame(raf);\n    raf = requestAnimationFrame(frame);\n    doneCallback = done;\n\n    nodeUIs = nodeCollections;\n    positions = [];\n    current.forEach((ui, name) => {\n      positions.push({\n        ui,\n        from: copyPosition(ui.position),\n        to: target.get(name).position\n      });\n    })\n  }\n\n  function frame() {\n    if (elapsed >= durationInFrames) {\n      elapsed = durationInFrames;\n      currentStep(1);\n      return;\n    } \n\n    raf = requestAnimationFrame(frame);\n    currentStep(elapsed / durationInFrames);\n    elapsed += 1;\n  }\n\n  function changeRectangle(x) {\n    if (x === 1) {\n      if (changeRectangleFinishedCallback) changeRectangleFinishedCallback();\n      changeRectangleFinishedCallback = null;\n      return;\n    }\n\n    scene.setViewBox({\n      top: lerp(zoomStart.top, zoomEnd.top, x),\n      left: lerp(zoomStart.left, zoomEnd.left, x),\n      right: lerp(zoomStart.right, zoomEnd.right, x),\n      bottom: lerp(zoomStart.bottom, zoomEnd.bottom, x)\n    });\n    scene.renderFrame();\n  }\n\n  function lerp(from, to, t) {\n    return to * t + from * (1 - t);\n  }\n\n  function fadeIn(x) {\n    if (x === 0) {\n      // we we just start - let's bring back all nodes from original scene\n      // Their opacity is 0.\n      sceneLayerManager.restoreNamedGroup(NamedGroups.MainGraph);\n    }\n    // we will be changing opacity back to normal:\n    let opacity = Easing.easeInQuart(x);\n    sceneLayerManager.getNamedGroup(NamedGroups.MainGraph).elements.forEach(el => {\n      el.opacity = opacity;\n    });\n    positions.forEach(node => {\n      let ui = node.ui;\n      ui.position[0] = lerp(node.from[0], node.to[0], x);\n      ui.position[1] = lerp(node.from[1], node.to[1], x);\n      nodeUIs.update(ui.id, ui);\n    });\n    sceneLayerManager.getScene().renderFrame();\n\n    if (x === 1 && doneCallback) {\n      // all is done, let's notify the client\n      doneCallback();\n    }\n  }\n}\n\nfunction copyPosition(pos) {\n  return [pos[0], pos[1], pos[2]];\n}","export default function createSceneLayerManager(scene) {\n  // Allows clients to hide/restore multiple elements at once:\n  const namedGroups = new Map(); // string -> {elements: Element[], isHidden: Boolean}\n\n  return {\n    addToLayer,\n    addToNamedGroup,\n    hideNamedGroup,\n    restoreNamedGroup,\n    getNamedGroup: (groupName) => namedGroups.get(groupName),\n    getScene: () => scene\n  };\n\n  function restoreNamedGroup(groupName) {\n    let group = namedGroups.get(groupName);\n    if (group === undefined) throw new Error('No such group: ' + groupName);\n    if (!group.isHidden) return; // already restored\n    group.isHidden = false;\n    group.elements.forEach(element => {\n      // put it back to the previous z-index\n      addToLayer(element, element.layer);\n    });\n  }\n\n  function addToNamedGroup(element, groupName) {\n    let group = namedGroups.get(groupName);\n    if (group === undefined) {\n      group = {\n        elements: [],\n        isHidden: false\n      }\n      namedGroups.set(groupName, group);\n    }\n    // Note: it's your responsibility to avoid duplicates\n    group.elements.push(element);\n  }\n\n  function hideNamedGroup(groupName) {\n    let group = namedGroups.get(groupName);\n    if (!group) {\n      throw new Error('No group with such name: ' + groupName);\n    }\n\n    if (group.isHidden) return; // already hidden;\n    group.isHidden = true;\n    group.elements.forEach(element => {\n      if (element.parent) element.parent.removeChild(element);\n    });\n  }\n\n  function addToLayer(element, layerIndex) {\n    element.layer = layerIndex\n    let rootElement = scene.getRoot();\n    let lastElementWithLowerLayerIndex = null;\n    rootElement.children.forEach(el => {\n      let layer = el.layer;\n      if (layer === undefined) {\n        // z-index may not be correct!\n        console.warn('Scene element without layer index', layer);\n        layer = 0;\n      }\n      if (layer <= layerIndex) {\n        lastElementWithLowerLayerIndex = el;\n      }\n    });\n    if (lastElementWithLowerLayerIndex) {\n      rootElement.insertChildAfter(element, lastElementWithLowerLayerIndex);\n    } else {\n      // none of the existing layers is lower than our own layer index,\n      // send us to the very back:\n      rootElement.appendChild(element, /* sendToBack */ true);\n    }\n  }\n}","import {GLCollection, defineProgram, ColorAttribute} from 'w-gl';\n\nconst tex = [\n  [0, 0],\n  [1, 0],\n  [1, 1],\n  [1, 1],\n  [0, 1],\n  [0, 0]\n]\nexport class BoxCollection extends GLCollection {\n  constructor(gl, options) {\n    let program = defineProgram({\n      gl,\n      capacity: options.capacity,\n      vertex: `\n  uniform mat4 modelViewProjection;\n  attribute vec3 point;\n  attribute vec2 texCoordinate;\n  attribute vec4 color;\n  varying vec3 vPoint;\n  varying vec2 vTex;\n  varying vec4 vColor;\n\n  void main() {\n    vec4 pos = modelViewProjection * vec4(point, 1.0);\n    gl_Position = pos;\n    vPoint = point;\n    vTex = texCoordinate;\n    vColor = color.abgr;\n  }`,\n\n      fragment: `\n      precision highp float;\n      uniform vec3 camera;\n      varying vec3 vPoint;\n      varying vec2 vTex;\n      varying vec4 vColor;\n\n      void main() {\n        vec4 col = vec4(0);\n        col += length(smoothstep(0.48, 0.5, abs(vTex - 0.5)));\n        col += vColor;\n        col[3] = 0.7;\n        gl_FragColor = col;\n      }`,\n\n        attributes: {\n          color: new ColorAttribute(),\n        },\n        preDrawHook(/* programInfo */) {\n          return `\n          // gl.disable(gl.BLEND);\n          gl.enable(gl.DEPTH_TEST);\n          gl.depthFunc(gl.LEQUAL);\n          `;\n        },\n        postDrawHook() {\n          return `\n          //gl.enable(gl.BLEND);\n           gl.disable(gl.DEPTH_TEST);\n           `;\n        },\n    });\n    super(program);\n\n    this.uiIDToUI = new Map();\n  }\n\n  draw(gl, drawContext) {\n    if (!this.uniforms) {\n      this.uniforms = {\n        modelViewProjection: this.modelViewProjection,\n        camera: drawContext.view.position\n      };\n    }\n    this.uniforms.opacity = this.opacity;\n    this.program.draw(this.uniforms);\n  }\n\n  setColor(box, color){\n    this.setFaceColor(box.front, color);\n    this.setFaceColor(box.left, color);\n    this.setFaceColor(box.right, color);\n    this.setFaceColor(box.back, color);\n  }\n\n  setFaceColor(face, color) {\n    face.forEach(point => {\n      point.color = color;\n      this.update(point.uiId, point);\n    })\n  }\n\n  addBox(box) {\n    let frontUI, leftUI, rightUI, backUI, topUI;\n    let front = this.getFace(box.width, box.height);\n    this.rotateFace(front, Math.PI/2, 'x')\n    this.translateFace(front, [0, 0, box.height/2]);\n    this.rotateFace(front, Math.PI/2, 'z')\n    this.translateFace(front, [box.x+box.width/2,box.y, 0]);\n    //this.translateFace(front, [box.x, box.y, 0]);\n    frontUI = this.addFace(front);\n    frontUI.name = 'front';\n\n    let left = this.getFace(box.width, box.height);\n    this.rotateFace(left, Math.PI/2, 'x')\n    this.translateFace(left, [0, 0, box.height / 2]);\n    this.translateFace(left, [0, -box.width/2, 0]);\n    this.translateFace(left, [box.x, box.y, 0]);\n    leftUI = this.addFace(left);\n    leftUI.name = 'left';\n\n    let right = this.getFace(box.width, box.height);\n    this.rotateFace(right, Math.PI/2, 'x')\n    this.translateFace(right, [0, 0, box.height / 2]);\n    this.rotateFace(right, Math.PI, 'z')\n    this.translateFace(right, [0, box.width/2, 0]);\n    this.translateFace(right, [box.x, box.y, 0]);\n    rightUI = this.addFace(right);\n    rightUI.name = 'right';\n\n    let back = this.getFace(box.width, box.height);\n    this.rotateFace(back, Math.PI/2, 'x')\n    this.translateFace(back, [0, 0, box.height/2]);\n    this.rotateFace(back, -Math.PI/2, 'z')\n    this.translateFace(back, [-box.width/2,0, 0]);\n    this.translateFace(back, [box.x, box.y, 0]);\n    backUI = this.addFace(back);\n    backUI.name = 'back';\n\n    let top = this.getFace(box.width, box.width);\n    this.translateFace(top, [box.x, box.y, box.height]);\n    topUI = this.addFace(top);\n\n    return {\n      front: frontUI,\n      left: leftUI,\n      right: rightUI,\n      back: backUI,\n      top: topUI\n    }\n  }\n\n  removeBox(box) {\n    this.removeFace(box.front);\n    this.removeFace(box.left);\n    this.removeFace(box.right);\n    this.removeFace(box.back);\n  }\n\n  translateFace(face, d) {\n    face.forEach(point => {\n      point[0] += d[0];\n      point[1] += d[1];\n      point[2] += d[2];\n    });\n  }\n\n  rotateFace(face, angle, axis) {\n    let c = Math.cos(angle), s = Math.sin(angle);\n    face.forEach(point => {\n      let [x, y, z] = point;\n      let x0, y0, z0;\n      if (axis === 'z') {\n        x0 = c * x - s * y;\n        y0 = s * x + c * y;\n        z0 = z;\n      } else if (axis === 'y') {\n        x0 = x * c + z * s;\n        y0 = y;\n        z0 = -x * s + z * c;\n      }  else if (axis === 'x') {\n        x0 = x;\n        y0 = y * c - z * s;\n        z0 = y * s + z * c;\n      } else {\n        throw new Error('Not supported axis ' + axis);\n      }\n      point[0] = x0;\n      point[1] = y0;\n      point[2] = z0;\n    })\n  }\n\n  getFace(width, height) {\n    return [\n      [ - width/2, - height/2, 0], // (0, 0)\n      [ + width/2, - height/2, 0], // (1, 0)\n      [ + width/2, + height/2, 0], // (1, 1)\n\n      [ + width/2, + height/2, 0], // (1, 1)\n      [ - width/2, + height/2, 0], // (0, 1)\n      [ - width/2, - height/2, 0], // (0, 0)\n    ];\n  }\n\n  addFace(quadPoints) {\n    return quadPoints.map((point, i) => {\n      let ui = {\n        point,\n        uiId: -1,\n        color: 0x292C33ff,\n        texCoordinate: tex[i]\n      };\n      ui.uiId = this.add(ui);\n      this.uiIDToUI.set(ui.uiId, ui);\n      return ui;\n    })\n  }\n\n  removeFace(quadUI) {\n    quadUI.forEach(ui => {\n      let oldId = ui.uiId;\n      let newId = this.remove(oldId);\n      let movedUI = this.uiIDToUI.get(newId);\n      if(!movedUI) {\n        throw new Error(\"Missing ui element\");\n      }\n      this.uiIDToUI.delete(newId);\n      if (newId !== oldId) {\n        movedUI.uiId = oldId;\n        this.uiIDToUI.set(oldId, movedUI);\n      }\n    })\n  }\n\n  clear() {\n    throw new Error('Not implemented');\n  }\n}\n","import { fpsControls, mapControls, createFPSControlsUI, DomElement, DomContainer } from 'w-gl';\nimport { BoxCollection } from './BoxCollection';\nimport {quat, mat4, vec3} from 'gl-matrix';\nimport knn from 'rbush-knn';\nimport bus, { setProgress } from './bus';\nimport { formatNumber } from './utils';\n\nexport default function createStreetView(scene, spatialIndex, nameToUI, subreddit) {\n  let api = {\n    enter, \n    exit, \n    dispose,\n    lookAt\n  };\n  let fpsUI;\n  let boxes, items, asyncRender;\n  let visibleBoxes = new Set();\n  let visibilityUpdate = 0;\n  let uiToBox = new Map();\n  let visibleElements = new Map();\n  let lastVisibilityUpdate = 0;\n  let domContainer = new DomContainer({seeThrough: true});\n\n  return api;\n\n  function lookAt(name) {\n    let node = nameToUI.get(name);\n    if (!node) return;\n\n    let [x, y] = node.position;\n    let size = node.size || 10;\n    let a = Math.tan(scene.getDrawContext().fov/2);\n    let cameraController = scene.getCameraController();\n    cameraController.lookAt(\n      [x, y - 2*size/a, 4],\n      [x, y, size], \n    );\n  }\n\n  function dispose() {\n    cancelAnimationFrame(asyncRender);\n    asyncRender = 0;\n    clearTimeout(visibilityUpdate);\n    scene.removeChild(boxes);\n    scene.removeChild(domContainer);\n  }\n\n  function enter() {\n    let cameraController = scene.setCameraController(fpsControls);\n    lookAt(subreddit);\n\n    cameraController.setMoveSpeed(10).setScrollSpeed(100).setFlySpeed(2).enableMouseCapture(true);\n    fpsUI = createFPSControlsUI(document.body, cameraController);\n\n    items = spatialIndex.all();\n    boxes = new BoxCollection(scene.getGL(), {\n      capacity: items.length * 5 * 6\n    });\n    scene.appendChild(boxes);\n    scene.appendChild(domContainer);\n\n    renderFirstBatch(subreddit);\n    scheduleVisibilityUpdate();\n  }\n\n  function renderFirstBatch(name) {\n    let node = nameToUI.get(name);\n    if (!node) return;\n\n    let [x, y] = node.position;\n    let neighbors = knn(spatialIndex, x, y, 60);\n    neighbors.forEach(item => {\n      let ui = item.ui;\n      let [x, y] = ui.position;\n      let box = boxes.addBox({\n        x, y,\n        width: ui.size,\n        height: ui.size * 2\n      });\n      uiToBox.set(ui, box);\n    });\n\n    renderTheRest();\n  }\n\n  function renderTheRest() {\n    let index = 0;\n    asyncRender = requestAnimationFrame(processNext);\n\n    function processNext() {\n      let localCount = 0;\n      while (index < items.length && localCount < 1000) {\n        let item = items[index];\n        let ui = item.ui;\n        index += 1;\n\n        if (uiToBox.has(ui)) continue; // processed in the first batch;\n\n        let [x, y] = ui.position;\n        let box = boxes.addBox({\n          x, y,\n          width: ui.size,\n          height: ui.size * 2\n        });\n        uiToBox.set(ui, box);\n        localCount += 1;\n      }\n\n      scene.renderFrame();\n\n      if (index < items.length) {\n        setProgress(() => ({\n          message: 'Initializing street view: ' + formatNumber(index) + '/' + formatNumber(items.length)\n        }));\n        asyncRender = requestAnimationFrame(processNext);\n      } else {\n        // all rendered!\n        setProgress(() => ({\n          streetViewDone: true,\n        }));\n        scene.on('transform', handleTransform);\n        // scheduleVisibilityUpdate();\n        asyncRender = 0;\n      }\n    }\n  }\n\n  function exit() {\n    visibleElements.forEach((el, name) => hideElement(name));\n\n    fpsUI.dispose();\n    scene.off('transform', handleTransform);\n    scene.setCameraController(mapControls);\n    scene.removeChild(boxes);\n  }\n\n  function showElement(face, name) {\n    let el = visibleElements.get(name);\n    if (!el || face !== el.face) {\n      if (el && el.face) {\n        // boxes.setFaceColor(el.face, 0x606060ff);\n        domContainer.removeChild(el.dom);\n      }\n      let a = face[0].point;\n      let b = face[1].point;\n      let c = face[2].point;\n\n      let dx = b[0] - a[0];\n      let dy = b[1] - a[1];\n      let l = Math.sqrt(dx * dx + dy * dy);\n      let dom = new DomElement({width: '400px',  height: '800px'});\n      let scale = l/400; // assume 400 px for dom element width\n\n      // center of the face\n      let ox = (a[0] + b[0]) / 2;\n      let oy = (a[1] + b[1]) / 2;\n      let oz = (a[2] + c[2]) / 2;\n\n      // face normal\n      let n = vec3.cross([], [b[0] - a[0], b[1] - a[1], b[2] - a[2]], [c[0] - a[0], c[1] - a[1], c[2] - a[2]])\n      normalize(n, n);\n      // rotate the dom plane normal ([0, 0, 1]) to match face normal\n      let q = quat.rotationTo([], [0, 0, 1], n);\n      // Rotation above is not unique, so we manually rotate dom plane until it aligns with \n      // logical box placement. This probably could be done easier, I just don't know how yet:\n      if (face.name === 'back') {\n        quat.rotateZ(q, q, -Math.PI/2)\n      } else if (face.name === 'front') {\n        quat.rotateZ(q, q, Math.PI/2)\n      } else if (face.name === 'right') {\n        quat.rotateZ(q, q, Math.PI)\n      }\n\n      mat4.fromRotationTranslationScale(dom.model, q,  [ox, oy, oz], [scale, scale, scale]);\n      dom.worldTransformNeedsUpdate = true;\n      bus.fire('append-dom', {name: name, dom: dom.el})\n      domContainer.appendChild(dom)\n\n      visibleElements.set(name, {face, dom});\n    } \n  }\n  function hideElement(name) {\n    let el = visibleElements.get(name);\n    if (el) {\n      bus.fire('remove-dom', {name: name, dom: el.dom.el})\n      domContainer.removeChild(el.dom);\n      visibleElements.delete(name);\n    }\n  }\n\n  function handleTransform(e) {\n    let dc = e.drawContext;\n    let z = dc.view.position[2];\n    if(z < 10) {\n      dc.view.position[2] = 10;\n      e.updated = true;\n    }\n    let moveSpeed = 3+smoothStep(0, 3000, z) * 14;\n    scene.getCameraController().setMoveSpeed(moveSpeed);\n    scheduleVisibilityUpdate();\n  }\n\n  function scheduleVisibilityUpdate() {\n    clearTimeout(visibilityUpdate);\n    let now = window.performance.now();\n    let elapsed = now - lastVisibilityUpdate;\n    if (elapsed < 500) {\n      visibilityUpdate = setTimeout(updateVisibility, elapsed);\n    } else {\n      updateVisibility();\n    }\n  }\n\n  function updateVisibility() {\n    lastVisibilityUpdate = window.performance.now();\n\n    let dc = scene.getDrawContext();\n\n    let eye = dc.view.position;\n    let center = dc.view.center;\n    let lookDirection = getDirection(eye, center);\n    let neighbors = getMostVisibleNeighbors(eye, lookDirection, /* maxNeighbors =*/ 10, /* maxAngle =*/ 35);\n    neighbors = neighbors.map(n => {\n      let dx = n.ui.position[0] - eye[0];\n      let dy = n.ui.position[1] - eye[1];\n      let dist = (dx * dx + dy * dy);\n      return {\n        ui: n.ui,\n        size: n.ui.size,\n        dist \n      }\n    }).sort((a, b) => {\n      return b.size/b.dist - a.size/a.dist; //b.ui.size - a.ui.size\n    }).slice(0, 4);\n    if (!neighbors.length) return;\n\n    let nowVisible = new Set();\n    neighbors.forEach(box => {\n      if (uiToBox.has(box.ui)) {\n        // we might not have finished rendering yet.\n        nowVisible.add(box.ui);\n      }\n    });\n    visibleBoxes.forEach(ui => {\n      if (!nowVisible.has(ui)) {\n        hideElement(ui.name);\n      }\n    });\n\n    let intersections = [];\n    nowVisible.forEach(ui => {\n      let box = uiToBox.get(ui);\n      if(!box) {\n        throw new Error('missing ui');\n      }\n\n      let minT = Infinity;\n      let minFace = box.front;\n      minT = checkFaceIntersection(box, box.front);\n\n      let t = checkFaceIntersection(box, box.back);\n      if (t < minT) { minT = t; minFace = box.back; }\n\n      t = checkFaceIntersection(box, box.left);\n      if (t < minT) { minT = t; minFace = box.left; }\n\n      t = checkFaceIntersection(box, box.right);\n      if (t < minT) { minT = t; minFace = box.right; }\n\n      if (Number.isFinite(minT)) intersections.push({t: minT, face: minFace, name: ui.name});\n    });\n\n    visibleBoxes = nowVisible;\n    intersections.sort((a, b) => a.t - b.t)\n    let count = Math.min(10, intersections.length);\n    for (let i = 0; i< count; ++i) {\n      showElement(intersections[i].face, intersections[i].name);\n    }\n    scene.renderFrame();\n\n    function checkFaceIntersection(box, face) {\n      let a = face[0].point;\n      let b = face[1].point;\n      return castRay(eye, a, b);\n    }\n\n    function castRay(from, a, b) {\n      let [r_px, r_py] = from;\n      let [s_px, s_py] = a;\n      let s_dx = b[0] - a[0];\n      let s_dy = b[1] - a[1];\n      let cx = s_px + 0.5*s_dx;\n      let cy = s_py + 0.5*s_dy;\n      let [r_dx, r_dy] = getDirection(from, [cx, cy]); \n      let t2 = (r_dx*(s_py-r_py) + r_dy*(r_px-s_px))/(s_dx*r_dy - s_dy*r_dx)\n      let ta = (s_px+s_dx*t2-r_px)/r_dx;\n      if (Number.isNaN(ta)) return 0; // ray is directly on the segment?\n      if (ta < 0) ta = Infinity; // Point is behind us\n      return ta;\n    }\n  }\n\n  function getDirection(from, to) {\n    let dir = [to[0] - from[0], to[1] - from[1]];\n    let l = Math.sqrt(dir[0]*dir[0] + dir[1] * dir[1]);\n    if (l < 1e-3) return;\n    dir[0] /= l; dir[1] /= l;\n    return dir;\n  }\n\n  function getMostVisibleNeighbors(eye, lookDirection, maxCount, maxAngle) {\n    if (!lookDirection) return []; // looking down?\n\n    // not only we find N nearest boxes, we also filter them so that\n    // only those in front of the camera are selected\n    return knn(spatialIndex, eye[0], eye[1], maxCount, checkAngle);\n\n    function checkAngle(candidate) {\n      let x = (candidate.minX + candidate.maxX)/2;\n      let y = (candidate.minY + candidate.maxY)/2;\n      let candidateDirection = getDirection(eye, [x, y])\n      if (!candidateDirection) return false;\n\n      // We take a dot product of two unit vectors which is equal to\n      // the cosine of angle between them. This lets us measure angle\n      // between the vector where camera looks and where the candidate is.\n      // If that angle is too big - we ignore the candidate.\n\n      let dot = lookDirection[0] * candidateDirection[0] + lookDirection[1] * candidateDirection[1];\n      let angle = Math.acos(dot); // no need to divide, as we are normalized\n      return angle < maxAngle * Math.PI / 180;\n    }\n  }\n}\n\nfunction smoothStep(min, max, value) {\n  var x = Math.max(0, Math.min(1, (value-min)/(max-min)));\n  return x*x*(3 - 2*x);\n}\n\nfunction normalize(out, a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let len = x * x + y * y + z * z;\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}","import { createScene } from 'w-gl';\nimport createSVGLoader from './createSVGLoader';\nimport {getPointsFromPathData, getElementFillColor} from 'streaming-svg-parser';\nimport PointCollection from './PointCollection';\nimport PolyLineCollection from './PolyLineCollection';\nimport TextCollection from './MSDFTextCollection';\nimport ColoredTextCollection from './ColoredTextCollection';\nimport bus, {setProgress} from './bus';\nimport createFuzzySearcher from './createFuzzySearcher';\nimport {debounce, formatNumber} from './utils'\nimport appState from '../appState';\nimport createGraph from 'ngraph.graph';\nimport createSubgraphVisualizer from './createSubgraphVisualizer';\nimport createPointerEventsHandler from './createPointerEventsHandler';\nimport createSceneLayerManager from './createSceneLayerManager';\nimport {Colors, LayerLevels, NamedGroups} from './constants';\nimport createStreetView from './createStreetView';\nimport getComplimentaryColor from './getComplimentaryColor';\n\nexport default function createStreamingSVGRenderer(canvas) {\n  let ignoreSVGViewBox = false;\n  let isStreetView = false;\n  let preStreetViewCameraPosition;\n  let inputTarget;\n  let streetView;\n  let scene = initScene();\n  let fuzzySearcher = createFuzzySearcher();\n  window.fuzzySearcher = fuzzySearcher; // TODO: Don't use window.\n\n  let persistedName = appState.query;\n  let nodes = new PointCollection(scene.getGL());\n  let boundariesFill = new PolyLineCollection(scene.getGL(), {color: 0x124182a4, opacity: 1.0});\n\n  let text = new TextCollection(scene.getGL());\n  let labelsText = new ColoredTextCollection(scene.getGL());\n\n  let loader;\n  let viewBox;\n  let currentTransform = createTransformParser();\n  let positions = [];\n\n  const nodeNameToUI = new Map();\n  const nodesByComponent = new Map();\n  const complimentaryColor = new Map();\n  const clusterColors = new Map();\n\n  const setProgressDebounced = debounce(setProgress, 100, window);\n  let subgraphVisualizer;\n  const sceneLayerManager = createSceneLayerManager(scene);\n\n  sceneLayerManager.addToLayer(boundariesFill, LayerLevels.Polygons);\n  sceneLayerManager.addToLayer(nodes, LayerLevels.Nodes);\n  sceneLayerManager.addToLayer(text, LayerLevels.Text);\n  sceneLayerManager.addToLayer(labelsText, LayerLevels.Labels)\n\n  sceneLayerManager.addToNamedGroup(boundariesFill, NamedGroups.MainGraph);\n  sceneLayerManager.addToNamedGroup(nodes, NamedGroups.MainGraph);\n  sceneLayerManager.addToNamedGroup(text, NamedGroups.MainGraph);\n  sceneLayerManager.addToNamedGroup(labelsText, NamedGroups.MainGraph);\n\n  // This is our bread and butter for touch/mouse event handling\n  const pointerEvents = createPointerEventsHandler(sceneLayerManager, {\n    elementsGroupName: NamedGroups.MainGraph,\n    onTransform: () => {\n      // we don't want to update the query string when subgraph is active\n      if (subgraphVisualizer) return;\n\n      appState.saveScenePosition(scene);\n    },\n    getGraph: () => loader && loader.getGraph(),\n    getHighlightedNodes,\n    getHighlightedLinks,\n  });\n\n  bus.on('focus-node', focusNode);\n  bus.on('unfocus', unfocus);\n  bus.on('exit-subgraph', exitSubgraphMode);\n\n  return {\n    loadSVG,\n    focus() {\n      canvas.focus();\n    },\n    isStreetViewMode() {\n      return isStreetView\n    },\n    dispose,\n    showRelated,\n    showStreetView,\n    exitStreetView,\n    getScene() {\n      return scene;\n    },\n  };\n\n  function getHighlightedNodes(ui) {\n    let graph = loader && loader.getGraph();\n    if (!graph) return [];\n\n    const neighbors = nodesByComponent.get(ui.componentId);\n    const hlNode = {...nodeNameToUI.get(ui.name)};\n    hlNode.color = Colors.PRIMARY_HIGHLIGHT_COLOR ;\n    let nodeUIs = [hlNode];\n    graph.forEachLinkedNode(ui.name, (other) => {\n      const hlNode = {...nodeNameToUI.get(other.id)};\n      hlNode.color = Colors.SECONDARY_HIGHLIGHT_COLOR;\n      nodeUIs.push(hlNode);\n      if (!neighbors.has(other.id)) return;\n    });\n\n    return nodeUIs;\n  }\n\n  function getHighlightedLinks(ui) {\n    let graph = loader && loader.getGraph();\n    if (!graph) return [];\n\n    let maxLinks = 10;\n    let neighbors = nodesByComponent.get(ui.componentId);\n    let secondaryLinkColor = complimentaryColor.get(ui.componentId);\n    let idx;\n    let linkUIs = [];\n\n    neighbors.forEach((neighborId) => {\n      idx = 0;\n      graph.forEachLinkedNode(neighborId, (other) => {\n        if (!neighbors.has(other.id)) return;\n        let isFirstLevel = neighborId === ui.name || other.id === ui.name;\n        if (idx > maxLinks && !isFirstLevel) return;\n        linkUIs.push({\n          from: nodeNameToUI.get(neighborId).position,\n          to: nodeNameToUI.get(other.id).position,\n          color: isFirstLevel ? 0xffffffff : secondaryLinkColor, \n          isFirstLevel\n        });\n        idx += 1;\n      });\n    });\n\n    return linkUIs;\n  }\n\n  function showStreetView(subreddit) {\n    // sceneLayerManager.hideNamedGroup(NamedGroups.MainGraph);\n    // let graph = loader.getGraph();\n    // let node = graph.getNode(subreddit);\n    isStreetView = true;\n    let currentPointerEvents = subgraphVisualizer ? subgraphVisualizer.getPointerEvents() : pointerEvents;\n    if (!streetView) {\n      let nameToUI = subgraphVisualizer ? subgraphVisualizer.getNameToUI() : nodeNameToUI;\n      streetView = createStreetView(\n        scene, \n        currentPointerEvents.getIndex(), \n        nameToUI, \n        subreddit);\n    }\n    nodes.hide();\n    currentPointerEvents.setPaused(true); // let the subgraph to handle the events\n    preStreetViewCameraPosition = scene.getDrawContext().view.position[2];\n    streetView.enter();\n  }\n\n  function exitStreetView() {\n    nodes.show();\n    streetView.exit();\n    streetView.dispose();\n    streetView = null;\n\n    scene.getDrawContext().view.position[2] = preStreetViewCameraPosition;\n    scene.getCameraController().setViewBox();\n    let currentPointerEvents = subgraphVisualizer ? subgraphVisualizer.getPointerEvents() : pointerEvents;\n    currentPointerEvents.setPaused(false);\n    isStreetView = false;\n    if (inputTarget) inputTarget.focus();\n  }\n\n  function lookAtNode(subreddit) {\n    if (isStreetView) {\n      streetView.lookAt(subreddit);\n    } else {\n      let node = nodeNameToUI.get(subreddit);\n      if (!node) return;\n\n      let [x, y] = node.position;\n      let size = node.size || 10;\n      size *= 2;\n      scene.setViewBox({\n        left: x - size,\n        top: y - size,\n        right: x + size,\n        bottom: y + size,\n      });\n\n      return node;\n    }\n  }\n\n  function showRelated(subreddit) {\n    let subgraph = createGraph();\n    subgraph.addNode(subreddit, {isRoot: true});\n\n    let graph = loader.getGraph();\n    let subgraphNodes = new Set();\n    addNeighbors(subreddit, subgraphNodes);\n\n    Array.from(subgraphNodes).forEach(node => {\n      addNeighbors(node, subgraphNodes);\n    });\n\n    subgraphNodes.forEach(node => {\n      let addedNode = subgraph.getNode(node);\n      if (!addedNode || !addedNode.data) {\n        let isFirstChild = graph.hasLink(node, subreddit) || graph.hasLink(subgraph, node);\n        subgraph.addNode(node, {isFirstChild});\n      }\n\n      graph.forEachLinkedNode(node, (otherNode, link) => {\n        if (!subgraphNodes.has(otherNode.id)) return;\n        if (subgraph.hasLink(link.fromId, link.toId)) return;\n\n        let isRootLevel = (link.fromId === subreddit) || (link.toId === subreddit);\n        subgraph.addLink(link.fromId, link.toId, {isRootLevel});\n      });\n    });\n\n    pointerEvents.setPaused(true); // let the subgraph to handle the events\n    if (subgraphVisualizer) {\n      // we don't want any animation here. Dispose right away!\n      subgraphVisualizer.dispose();\n      subgraphVisualizer = null;\n    } \n    runSubGraphVisualizer();\n\n    function addNeighbors(node, neighborsSet) {\n      graph.forEachLinkedNode(node, otherNode => {\n        neighborsSet.add(otherNode.id);\n      });\n    }\n\n    function runSubGraphVisualizer() {\n      subgraphVisualizer = createSubgraphVisualizer(subgraph, viewBox, sceneLayerManager, nodeNameToUI)\n      subgraphVisualizer.run();\n    }\n  }\n\n  function dispose() {\n    if (loader) loader.dispose();\n    bus.off('focus-node', focusNode);\n    bus.off('unfocus', unfocus);\n    bus.off('exit-subgraph', exitSubgraphMode);\n\n    pointerEvents.dispose();\n    scene.dispose();\n  }\n\n  function focusNode(nodeName) {\n    // this means they entered something in the search box\n    let ui = lookAtNode(nodeName);\n    if (!ui) return;\n\n    if (subgraphVisualizer) {\n      subgraphVisualizer.dispose(() => {\n        pointerEvents.setPaused(false); // we take care of the events now\n      });\n      subgraphVisualizer = null;\n    }\n\n    pointerEvents.focusUI(ui);\n    scene.renderFrame();\n    if (inputTarget) inputTarget.focus();\n  }\n\n  function unfocus() {\n    // This means they closed the sidebar\n    pointerEvents.clearHighlights();\n\n    scene.renderFrame();\n  }\n\n  function exitSubgraphMode() {\n    if (subgraphVisualizer) {\n      subgraphVisualizer.dispose(() => {\n        pointerEvents.setPaused(false); // take care of the events now\n      });\n      subgraphVisualizer = null;\n      if (inputTarget) inputTarget.focus();\n    }\n  }\n\n  function loadSVG(path) {\n    if (loader) loader.dispose();\n\n    loader = createSVGLoader(path)\n      .on('element-start', handleElementStart)\n      .on('element-end', handleElementEnd)\n      .load();\n  }\n\n  function handleElementStart(element) {\n    // TODO: this would be better done with FSM\n    if (element.tagName === 'svg') {\n      let viewBoxArr = (element.attributes.get('viewBox') || '0 0 1024 1024')\n        .split(' ')\n        .map((x) => Number.parseFloat(x))\n        .filter(finiteNumber);\n\n      if (viewBoxArr.length !== 4) throw new Error('Unknown viewBox definition: ' + element.attributes.get('viewBox'));\n\n      viewBox = {\n        left: viewBoxArr[0],\n        top: viewBoxArr[1],\n        width: viewBoxArr[2],\n        height: viewBoxArr[3],\n      };\n\n      if (!ignoreSVGViewBox) {\n        scene.setViewBox({\n          left: viewBox.left,\n          top: viewBox.top,\n          right: viewBox.left + viewBox.width,\n          bottom: viewBox.top + viewBox.height,\n        });\n      }\n    } else if (element.tagName === 'path') {\n      addBorder(element);\n    } else if (element.tagName === 'circle') {\n      addNode(element);\n    } else {\n      let transform = element.attributes.get('transform');\n      if (transform) currentTransform.pushTransform(transform);\n    }\n  }\n\n  function handleElementEnd(element) {\n    let transform = element.attributes.get('transform');\n    if (transform) currentTransform.popTransform(transform);\n    if (element.tagName === 'text' && element.innerText) {\n      appendTextLabel(element);\n    }\n  }\n\n  function appendTextLabel(el) {\n    let fontSize = getNumericAttribute(el, 'font-size');\n    let alpha = Math.floor(\n      (el.attributes.has('fill-opacity') ? getNumericAttribute(el, 'fill-opacity') : 0.2\n    ) * 0xff);\n    let color = 0x00000000;\n    if (el.attributes.has('fill')) color = hexColor(getElementFillColor(el));\n    color = (color & (0xffffff00)) | alpha;\n    labelsText.addText({\n      x: getNumericAttribute(el, 'x'),\n      y: transformY(getNumericAttribute(el, 'y') - fontSize),\n      color,\n      text: el.innerText,\n      fontSize,\n    })\n\n  }\n\n  function addNode(el) {\n    let x = getNumericAttribute(el, 'cx');\n    let y = transformY(getNumericAttribute(el, 'cy'));\n    let r = getNumericAttribute(el, 'r');\n    let nodeName = getTextAttribute(el, 'id');\n    if (nodeName[0] === '_') nodeName = nodeName.substr(1);\n    if (nodeNameToUI.has(nodeName)) {\n      throw new Error('Duplicate node name ' + nodeName);\n    }\n    let componentId = getTextAttribute(el.parent, 'id');\n    let neighbors = nodesByComponent.get(componentId);\n    if (!neighbors) {\n      neighbors = new Set();\n      nodesByComponent.set(componentId, neighbors);\n    }\n    neighbors.add(nodeName);\n\n    let position = currentTransform.transform(x, y);\n    let ui = {\n      componentId,\n      position,\n      color: 0xdcdcdcff,\n      size: r * 2,\n      id: positions.length,\n      name: nodeName,\n    };\n    nodeNameToUI.set(nodeName, ui);\n    positions.push(ui);\n    pointerEvents.addNode(ui);\n    nodes.add(ui);\n\n    text.addText({\n      x: position[0],\n      y: position[1] - r,\n      text: nodeName,\n      limit: 3.14 * r,\n      cx: 0.5,\n    });\n    fuzzySearcher.addWord(nodeName);\n\n    setProgressDebounced(getLoadedSubreddits);\n    scene.renderFrame();\n    if (persistedName && nodeName === persistedName && appState.query === persistedName && !appState.userTypedSomething) {\n      bus.fire('show-subreddit', nodeName);\n    }\n  }\n\n  function getLoadedSubreddits() {\n    return {\n      message: 'Loaded ' + formatNumber(nodeNameToUI.size) + ' subreddits...'\n    };\n  }\n\n  function transformY(y) {\n    return viewBox.height + viewBox.top - y;\n  }\n\n  function addBorder(el) {\n    let { points, color } = parseBorder(el);\n    boundariesFill.addPolygon({ polygon: points, color: color });\n    let id = el.attributes.get('id');\n    let clusterId = (id && id.substr(1)) || '';\n    clusterColors.set(clusterId, color)\n    complimentaryColor.set(clusterId, getComplimentaryColor(color));\n    scene.renderFrame();\n  }\n\n  function initScene() {\n    inputTarget = document.querySelector('#events-input');\n    let scene = createScene(canvas, { \n      allowPinchRotation: false,\n      inputTarget,\n      near: 10,\n      maxZoom: 1500000,\n      minZoom: 50,\n      useDeviceOrientation: false\n    });\n\n    scene.setClearColor(0x0f / 255, 0x0f / 255, 0x0f / 255, 0);\n\n    let cameraPosition = appState.getCameraPosition();\n    if (cameraPosition) {\n      // This is a bit fragile, but it works:\n      let position = scene.getDrawContext().view.position;\n      position[0] = cameraPosition[0];\n      position[1] = cameraPosition[1];\n      position[2] = cameraPosition[2];\n      scene.getCameraController().setViewBox();\n      ignoreSVGViewBox = true;\n    } else {\n      let initialSceneSize = 500;\n      scene.setViewBox({\n        left: -initialSceneSize,\n        top: -initialSceneSize,\n        right: initialSceneSize,\n        bottom: initialSceneSize,\n      });\n    }\n    return scene;\n  }\n\n  function parseBorder(el) {\n    let points = getPointsFromPathData(el.attributes.get('d')).map(([x, y]) => {\n      let [x0, y0] = currentTransform.transform(x, transformY(y));\n      return [x0, y0];\n    });\n    let color = hexColor(getElementFillColor(el));\n    return { points, color };\n  }\n}\n\nfunction createTransformParser() {\n  let isDirty = false;\n  let tx = 0,\n    ty = 0;\n  let transformStack = [];\n\n  return {\n    pushTransform,\n    popTransform,\n    transform,\n  };\n\n  function pushTransform(transformStr) {\n    isDirty = true;\n    transformStack.push(parseTransform(transformStr));\n  }\n\n  function popTransform() {\n    if (transformStack.length === 0) throw new Error('Nothing to pop');\n    transformStack.pop();\n    isDirty = true;\n  }\n\n  function parseTransform(str) {\n    let transformNumbers = str.match(/matrix\\((.+)\\)$/i);\n    if (!transformNumbers)\n      throw new Error('Unknown transformation record: ' + str);\n    let coefficients = transformNumbers[1]\n      .split(',')\n      .map((x) => Number.parseFloat(x))\n      .filter(finiteNumber);\n    if (coefficients.length !== 6)\n      throw new Error('Only matrix(a,b,c,d,e,f) is supported at the moment');\n    return coefficients;\n  }\n\n  function transform(x, y) {\n    updateTransform();\n    return [x + tx, y - ty, 0];\n  }\n\n  function updateTransform() {\n    if (!isDirty) return;\n\n    // TODO: this should be real math\n    tx = 0;\n    ty = 0;\n    transformStack.forEach((record) => {\n      tx += record[4];\n      ty += record[5];\n    });\n    isDirty = false;\n  }\n}\n\nfunction finiteNumber(x) {\n  return Number.isFinite(x);\n}\n\nfunction getNumericAttribute(el, name) {\n  let value = Number.parseFloat(el.attributes.get(name));\n  if (!Number.isFinite(value))\n    throw new Error('Element ' + el.tagName + ' does not have a finite numeric attribute ' + name);\n  return value;\n}\n\nfunction getTextAttribute(el, name) {\n  return el.attributes.get(name) || '';\n}\n\nfunction hexColor(rgbArray) {\n  return (rgbArray[0] << 24) | (rgbArray[1] << 16) | (rgbArray[2] << 8) | 0xff;\n}\n\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\" \"+_vm._s(_vm.data.data)+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Based on https://github.com/ElemeFE/element/blob/dev/src/utils/clickoutside.js\n// The MIT License (MIT), Copyright (c) 2016 ElemeFE\nconst nodeList = [];\nconst ctx = '@@clickoutsideContext';\n\nlet startClick;\nlet seed = 0;\n\ndocument.addEventListener('mousedown', e => (startClick = e));\ndocument.addEventListener('mouseup', e => {\n  nodeList.forEach(node => node[ctx].documentHandler(e, startClick));\n});\n\n// Also hide when tapped outside.\ndocument.addEventListener('touchstart', e => {\n  startClick = e;\n});\ndocument.addEventListener('touchend', e => {\n  nodeList.forEach(node => node[ctx].documentHandler(e, startClick));\n});\n\nfunction createDocumentHandler(el, binding, vnode) {\n\n  return function(mouseup = {}, mousedown = {}) {\n    if (!vnode || !vnode.context ||\n      !mouseup.target || !mousedown.target ||\n      el.contains(mouseup.target) ||\n      el.contains(mousedown.target) ||\n      el === mouseup.target ||\n      (vnode.context.popperElm &&\n      (vnode.context.popperElm.contains(mouseup.target) ||\n      vnode.context.popperElm.contains(mousedown.target)))) return;\n\n    const methodName = el[ctx].methodName;\n    if (binding.expression && methodName && vnode.context[methodName]) {\n      vnode.context[methodName]();\n    } else {\n      el[ctx].bindingFn && el[ctx].bindingFn();\n    }\n  };\n}\n\nexport default {\n  bind(el, binding, vnode) {\n    nodeList.push(el);\n    const id = seed++;\n    el[ctx] = {\n      id,\n      documentHandler: createDocumentHandler(el, binding, vnode),\n      methodName: binding.expression,\n      bindingFn: binding.value\n    };\n  },\n\n  update(el, binding, vnode) {\n    el[ctx].documentHandler = createDocumentHandler(el, binding, vnode);\n    el[ctx].methodName = binding.expression;\n    el[ctx].bindingFn = binding.value;\n  },\n\n  unbind(el) {\n    let len = nodeList.length;\n\n    for (let i = 0; i < len; i++) {\n      if (nodeList[i][ctx].id === el[ctx].id) {\n        nodeList.splice(i, 1);\n        break;\n      }\n    }\n    delete el[ctx];\n  }\n};","\n<template>\n<div>\n  {{data.data}}\n</div>\n</template>\n<script>\n\nexport default {\n  props: ['data'],\n  data() {\n    return {}\n  },\n  methods: {\n  }\n}\n</script>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tooltip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tooltip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tooltip.vue?vue&type=template&id=552f3579&\"\nimport script from \"./Tooltip.vue?vue&type=script&lang=js&\"\nexport * from \"./Tooltip.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.hideSuggestions),expression:\"hideSuggestions\"}],staticClass:\"ak-typeahead\"},[_c('a',{staticClass:\"menu-opener\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.menuClicked($event)}}},[_c('svg',{staticClass:\"feather feather-info\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}},[_c('circle',{attrs:{\"cx\":\"12\",\"cy\":\"12\",\"r\":\"10\"}}),_c('line',{attrs:{\"x1\":\"12\",\"y1\":\"16\",\"x2\":\"12\",\"y2\":\"12\"}}),_c('line',{attrs:{\"x1\":\"12\",\"y1\":\"8\",\"x2\":\"12.01\",\"y2\":\"8\"}})])]),_c('input',{ref:\"input\",attrs:{\"autofocus\":\"\",\"type\":\"text\",\"autocomplete\":\"off\",\"autocorrect\":\"off\",\"autocapitalize\":\"off\",\"spellcheck\":\"false\",\"placeholder\":_vm.placeholder},domProps:{\"value\":_vm.currentQuery},on:{\"input\":_vm.handleInput,\"keydown\":_vm.cycleTheList}}),(_vm.currentQuery || _vm.showClearButton)?_c('a',{staticClass:\"search-submit\",attrs:{\"type\":\"submit\",\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.clearSearch($event)}}},[_c('svg',{staticClass:\"feather feather-x-circle\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}},[_c('circle',{attrs:{\"cx\":\"12\",\"cy\":\"12\",\"r\":\"10\"}}),_c('line',{attrs:{\"x1\":\"15\",\"y1\":\"9\",\"x2\":\"9\",\"y2\":\"15\"}}),_c('line',{attrs:{\"x1\":\"9\",\"y1\":\"9\",\"x2\":\"15\",\"y2\":\"15\"}})])]):_vm._e(),(_vm.showSuggestions)?_c('ul',{staticClass:\"suggestions\"},_vm._l((_vm.suggestions),function(suggestion,index){return _c('li',{key:index},[_c('a',{staticClass:\"suggestion\",class:{selected: suggestion.selected},attrs:{\"href\":\"#\"},domProps:{\"innerHTML\":_vm._s(suggestion.html)},on:{\"click\":function($event){$event.preventDefault();return _vm.pickSuggestion(suggestion)}}})])}),0):_vm._e(),(_vm.showLoading)?_c('ul',{staticClass:\"suggestions\"},[_c('li',{staticClass:\"searching\"},[(!_vm.loadingError)?_c('span',[_vm._v(\"Searching...\")]):_vm._e(),(_vm.loadingError)?_c('div',{staticClass:\"loading-error\"},[_c('div',[_vm._v(\"Failed to get reddit completions:\")]),_c('pre',[_vm._v(_vm._s(_vm.loadingError))])]):_vm._e()])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class='ak-typeahead' v-click-outside='hideSuggestions'>\n    <a href=\"#\" class='menu-opener' @click.prevent='menuClicked'>\n      <!-- Icon copyright (c) 2013-2017 Cole Bemis: https://github.com/feathericons/feather/blob/master/LICENSE -->\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-info\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"12\"></line><line x1=\"12\" y1=\"8\" x2=\"12.01\" y2=\"8\"></line></svg>\n  </a>\n    <input\n      ref='input' autofocus\n      type='text'\n      autocomplete='off'\n      autocorrect='off'\n      autocapitalize='off'\n      spellcheck='false'\n      :value='currentQuery' \n      :placeholder='placeholder'\n      @input='handleInput'\n      @keydown=\"cycleTheList\"\n    >\n    <a\n      type='submit'\n      class='search-submit'\n      href='#'\n      @click.prevent='clearSearch'\n      v-if='currentQuery || showClearButton'\n    >\n<!-- Icon copyright (c) 2013-2017 Cole Bemis: https://github.com/feathericons/feather/blob/master/LICENSE -->\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-x-circle\">\n  <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n    <line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line>\n    <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line>\n  </svg>\n</a>\n    <ul v-if=\"showSuggestions\" class=\"suggestions\">\n      <li v-for=\"(suggestion, index) in suggestions\" :key=\"index\">\n        <a\n          @click.prevent=\"pickSuggestion(suggestion)\"\n          class=\"suggestion\"\n          :class=\"{selected: suggestion.selected}\"\n          href=\"#\"\n          v-html=\"suggestion.html\"\n        ></a>\n      </li>\n    </ul>\n\n    <ul v-if=\"showLoading\" class=\"suggestions\">\n      <li class=\"searching\">\n        <span v-if=\"!loadingError\">Searching...</span>\n        <div v-if=\"loadingError\" class=\"loading-error\">\n          <div>Failed to get reddit completions:</div>\n          <pre>{{loadingError}}</pre>\n        </div>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport ClickOutside from '../lib/clickOutside.js'\n\nexport default {\n  directives: { ClickOutside },\n  props: {\n    placeholder: {\n      default: \"Type here\"\n    },\n    showClearButton: {\n      default: false\n    },\n    query: {\n      default: \"\"\n    },\n    delay: {\n      default: 80\n    }\n  },\n  data() {\n    return {\n      currentSelected: -1,\n      showSuggestions: false,\n      showLoading: false,\n      loadingError: null,\n      suggestions: [],\n      currentQuery: this.query\n    };\n  },\n  watch: {\n    query(newQuery) {\n      this.currentQuery = newQuery;\n    }\n  },\n  methods: {\n    refresh() {\n      if (this.showSuggestions) this.getSuggestionsInternal();\n    },\n\n    menuClicked() {\n      this.$emit('menuClicked');\n    },\n\n    hideSuggestions() {\n      this.showSuggestions = false;\n      this.showLoading = false;\n      this.pendingKeyToShow = true;\n    },\n\n    showIfNeeded(visible) {\n      // we need to wait until next key press before we can show suggestion.\n      // This avoids race conditions between search results and form submission\n      if (!this.pendingKeyToShow) this.showSuggestions = visible;\n    },\n\n    focus() {\n      this.$refs.input.focus();\n    },\n\n    pickSuggestion(suggestion) {\n      this.currentQuery = suggestion.text;\n      this.hideSuggestions();\n      this.$emit(\"selected\", this.currentQuery);\n    },\n\n    clearSearch() {\n      let payload = {shouldProceed: true};\n      this.$emit('beforeClear', payload);\n      if (!payload.shouldProceed) return;\n\n      this.currentQuery = '';\n      this.getSuggestionsInternal();\n      // this.focus();\n      this.$emit(\"cleared\");\n    },\n\n    handleInput(event) {\n      this.currentQuery = event.target.value;\n      this.$emit('inputChanged');\n      this.getSuggestionsInternal();\n    },\n\n    getSuggestionsInternal() {\n      var self = this;\n      if (self.previous) {\n        window.clearTimeout(self.previous);\n        self.previous = null;\n      }\n      if (!self.currentQuery) {\n        this.showSuggestions = false;\n        return;\n      }\n\n      self.previous = window.setTimeout(function() {\n        var p = window.fuzzySearcher.find(self.currentQuery);\n\n        if (Array.isArray(p)) {\n          self.suggestions = p.map(x => ({\n            selected: false,\n            text: x.text,\n            html: x.html\n          }));\n          self.currentSelected = -1;\n          self.showIfNeeded(p && p.length > 0);\n        } else if (p) {\n          self.loadingError = null;\n          // self.showLoading = true;\n          p.then(\n            function(suggestions) {\n              self.showLoading = false;\n              suggestions = suggestions || [];\n              self.suggestions = suggestions.map(x => ({\n                selected: false,\n                text: x.text,\n                html: x.html\n              }));\n              self.currentSelected = -1;\n              self.showIfNeeded(suggestions && suggestions.length > 0);\n            },\n            function(err) {\n              self.loadingError = err;\n            }\n          );\n        } else {\n          throw new Error(\"Could not parse suggestions response\");\n        }\n      }, self.delay);\n    },\n\n    cycleTheList(e) {\n      var items = this.suggestions;\n      var currentSelected = this.currentSelected;\n      // Any key is alright for the suggestions\n      this.pendingKeyToShow = false;\n\n      let dx;\n      if (e.which === 38) {\n        // UP\n        dx = -1;\n      } else if (e.which === 40) {\n        // down\n        dx = 1;\n      } else if (e.which === 13) {\n        // Enter === accept\n        if (items[currentSelected]) {\n          this.pickSuggestion(items[currentSelected]);\n        } else {\n          this.pickSuggestion({ text: this.currentQuery });\n        }\n        e.preventDefault();\n        return;\n      } else if (e.which === 27) {\n        // Esc === close\n        this.hideSuggestions();\n      }\n\n      if (!dx || items.length === 0) return;\n\n      e.preventDefault();\n\n      if (currentSelected >= 0) {\n        this.suggestions[currentSelected].selected = false;\n      }\n      currentSelected += dx;\n      if (currentSelected < 0) currentSelected = items.length - 1;\n      if (currentSelected >= items.length) currentSelected = 0;\n\n      this.suggestions[currentSelected].selected = true;\n      this.currentSelected = currentSelected;\n    }\n  }\n};\n</script>\n\n<style lang='stylus'>\n@import '../vars.styl';\n\n.ak-typeahead {\n  height: 100%;\n  flex: 1;\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n\n  input::-ms-clear {\n    display: none;\n  }\n}\n\n  .menu-opener {\n    display: flex;\n    align-items: center;\n    padding: 0 8px;\n    background: background-color;\n    &:hover, &:focus {\n      color: primary-color;\n      background: highlight-color;\n    }\n  }\n\n.search-submit {\n  color: border-hover;\n  position: absolute;\n  right: 0;\n  top: 0;\n  height: 100%;\n  align-items: center;\n  text-decoration: none;\n  display: flex;\n  flex-shrink: 0;\n  width: 48px;\n  justify-content: center;\n  outline: none;\n\n  &:hover, &:focus {\n    color: primary-color;\n    background: highlight-color;\n  }\n}\n\n.suggestion {\n  display: block;\n  width: 100%;\n  height: 28px;\n  display: flex;\n  align-items: center;\n  padding-left: 10px;\n  text-decoration: none;\n  font-weight: bold;\n  color: primary-text;\n\n  b {\n    font-weight: normal;\n  }\n}\n\n.suggestion:hover, .suggestion.selected {\n  background-color: highlight-color;\n  color: primary-color;\n}\n\n.suggestions {\n  position: absolute;\n  top: 48px;\n  width: 100%;\n  padding: 0;\n  background: white;\n  list-style-type: none;\n  margin: 0;\n  border-top: 1px solid $border-color;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n\n  .searching {\n    margin: 8px;\n  }\n\n  .loading-error {\n    pre {\n      color: orangered;\n      overflow-x: auto;\n      padding-bottom: 14px;\n    }\n  }\n}\n\ninput[type='text'] {\n  height: 100%;\n  width: 100%;\n  padding-left: 10px;\n  font-size: 18px;\n  border: 0;\n  border-radius: 0;\n}\n\ninput:focus {\n  outline: none;\n}\n\ninput::placeholder {\n  color: $hint-text;\n}\n\n@media (max-width: small-screen-width) {\n  .suggestion {\n    height: 42px;\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Typeahead.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Typeahead.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Typeahead.vue?vue&type=template&id=bff3f5f2&\"\nimport script from \"./Typeahead.vue?vue&type=script&lang=js&\"\nexport * from \"./Typeahead.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Typeahead.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sidebar\"},[_c('div',{staticClass:\"row\"},[_c('h3',[_vm._v(\"Map of Reddit\")]),_c('a',{staticClass:\"close-btn\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onClose($event)}}},[_c('svg',{staticClass:\"feather feather-x-circle\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}},[_c('circle',{attrs:{\"cx\":\"12\",\"cy\":\"12\",\"r\":\"10\"}}),_c('line',{attrs:{\"x1\":\"15\",\"y1\":\"9\",\"x2\":\"9\",\"y2\":\"15\"}}),_c('line',{attrs:{\"x1\":\"9\",\"y1\":\"9\",\"x2\":\"15\",\"y2\":\"15\"}})])])]),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('p',[_vm._v(\" Each dot is a subreddit. Two dots within the same cluster are usually close to each other if multiple users frequently leave comments on both subreddits. \")]),_c('p',[_vm._v(\" If you find something missing, please feel free to \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://github.com/anvaka/map-of-reddit-data#how-to-add-a-new-subreddit\",\"target\":\"_blank\"}},[_vm._v(\"edit the map\")]),_vm._v(\". \")]),_c('p',[_vm._v(\" I spent last couple years developing this website as a hobby project. If you enjoy this work please support it \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://www.patreon.com/anvaka\"}},[_vm._v(\"on Patreon\")]),_vm._v(\" or \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://github.com/sponsors/anvaka\"}},[_vm._v(\"GitHub\")]),_vm._v(\" and I promise to not disappoint you with new features :). \")]),_c('p',[_vm._v(\" Please follow me on Twitter to stay in touch: \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://twitter.com/anvaka\"}},[_vm._v(\"https://twitter.com/anvaka\")]),_vm._v(\". \")]),_c('p',[_vm._v(\" Thank you for your interest and support! \")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"sidebar\">\n    <div class='row'>\n      <h3>Map of Reddit</h3>\n      <!-- Icon copyright (c) 2013-2017 Cole Bemis: https://github.com/feathericons/feather/blob/master/LICENSE -->\n        <a href='#' @click.prevent='onClose' class='close-btn'>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-x-circle\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line><line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line></svg>\n        </a>\n    </div>\n\n    <div class=\"container\">\n      <p>\n        Each dot is a subreddit. Two dots within the same cluster are \n        usually close to each other if multiple users frequently leave comments on both subreddits.\n      </p>\n      <p>\n        If you find something missing, please feel free to <a href='https://github.com/anvaka/map-of-reddit-data#how-to-add-a-new-subreddit' target='_blank' class='accent'>edit the map</a>.\n      </p>\n      <p>\n        I spent last couple years developing this website as a hobby project. If you enjoy\n        this work please support it <a href=\"https://www.patreon.com/anvaka\" class='accent'>on Patreon</a> or\n        <a href=\"https://github.com/sponsors/anvaka\" class='accent'>GitHub</a> and I promise to not disappoint you\n        with new features :).\n      </p>\n      <p>\n      Please follow me on Twitter  to stay in touch: <a href='https://twitter.com/anvaka' class='accent'>https://twitter.com/anvaka</a>.\n      </p>\n      <p>\n        Thank you for your interest and support!\n      </p>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  mounted() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  },\n  beforeDestroy() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  },\n  methods: {\n    onClose() {\n      this.$emit('close');\n    },\n    handleKeyDown(e) {\n      if (e.which === 27 /* ESC */) {\n        this.onClose();\n      }\n    }\n  }\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Sidebar.vue?vue&type=template&id=6b61a779&\"\nimport script from \"./Sidebar.vue?vue&type=script&lang=js&\"\nexport * from \"./Sidebar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h3',[_vm._v(\"Improve this map\")]),_c('a',{staticClass:\"close-btn\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onClose($event)}}},[_c('svg',{staticClass:\"feather feather-x-circle\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}},[_c('circle',{attrs:{\"cx\":\"12\",\"cy\":\"12\",\"r\":\"10\"}}),_c('line',{attrs:{\"x1\":\"15\",\"y1\":\"9\",\"x2\":\"9\",\"y2\":\"15\"}}),_c('line',{attrs:{\"x1\":\"9\",\"y1\":\"9\",\"x2\":\"15\",\"y2\":\"15\"}})])]),_c('p',[_vm._v(\"The entire website is open source. You can contribute in multiple ways:\")]),_vm._m(0),_vm._v(\" Thank you for your support! \"),_c('br'),_vm._v(\" ♥️ Anvaka \")])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_c('li',[_vm._v(\" Discuss this product on our own subreddit: \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://www.reddit.com/r/MofR/\"}},[_vm._v(\"/r/MofR\")])]),_c('li',[_vm._v(\"Support this work \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://www.patreon.com/anvaka\"}},[_vm._v(\"on Patreon\")]),_vm._v(\" or \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://github.com/sponsors/anvaka\"}},[_vm._v(\"GitHub\")]),_vm._v(\". There is a lot of things I'd love to improve about this project, but without your support I wouldn't know if I'm moving in the right direction. \")]),_c('li',[_vm._v(\" Add new subreddits or update positions of existing ones if you found an issue. Please follow instructions \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://github.com/anvaka/map-of-reddit-data#how-to-add-a-new-subreddit\",\"target\":\"_blank\"}},[_vm._v(\"here\")]),_vm._v(\". \")]),_c('li',[_vm._v(\"If you found a rendering bug - consider reporting it or fixing it \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://github.com/anvaka/map-of-reddit\",\"target\":\"_blank\"}},[_vm._v(\"here\")]),_vm._v(\". \")]),_c('li',[_vm._v(\" Share your suggestions and follow me on Twitter. My direct messages are open: \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://twitter.com/anvaka\"}},[_vm._v(\"https://twitter.com/anvaka\")])])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <h3>Improve this map</h3>\n    <!-- Icon copyright (c) 2013-2017 Cole Bemis: https://github.com/feathericons/feather/blob/master/LICENSE -->\n    <a href='#' @click.prevent='onClose' class='close-btn'>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-x-circle\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line><line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line></svg>\n    </a>\n    <p>The entire website is open source. You can contribute in multiple ways:</p>\n    <ul>\n      <li>\n        Discuss this product on our own subreddit: <a href='https://www.reddit.com/r/MofR/' class='accent'>/r/MofR</a>\n      </li>\n      <li>Support this work <a href=\"https://www.patreon.com/anvaka\" class='accent'>on Patreon</a> or\n      <a href=\"https://github.com/sponsors/anvaka\" class='accent'>GitHub</a>. There is a lot of things\n      I'd love to improve about this project, but without your support I wouldn't know if I'm moving\n      in the right direction.\n      </li>\n      <li>\n        Add new subreddits or update positions of existing ones if you found an issue. Please \n        follow instructions  <a href='https://github.com/anvaka/map-of-reddit-data#how-to-add-a-new-subreddit'\n        class='accent' target='_blank'>here</a>.\n      </li>\n      <li>If you found a rendering bug - consider reporting it or fixing it \n        <a href='https://github.com/anvaka/map-of-reddit' class='accent' target='_blank'>here</a>.\n      </li>\n      <li>\n        Share your suggestions and follow me on Twitter. My direct messages are open: \n<a href='https://twitter.com/anvaka' class='accent'>https://twitter.com/anvaka</a>\n      </li>\n    </ul>\n    Thank you for your support! <br/>\n    ♥️ Anvaka\n  </div>\n</template>\n\n<script>\nexport default {\n  mounted() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  },\n  beforeDestroy() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  },\n  methods: {\n    onClose() {\n      this.$emit('close');\n    },\n    handleKeyDown(e) {\n      if (e.which === 27 /* ESC */) {\n        this.onClose();\n      }\n    }\n  }\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImproveWindow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImproveWindow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ImproveWindow.vue?vue&type=template&id=6f529b0a&\"\nimport script from \"./ImproveWindow.vue?vue&type=script&lang=js&\"\nexport * from \"./ImproveWindow.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"small-preview-container\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.showFullPreview($event)}}},[_c('div',{staticClass:\"header\"},[_c('span',[_vm._v(\"r/\"+_vm._s(_vm.name))]),(_vm.details)?_c('span',{staticClass:\"subscribers-count\"},[_vm._v(_vm._s(_vm.details.subscribers)+\" members · \"+_vm._s(_vm.details.active)+\" active\")]):_vm._e()]),(_vm.loading)?_c('loading-icon'):_vm._e(),(_vm.details && _vm.details.image)?_c('img',{staticClass:\"community-icon\",attrs:{\"src\":_vm.details.image.icon}}):_vm._e(),(_vm.details)?_c('div',{staticClass:\"info\"},[_vm._v(_vm._s(_vm.details.description))]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{staticClass:\"loader\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 32 32\",\"width\":\"28\",\"height\":\"28\",\"fill\":\"white\"}},[_c('path',{attrs:{\"opacity\":\".25\",\"d\":\"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4\"}}),_c('path',{attrs:{\"d\":\"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z\"}},[_c('animateTransform',{attrs:{\"attributeName\":\"transform\",\"type\":\"rotate\",\"from\":\"0 16 16\",\"to\":\"360 16 16\",\"dur\":\"0.8s\",\"repeatCount\":\"indefinite\"}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./LoadingIcon.vue?vue&type=template&id=83262da8&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <a href='#' @click.prevent='showFullPreview' class='small-preview-container'>\n    <div class='header'>\n      <span>r/{{name}}</span>\n      <span v-if='details' class='subscribers-count'>{{details.subscribers}} members · {{details.active}} active</span>\n    </div>\n    <loading-icon v-if='loading'></loading-icon>\n    <img v-if='details && details.image' :src='details.image.icon' class='community-icon'>\n    <div class='info' v-if='details'>{{details.description}}</div>\n    <!-- <div class='thumbnails' v-if='details && details.image'>\n      <img v-if='details.image.banner' :src='details.image.banner' class='banner'>\n      <img :src='details.image.icon' class='community-icon'>\n    </div> -->\n  </a>\n</template>\n<script>\nimport bus from './lib/bus';\nimport LoadingIcon from './LoadingIcon'\nimport {formatNumber} from './lib/utils';\n\nexport default {\n  name: 'SmallPreview',\n  props: ['name'],\n  components: {\n    LoadingIcon\n  },\n  data() {\n    return {\n      loading: true,\n      details: null\n    }\n  },\n  watch: {\n    name() {\n      this.getSubredditInfo();\n    }\n  },\n  mounted() {\n    this.getSubredditInfo();\n  },\n  methods: {\n    showFullPreview() {\n      bus.fire('show-subreddit', this.name, true);\n    },\n    getSubredditInfo() {\n      let fetchedName = this.name;\n      this.details = null;\n      this.loading = true;\n      fetch('https://www.reddit.com/r/' + fetchedName + '/about.json', {mode: 'cors'})\n        .then(x => x.json())\n        .then(x => {\n          if (this.name !== fetchedName) return;\n          let data = x.data;\n          let description = data.public_description;\n          let displayName = data.display_name_prefixed;\n          let subscribers = formatNumber(data.subscribers);\n          let active = formatNumber(data.accounts_active);\n          this.loading = false;\n          let image = null;\n          let icon = data.icon_img || data.community_icon;\n          if (icon) {\n            let banner = data.banner_img || data.banner_background_image;\n            image = {\n              icon: icon.split('?')[0],\n              banner: banner ? banner.split('?')[0] : null\n            }\n          }\n          if (data.over18 && !window.ageConfirmed) {\n            image = null;\n          }\n          this.details = {\n            description, displayName, subscribers, active, image\n          }\n        })\n    }\n  }\n};\n</script>\n<style lang=\"stylus\">\ntext-color = #eee;\n.loader {\n  margin: 8px;\n}\n.header {\n  font-size: 16px;\n}\n.small-preview-container {\n  padding: 4px 8px;\n  font-size: 12px;\n  color: text-color;\n  a {\n    color: text-color;\n  }\n}\n.info {\n  margin-top: 4px;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.subscribers-count {\n  color: #999999;\n  float: right;\n  display: inline-block;\n  font-size: 12px;\n}\n.community-icon {\n  width: 32px;\n  border-radius: 100%;\n  margin: 8px;\n  float: left;\n}\n.banner {\n  // height: 48px;\n  width: 100%;\n  position: absolute;\n  top: 0px;\n}\n.thumbnails {\n  overflow: hidden;\n  position: absolute;\n  bottom: 84px;\n  width: 100%;\n  height: 48px;\n  background: orange;\n  left: 0;\n}\n</style>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SmallPreview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SmallPreview.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SmallPreview.vue?vue&type=template&id=7b1a6d47&\"\nimport script from \"./SmallPreview.vue?vue&type=script&lang=js&\"\nexport * from \"./SmallPreview.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SmallPreview.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default function createFirstInteractionListener(callback) {\n  window.addEventListener('mousedown', handleFirstEvent, true);\n  window.addEventListener('wheel', handleFirstEvent, true);\n  window.addEventListener('touchstart', handleFirstEvent, true);\n  window.addEventListener('keydown', handleFirstEvent, true);\n\n  let called = false;\n\n  return dispose;\n\n  function handleFirstEvent() {\n    if (called) return;\n    called = true;\n    callback();\n  }\n\n  function dispose() {\n    window.removeEventListener('mousedown', handleFirstEvent, true);\n    window.removeEventListener('wheel', handleFirstEvent, true);\n    window.removeEventListener('touchstart', handleFirstEvent, true);\n    window.removeEventListener('keydown', handleFirstEvent, true);\n  }\n}","<template>\n  <div id=\"app\">\n    <div v-if='!isWebGLEnabled'>\n      <div class='absolute no-webgl'>\n        <h4>WebGL is not enabled :(</h4>\n        <p>This website needs <a href='https://en.wikipedia.org/wiki/WebGL' class='accent'>WebGL</a> to render a map of reddit.\n        </p> <p>\n        You can try another browser. If the problem persists - very likely your video card isn't supported.\n        </p>\n      </div>\n    </div>\n    <div v-if='isWebGLEnabled'>\n    <transition name='fade'>\n      <div class='progress' v-if='progressMessage'>{{progressMessage}}</div>\n    </transition>\n    <transition name='fade'>\n      <div class='progress subgraph' v-if='subgraphName && !isStreetViewMode'>\n        Only <a href='#' class='accent' @click.prevent='onSubgraphRootClick'>/r/{{subgraphName}}</a> related subreddits are shown.\n        <a href='#' class='accent' @click.prevent='onExitSubgraph'>view all</a>\n      </div>\n    </transition>\n    <transition name='fade'>\n      <div class='progress subgraph' v-if='isStreetViewMode && !isStreetViewInProgress'>\n        <a href='#' class='accent' @click.prevent='onExitStreetView'>exit street view</a>\n      </div>\n    </transition>\n    <subreddit v-if=\"subreddit\" :name=\"subreddit\" :sort=\"defaultSort\" :time=\"defaultTime\" class=\"preview\" @declineAge='onDeclineAge'>\n      <template slot='after-title'>\n        <div>\n          <a href='#' class='subreddit-action' @click.prevent='showRelated' v-if='graphLoaded'>Show related</a>\n          <a href='#' class='subreddit-action' @click.prevent='showStreetView' v-if='streetViewEnabled && graphLoaded && !isSubgraphLayoutInProgress'>Street view</a>\n          <span v-if='!graphLoaded' class='subreddit-action'>the map is still loading...</span>\n        </div>\n      </template>\n    </subreddit>\n    <form @submit.prevent=\"onSubmit\" class=\"search-box\">\n      <typeahead\n        placeholder=\"Find subreddit\"\n        @menuClicked='sidebarVisible = true'\n        @selected='findSubreddit'\n        @beforeClear='closeSubredditOnSmallScreen'\n        @cleared='closeSubredditViewer'\n        @inputChanged='onTypeAheadInput'\n        :showClearButton=\"subreddit\"\n        :query=\"appState.query\"\n      ></typeahead>\n    </form>\n    <a href='#' @click.prevent='onImproveClick' class='accent improve'>Improve this map</a>\n    <transition name='slide-bottom'>\n      <small-preview v-if=\"smallPreview\" :name=\"smallPreview\" class=\"small-preview\"></small-preview>\n    </transition>\n\n    <transition name='slide-top'>\n      <improve-window v-if='improveVisible' @close='improveVisible = false' class='improve-window'></improve-window>\n    </transition>\n\n    <tooltip\n      v-if=\"tooltip\"\n      :style=\"{\n      left: tooltip.x + 'px',\n      top: tooltip.y + 'px'\n    }\"\n      :data=\"tooltip\"\n      class=\"tooltip\"\n    ></tooltip>\n\n    <transition name='fade'>\n      <div class='backdrop' v-if='sidebarVisible || improveVisible' @click=\"onBackdropClick\"></div>\n    </transition>\n    <transition name='slide-left'>\n      <sidebar v-if=\"sidebarVisible\" @close='sidebarVisible = false'></sidebar>\n    </transition>\n    </div>\n  </div>\n</template>\n\n<script>\nimport \"vuereddit/dist/vuereddit.css\";\n\nimport Vue from 'vue';\nimport createStreamingSVGRenderer from './lib/createStreamingSVGRenderer';\nimport Tooltip from \"./Tooltip\";\nimport Typeahead from \"./components/Typeahead\";\nimport Sidebar from \"./components/Sidebar\";\nimport ImproveWindow from \"./components/ImproveWindow\";\nimport Subreddit from \"vuereddit\";\nimport SmallPreview from \"./SmallPreview\";\nimport appState from \"./appState.js\";\nimport createFirstInteractionListener from './lib/createFirstInteractionListener';\nimport {isWebGLEnabled} from 'w-gl';\n\nimport bus from \"./lib/bus\";\n\nlet Instance = Vue.extend(Subreddit);\nlet nameToInstance = new Map();\n\nexport default {\n  components: {\n    Tooltip,\n    Typeahead,\n    Subreddit,\n    Sidebar,\n    ImproveWindow,\n    SmallPreview,\n  },\n  name: \"app\",\n  methods: {\n    showRelated() {\n      this.scene.showRelated(this.subreddit);\n      this.isSubgraphLayoutInProgress = true;\n      if (isSmallScreen()) {\n        // move panel to the bottom\n        this.smallPreview = this.subreddit;\n        this.subreddit = null;\n      }\n    },\n    showStreetView() {\n      this.scene.showStreetView(this.subreddit);\n      this.subreddit = null;\n      this.tooltip = null;\n      this.isStreetViewMode = true;\n      this.isStreetViewInProgress = true;\n    },\n    onExitStreetView() {\n      this.isStreetViewInProgress = false;\n      this.scene.exitStreetView();\n      this.isStreetViewMode = false;\n    },\n    findSubreddit(q) {\n      appState.query = q;\n      this.onSubmit();\n    },\n    closeSubredditOnSmallScreen(payload) {\n      appState.userTypedSomething = true;\n      if (isSmallScreen() && this.subreddit) {\n        // First time - just close the subreddit, second time - clear all\n        payload.shouldProceed = false;\n        this.subreddit = null;\n        this.scene.focus();\n      } \n    },\n    onTypeAheadInput() {\n      this.typeaheadChanged = true;\n      appState.userTypedSomething = true;\n    },\n    onDeclineAge(e) {\n      e.preventDefault();\n      this.closeSubredditViewer();\n    },\n    onBackdropClick() {\n      this.sidebarVisible = false;\n      this.improveVisible = false;\n    },\n    onImproveClick() {\n      this.improveVisible = true;\n    },\n    closeSubredditViewer() {\n      this.subreddit = null;\n      this.smallPreview = null;\n      appState.query = '';\n      appState.saveQuery(appState.query);\n      bus.fire('unfocus');\n    },\n    showTooltip(e) {\n      if (e) {\n        this.tooltip = e;\n      } else {\n        this.tooltip = null;\n      }\n    },\n    onSubmit() {\n      bus.fire('focus-node', appState.query);\n      appState.saveQuery(appState.query);\n      this.subgraphName = null;\n    },\n    onSubgraphRootClick() {\n      bus.fire('subgraph-focus-node', this.subgraphName);\n    },\n    onExitSubgraph() {\n      bus.fire('exit-subgraph');\n      this.subgraphName = null;\n      this.isSubgraphLayoutInProgress = false;\n    },\n    showSubreddit(subreddit, forceFullView) {\n      if (!this.scene.isStreetViewMode()) {\n        if (isSmallScreen() && !forceFullView) {\n          this.smallPreview = subreddit;\n        } else {\n          this.smallPreview = null;\n          this.subreddit = subreddit;\n        }\n      }\n      appState.query = subreddit;\n      this.tooltip = null;\n      appState.saveQuery(appState.query);\n    },\n\n    setProgress(progress) {\n      if (progress && progress.mapLoaded) {\n        // last message!\n        if (!this.typeaheadChanged) {\n          this.progressMessage = progress.error ? 'Something is likely not right...' : 'Map is ready to use. Please enjoy';\n        }\n        this.graphLoaded = true;\n        this.disposeFirstListener = createFirstInteractionListener(() => {\n          setTimeout(() => this.progressMessage = null, 3000);\n        });\n      } else if (progress && progress.subgraphDone) {\n        this.progressMessage = null;\n        this.subgraphName = progress.subgraphName;\n        this.isSubgraphLayoutInProgress = false;\n      }  else if (progress && progress.streetViewDone) {\n        this.progressMessage = null;\n        this.isStreetViewInProgress = false;\n      } else if (progress) {\n        this.progressMessage = progress.message;\n        this.subgraphVisualized = null;\n      } \n    },\n    appendDom(e) {\n      // TODO: Consider window.requestIdleCallback?\n      let oldInstance = nameToInstance.get(e.name);\n      if (oldInstance) {\n        oldInstance.$destroy();\n      }\n      let div = document.createElement('div');\n      let viewer = new Instance({propsData: { \n        name: e.name,\n        showFirst: 5,\n        sort: this.defaultSort || 'hot',\n        time: this.defaultTime || 'day'\n      }});\n      viewer.$on('sortChanged', (newSort) => this.defaultSort = newSort);\n      viewer.$on('timeChanged', (newTime) => {\n        this.defaultTime = newTime;\n      });\n      e.dom.appendChild(div);\n      let instance = viewer.$mount(div);\n      nameToInstance.set(e.name, instance)\n    },\n    removeDom(e) {\n      let oldInstance = nameToInstance.get(e.name);\n      if (oldInstance) {\n        oldInstance.$destroy();\n        nameToInstance.delete(e.name);\n      }\n    }\n  },\n  data() {\n    return {\n      improveVisible: false,\n      isWebGLEnabled: false,\n      isStreetViewMode: false,\n      isSubgraphLayoutInProgress: false,\n      isStreetViewInProgress: false,\n      typeaheadChanged: false,\n      tooltip: null,\n      subgraphName: null,\n      subreddit: null,\n      scene: null,\n      smallPreview: null,\n      sidebarVisible: false,\n      progressMessage: '',\n      graphLoaded: false,\n      streetViewEnabled: appState.getQueryState().get('sv') !== false,\n      defaultSort: 'hot',\n      defaultTime: 'day',\n      appState,\n    };\n  },\n  mounted() {\n    const canvas = document.getElementById(\"cnv\");\n    nameToInstance = new Map();\n    this.isWebGLEnabled = isWebGLEnabled(canvas);\n    if (!this.isWebGLEnabled) return;\n\n    let svgRenderer = createStreamingSVGRenderer(canvas);\n    let path = appState.getFilePath();\n    svgRenderer.loadSVG(path);\n    this.scene = svgRenderer;\n\n    bus.on('show-tooltip', this.showTooltip);\n    bus.on('show-subreddit', this.showSubreddit);\n    bus.on('progress', this.setProgress);\n    bus.on('append-dom', this.appendDom);\n    bus.on('remove-dom', this.removeDom);\n  },\n\n  beforeDestroy() {\n    if (this.scene) {\n      this.scene.dispose();\n    }\n    if (this.disposeFirstListener) {\n      this.disposeFirstListener();\n    }\n    bus.off('show-tooltip', this.showTooltip);\n    bus.off('show-subreddit', this.showSubreddit);\n    bus.off('progress', this.setProgress);\n    bus.off('append-dom', this.appendDom);\n    bus.off('remove-dom', this.removeDom);\n  }\n};\n\nfunction isSmallScreen() {\n  return window.innerWidth < 550;\n}\n</script>\n\n<style lang='stylus'>\n@import './vars.styl';\n\n#app {\n  position: absolute;\n  top: 0;\n  background: background-color;\n}\n.no-webgl {\n  width: 100%;\n  color: hsla(215, 37%, 55%, 1);\n  flex-direction: column; text-align: center;\n  padding: 12px;\n}\n.no-webgl h4 {\n  margin: 7px 0;\n  font-size: 24px;\n}\n.subreddit .subreddit-action {\n  display: inline-block;\n  border: 1px solid;\n  color: primary-color;\n  border-radius: 3px;\n  padding: 0 8px;\n  margin: 8px;\n}\n\n.subreddit span.subreddit-action {\n  border-color: border-color;\n}\n\n.backdrop {\n  position fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.21);\n}\n\n.close-container {\n  position: fixed;\n  z-index: 2;\n  top: 0;\n  right: 0;\n  height: 40px;\n\n  a {\n    padding: 0 12px;\n    font-size: 12px;\n    color: #fff;\n    background-color: #333;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n  }\n}\n.improve {\n  position: fixed;\n  background: rgba(0, 0, 0, 0.3);\n  padding: 0 8px;\n  font-size: 12px;\n  right: 8px;\n  bottom: 8px;\n}\n\n.fade-enter-active, .fade-leave-active {\n  transition: opacity .5s;\n}\n.fade-enter, .fade-leave-to {\n  opacity: 0;\n}\n\n.slide-bottom-enter-active, .slide-bottom-leave-active {\n  transition: transform .3s cubic-bezier(0,0,0.58,1);\n}\n.slide-bottom-enter, .slide-bottom-leave-to {\n  transform: translateY(84px);\n}\n\n.small-preview {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 84px;\n  background: rgba(5, 15, 43, 1); \n  box-shadow: 0 -4px 4px rgba(0,0,0,0.42);\n}\n\n.subreddit.preview {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: side-panel-width + 16px;\n  height: 100vh;\n  overflow: auto;\n}\n\n.row {\n  display: flex;\n  flex-direction: row;\n  align-items: baseline;\n}\n\n.row .label {\n  flex: 1;\n}\n\n.row .value {\n  flex: 1;\n}\n\n.row select {\n  width: 100%;\n}\n\n.btn-command {\n  display: block;\n  padding: 4px;\n  margin-top: 10px;\n  border: 1px solid;\n}\n\n.tooltip {\n  position: fixed;\n  background: post-background;\n  border: 1px solid border-hover;\n  color: primary-color;\n  padding: 8px;\n  pointer-events: none;\n  max-width: 400px;\n  transform: translateY(calc(-100% - 8px));\n  font-family: monospace;\n}\n\n.subreddit {\n  background: panel-background;\n  box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);\n  color: highlight-color;\n  .error {\n    color: white;\n    h3 {\n      color: error-color;\n    }\n  }\n  .background-area {\n    background: post-background;\n    border-bottom: 1px solid border-color;\n\n    .community-icon {\n      background: post-background;\n    }\n  }\n  h2, h3 {\n    color: primary-color;\n  }\n  .loading {\n    margin-top: 8px;\n  }\n  .age-warning  {\n    h2 {\n      text-align: center;\n      display: inline-block;\n    }\n  }\n  .error,\n  .age-warning {\n    margin-top: 62px;\n  }\n  a {\n    color: highlight-color;\n  }\n  .post {\n    background: post-background;\n    border: 1px solid border-color;\n    .url {\n      color: inherit;\n    }\n    .title, h1 {\n      color: primary-color;\n    }\n    a.comments-count {\n      &:hover {\n        background: hover-background;\n      }\n    }\n    .post-content, .byline {\n      a:hover {\n        background: hover-background;\n      }\n    }\n    .status-line {\n      background-color: #161617;\n      .vote-count {\n        color: primary-color;\n        background: initial;\n      }\n    }\n    .read-more {\n      background-image: linear-gradient(180deg,hsla(0,0%,100%,0), #171718);\n    }\n    &:hover {\n      border: 1px solid border-hover;\n    }\n  }\n}\n\na {\n  color: highlight-color;\n  text-decoration: none;\n}\n.search-box {\n  position: absolute;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), 0 -1px 0px rgba(0, 0, 0, 0.02);\n  height: 48px;\n  font-size: 16px;\n  margin-top: 16px;\n  padding: 0;\n  cursor: text;\n  left: 8px;\n  width: side-panel-width;\n}\n\n.progress {\n  position: fixed;\n  top: 0px;\n  left: 50%;\n  transform: translateX(-50%);\n  color: white;\n  padding: 8px;\n  background: rgba(5, 15, 43, 0.4);\n  box-shadow: 0 4px 4px rgba(0,0,0,0.2);\n  user-select: none;\n}\n\n.slide-left-enter-active, .slide-left-leave-active {\n  transition: transform 150ms cubic-bezier(0,0,0.58,1);\n}\n.slide-left-enter, .slide-left-leave-to {\n  transform: translateX(-100%);\n}\n\n.slide-top-enter-active, .slide-top-leave-active {\n  transition: opacity .3s cubic-bezier(0,0,0.58,1);\n}\n.slide-top-enter, .slide-top-leave-to {\n  opacity: 0;\n}\n.improve-window {\n  position: fixed;\n  transform: translate(-50%, -50%);\n  top: 0;\n  left: 50%;\n  top: 50%;\n  width: 400px;\n  background: white;\n  z-index: 2;\n  box-shadow: 0 -1px 24px rgb(0 0 0);\n  padding: 8px 16px;\n  overflow-y: auto;\n  max-height: 100%;\n  h3 {\n    margin: 0;\n  }\n  .close-btn {\n    position: absolute;\n    right: 8px;\n    top: 8px;\n  }\n}\na.accent {\n  color: highlight-link;\n}\n.sidebar {\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  width: side-panel-width - 10px;\n  background: white;\n  z-index: 2;\n  box-shadow: 0 -1px 24px rgb(0 0 0);\n  display: flex;\n  flex-direction: column;\n\n  h3 {\n    font-weight: normal;\n    margin: 8px 8px 0 8px;\n    font-size: 18px;\n    flex: 1;\n  }\n  .close-btn {\n    align-self: stretch;\n    align-items: center;\n    display: flex;\n    padding: 0 8px;\n  }\n\n  .container {\n    padding: 8px;\n    flex: 1;\n    overflow-y: auto;\n  }\n  h4 {\n    margin: 0;\n    font-weight: normal;\n    text-align: right;\n  }\n  .byline {\n    margin: 0 8px 8px;\n    font-size: 12px;\n  }\n}\n.progress.subgraph {\n  max-width: 400px;\n  text-align: center;\n}\n\n@media (max-width: 1200px) {\n  .progress {\n    top: 16px;\n    right: 8px;\n    left: inherit;\n    transform: inherit;\n  }\n}\n@media (max-width: 810px) {\n  .progress.subgraph {\n    top: 62px;\n    left: 8px;\n  }\n}\n\n@media (max-width: small-screen-width) {\n  #app {\n    width: 100%;\n    margin: 0;\n  }\n  .sidebar {\n    width: 100%;\n  }\n  .search-box {\n    left: 0;\n    margin-top: 0;\n    width: 100%;\n  }\n  .improve-window {\n    width: 100%;\n    height: 100%;\n  }\n  .subreddit.preview {\n    width: 100%;\n  }\n  .progress, .progress.subgraph  {\n    top: 48px;\n    left: 0;\n    color: white;\n    text-align: center;\n    width: 100%;\n    position: absolute;\n    transform: initial;\n    box-shadow: initial;\n  }\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=62bce878&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=stylus&\""],"sourceRoot":""}